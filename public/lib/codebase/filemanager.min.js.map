{"version":3,"file":"filemanager.min.js","sources":["../node_modules/webix-jet/dist/es6/jet.js","../node_modules/jet-restate/index.js","../node_modules/@xbs/jet-helpers/rLayout.js","../node_modules/@xbs/jet-helpers/jetWin.js","../node_modules/jet-hotkey/index.js","../sources/helpers/icons.js","../sources/views/menus/menubody.js","../sources/views/menus/contextmenu.js","../sources/views/sections/dataview.js","../sources/views/cards.js","../sources/helpers/common.js","../node_modules/@wbx/view-codemirror-editor/codemirror.js","../sources/views/editor.js","../sources/helpers/prompt.js","../sources/views/menus/addnewmenu.js","../sources/views/folders.js","../sources/views/list.js","../sources/views/mobile/previewpopup.js","../sources/views/mobile/sidetree.js","../sources/views/panel-double.js","../sources/views/panel-search.js","../sources/views/panel.js","../sources/views/preview/info.js","../sources/views/preview/index.js","../node_modules/@wbx/view-plyr/plyr.js","../sources/views/preview/media.js","../sources/views/preview/template.js","../sources/views/progress.js","../sources/views/topbar.js","../sources/views/top.js","../sources/export_views.js","../sources/models/Backend.js","../sources/models/Cache.js","../sources/models/LocalData.js","../sources/models/Upload.js","../sources/models/Progress.js","../sources/models/Operations.js","../sources/app.js","../sources/locales/en.js"],"sourcesContent":["class NavigationBlocked {\r\n}\n\nclass JetBase {\r\n    constructor(webix, config) {\r\n        this.webixJet = true;\r\n        this.webix = webix;\r\n        this._events = [];\r\n        this._subs = {};\r\n        this._data = {};\r\n        if (config && config.params)\r\n            webix.extend(this._data, config.params);\r\n    }\r\n    getRoot() {\r\n        return this._root;\r\n    }\r\n    destructor() {\r\n        this._detachEvents();\r\n        this._destroySubs();\r\n        this._events = this._container = this.app = this._parent = this._root = null;\r\n    }\r\n    setParam(id, value, url) {\r\n        if (this._data[id] !== value) {\r\n            this._data[id] = value;\r\n            this._segment.update(id, value, 0);\r\n            if (url) {\r\n                return this.show(null);\r\n            }\r\n        }\r\n    }\r\n    getParam(id, parent) {\r\n        const value = this._data[id];\r\n        if (typeof value !== \"undefined\" || !parent) {\r\n            return value;\r\n        }\r\n        const view = this.getParentView();\r\n        if (view) {\r\n            return view.getParam(id, parent);\r\n        }\r\n    }\r\n    getUrl() {\r\n        return this._segment.suburl();\r\n    }\r\n    getUrlString() {\r\n        return this._segment.toString();\r\n    }\r\n    getParentView() {\r\n        return this._parent;\r\n    }\r\n    $$(id) {\r\n        if (typeof id === \"string\") {\r\n            const root = this.getRoot();\r\n            return root.queryView((obj => (obj.config.id === id || obj.config.localId === id) &&\r\n                (obj.$scope === root.$scope)), \"self\");\r\n        }\r\n        else {\r\n            return id;\r\n        }\r\n    }\r\n    on(obj, name, code) {\r\n        const id = obj.attachEvent(name, code);\r\n        this._events.push({ obj, id });\r\n        return id;\r\n    }\r\n    contains(view) {\r\n        for (const key in this._subs) {\r\n            const kid = this._subs[key].view;\r\n            if (kid === view || kid.contains(view)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    getSubView(name) {\r\n        const sub = this.getSubViewInfo(name);\r\n        if (sub) {\r\n            return sub.subview.view;\r\n        }\r\n    }\r\n    getSubViewInfo(name) {\r\n        const sub = this._subs[name || \"default\"];\r\n        if (sub) {\r\n            return { subview: sub, parent: this };\r\n        }\r\n        if (name === \"_top\") {\r\n            this._subs[name] = { url: \"\", id: null, popup: true };\r\n            return this.getSubViewInfo(name);\r\n        }\r\n        // when called from a child view, searches for nearest parent with subview\r\n        if (this._parent) {\r\n            return this._parent.getSubViewInfo(name);\r\n        }\r\n        return null;\r\n    }\r\n    _detachEvents() {\r\n        const events = this._events;\r\n        for (let i = events.length - 1; i >= 0; i--) {\r\n            events[i].obj.detachEvent(events[i].id);\r\n        }\r\n    }\r\n    _destroySubs() {\r\n        // destroy sub views\r\n        for (const key in this._subs) {\r\n            const subView = this._subs[key].view;\r\n            // it possible that subview was not loaded with any content yet\r\n            // so check on null\r\n            if (subView) {\r\n                subView.destructor();\r\n            }\r\n        }\r\n        // reset to prevent memory leaks\r\n        this._subs = {};\r\n    }\r\n    _init_url_data() {\r\n        const url = this._segment.current();\r\n        this._data = {};\r\n        this.webix.extend(this._data, url.params, true);\r\n    }\r\n    _getDefaultSub() {\r\n        if (this._subs.default) {\r\n            return this._subs.default;\r\n        }\r\n        for (const key in this._subs) {\r\n            const sub = this._subs[key];\r\n            if (!sub.branch && sub.view && key !== \"_top\") {\r\n                const child = sub.view._getDefaultSub();\r\n                if (child) {\r\n                    return child;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _routed_view() {\r\n        const parent = this.getParentView();\r\n        if (!parent) {\r\n            return true;\r\n        }\r\n        const sub = parent._getDefaultSub();\r\n        if (!sub && sub !== this) {\r\n            return false;\r\n        }\r\n        return parent._routed_view();\r\n    }\r\n}\n\nfunction parse(url) {\r\n    // remove starting /\r\n    if (url[0] === \"/\") {\r\n        url = url.substr(1);\r\n    }\r\n    // split url by \"/\"\r\n    const parts = url.split(\"/\");\r\n    const chunks = [];\r\n    // for each page in url\r\n    for (let i = 0; i < parts.length; i++) {\r\n        const test = parts[i];\r\n        const result = {};\r\n        // detect params\r\n        // support old \t\t\tsome:a=b:c=d\r\n        // and new notation\t\tsome?a=b&c=d\r\n        let pos = test.indexOf(\":\");\r\n        if (pos === -1) {\r\n            pos = test.indexOf(\"?\");\r\n        }\r\n        if (pos !== -1) {\r\n            const params = test.substr(pos + 1).split(/[\\:\\?\\&]/g);\r\n            // create hash of named params\r\n            for (const param of params) {\r\n                const dchunk = param.split(\"=\");\r\n                result[dchunk[0]] = decodeURIComponent(dchunk[1]);\r\n            }\r\n        }\r\n        // store parsed values\r\n        chunks[i] = {\r\n            page: (pos > -1 ? test.substr(0, pos) : test),\r\n            params: result,\r\n            isNew: true\r\n        };\r\n    }\r\n    // return array of page objects\r\n    return chunks;\r\n}\r\nfunction url2str(stack) {\r\n    const url = [];\r\n    for (const chunk of stack) {\r\n        url.push(\"/\" + chunk.page);\r\n        const params = obj2str(chunk.params);\r\n        if (params) {\r\n            url.push(\"?\" + params);\r\n        }\r\n    }\r\n    return url.join(\"\");\r\n}\r\nfunction obj2str(obj) {\r\n    const str = [];\r\n    for (const key in obj) {\r\n        if (typeof obj[key] === \"object\")\r\n            continue;\r\n        if (str.length) {\r\n            str.push(\"&\");\r\n        }\r\n        str.push(key + \"=\" + encodeURIComponent(obj[key]));\r\n    }\r\n    return str.join(\"\");\r\n}\n\nclass Route {\r\n    constructor(route, index) {\r\n        this._next = 1;\r\n        if (typeof route === \"string\") {\r\n            this.route = {\r\n                url: parse(route),\r\n                path: route\r\n            };\r\n        }\r\n        else {\r\n            this.route = route;\r\n        }\r\n        this.index = index;\r\n    }\r\n    current() {\r\n        return this.route.url[this.index];\r\n    }\r\n    next() {\r\n        return this.route.url[this.index + this._next];\r\n    }\r\n    suburl() {\r\n        return this.route.url.slice(this.index);\r\n    }\r\n    shift(params) {\r\n        const route = new Route(this.route, this.index + this._next);\r\n        route.setParams(route.route.url, params, route.index);\r\n        return route;\r\n    }\r\n    setParams(url, params, index) {\r\n        if (params) {\r\n            const old = url[index].params;\r\n            for (var key in params)\r\n                old[key] = params[key];\r\n        }\r\n    }\r\n    refresh() {\r\n        const url = this.route.url;\r\n        for (let i = this.index + 1; i < url.length; i++) {\r\n            url[i].isNew = true;\r\n        }\r\n    }\r\n    toString() {\r\n        const str = url2str(this.suburl());\r\n        return str ? str.substr(1) : \"\";\r\n    }\r\n    _join(path, kids) {\r\n        let url = this.route.url;\r\n        if (path === null) { // change of parameters, route elements are not affected\r\n            return url;\r\n        }\r\n        const old = this.route.url;\r\n        let reset = true;\r\n        url = old.slice(0, this.index + (kids ? this._next : 0));\r\n        if (path) {\r\n            url = url.concat(parse(path));\r\n            for (let i = 0; i < url.length; i++) {\r\n                if (old[i]) {\r\n                    url[i].view = old[i].view;\r\n                }\r\n                if (reset && old[i] && url[i].page === old[i].page) {\r\n                    url[i].isNew = false;\r\n                }\r\n                else if (url[i].isNew) {\r\n                    // if some segment was marked as new, all subsegments must be updated as well\r\n                    reset = false;\r\n                }\r\n            }\r\n        }\r\n        return url;\r\n    }\r\n    append(path) {\r\n        const url = this._join(path, true);\r\n        this.route.path = url2str(url);\r\n        this.route.url = url;\r\n        return this.route.path;\r\n    }\r\n    show(path, view, kids) {\r\n        const url = this._join(path.url, kids);\r\n        this.setParams(url, path.params, this.index + (kids ? this._next : 0));\r\n        return new Promise((res, rej) => {\r\n            const redirect = url2str(url);\r\n            const obj = {\r\n                url,\r\n                redirect,\r\n                confirm: Promise.resolve()\r\n            };\r\n            const app = view ? view.app : null;\r\n            // when creating a new route, it possible that it will not have any content\r\n            // guard is not necessary in such case\r\n            if (app) {\r\n                const result = app.callEvent(\"app:guard\", [obj.redirect, view, obj]);\r\n                if (!result) {\r\n                    rej(new NavigationBlocked());\r\n                    return;\r\n                }\r\n            }\r\n            obj.confirm.catch(err => rej(err)).then(() => {\r\n                if (obj.redirect === null) {\r\n                    rej(new NavigationBlocked());\r\n                    return;\r\n                }\r\n                if (obj.redirect !== redirect) {\r\n                    app.show(obj.redirect);\r\n                    rej(new NavigationBlocked());\r\n                    return;\r\n                }\r\n                this.route.path = redirect;\r\n                this.route.url = url;\r\n                res();\r\n            });\r\n        });\r\n    }\r\n    size(n) {\r\n        this._next = n;\r\n    }\r\n    split() {\r\n        const route = {\r\n            url: this.route.url.slice(this.index + 1),\r\n            path: \"\"\r\n        };\r\n        if (route.url.length) {\r\n            route.path = url2str(route.url);\r\n        }\r\n        return new Route(route, 0);\r\n    }\r\n    update(name, value, index) {\r\n        const chunk = this.route.url[this.index + (index || 0)];\r\n        if (!chunk) {\r\n            this.route.url.push({ page: \"\", params: {} });\r\n            return this.update(name, value, index);\r\n        }\r\n        if (name === \"\") {\r\n            chunk.page = value;\r\n        }\r\n        else {\r\n            chunk.params[name] = value;\r\n        }\r\n        this.route.path = url2str(this.route.url);\r\n    }\r\n}\n\nclass JetView extends JetBase {\r\n    constructor(app, config) {\r\n        super(app.webix);\r\n        this.app = app;\r\n        //this.$config = config;\r\n        this._children = [];\r\n    }\r\n    ui(ui, config) {\r\n        config = config || {};\r\n        const container = config.container || ui.container;\r\n        const jetview = this.app.createView(ui);\r\n        this._children.push(jetview);\r\n        jetview.render(container, this._segment, this);\r\n        if (typeof ui !== \"object\" || (ui instanceof JetBase)) {\r\n            // raw webix UI\r\n            return jetview;\r\n        }\r\n        else {\r\n            return jetview.getRoot();\r\n        }\r\n    }\r\n    show(path, config) {\r\n        config = config || {};\r\n        // convert parameters object to url\r\n        if (typeof path === \"object\") {\r\n            for (const key in path) {\r\n                this.setParam(key, path[key]);\r\n            }\r\n            path = null;\r\n        }\r\n        else {\r\n            // deligate to app in case of root prefix\r\n            if (path.substr(0, 1) === \"/\") {\r\n                return this.app.show(path, config);\r\n            }\r\n            // local path, do nothing\r\n            if (path.indexOf(\"./\") === 0) {\r\n                path = path.substr(2);\r\n            }\r\n            // parent path, call parent view\r\n            if (path.indexOf(\"../\") === 0) {\r\n                const parent = this.getParentView();\r\n                if (parent) {\r\n                    return parent.show(path.substr(3), config);\r\n                }\r\n                else {\r\n                    return this.app.show(\"/\" + path.substr(3));\r\n                }\r\n            }\r\n            const sub = this.getSubViewInfo(config.target);\r\n            if (sub) {\r\n                if (sub.parent !== this) {\r\n                    return sub.parent.show(path, config);\r\n                }\r\n                else if (config.target && config.target !== \"default\") {\r\n                    return this._renderFrameLock(config.target, sub.subview, {\r\n                        url: path,\r\n                        params: config.params,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (path) {\r\n                    return this.app.show(\"/\" + path, config);\r\n                }\r\n            }\r\n        }\r\n        return this._show(this._segment, { url: path, params: config.params }, this);\r\n    }\r\n    _show(segment, path, view) {\r\n        return segment.show(path, view, true).then(() => {\r\n            this._init_url_data();\r\n            return this._urlChange();\r\n        }).then(() => {\r\n            if (segment.route.linkRouter) {\r\n                this.app.getRouter().set(segment.route.path, { silent: true });\r\n                this.app.callEvent(\"app:route\", [segment.route.path]);\r\n            }\r\n        });\r\n    }\r\n    init(_$view, _$) {\r\n        // stub\r\n    }\r\n    ready(_$view, _$url) {\r\n        // stub\r\n    }\r\n    config() {\r\n        this.app.webix.message(\"View:Config is not implemented\");\r\n    }\r\n    urlChange(_$view, _$url) {\r\n        // stub\r\n    }\r\n    destroy() {\r\n        // stub\r\n    }\r\n    destructor() {\r\n        this.destroy();\r\n        this._destroyKids();\r\n        // destroy actual UI\r\n        if (this._root) {\r\n            this._root.destructor();\r\n            super.destructor();\r\n        }\r\n    }\r\n    use(plugin, config) {\r\n        plugin(this.app, this, config);\r\n    }\r\n    refresh() {\r\n        const url = this.getUrl();\r\n        this.destroy();\r\n        this._destroyKids();\r\n        this._destroySubs();\r\n        this._detachEvents();\r\n        if (this._container.tagName) {\r\n            this._root.destructor();\r\n        }\r\n        this._segment.refresh();\r\n        return this._render(this._segment);\r\n    }\r\n    render(root, url, parent) {\r\n        if (typeof url === \"string\") {\r\n            url = new Route(url, 0);\r\n        }\r\n        this._segment = url;\r\n        this._parent = parent;\r\n        this._init_url_data();\r\n        root = root || document.body;\r\n        const _container = (typeof root === \"string\") ? this.webix.toNode(root) : root;\r\n        if (this._container !== _container) {\r\n            this._container = _container;\r\n            return this._render(url);\r\n        }\r\n        else {\r\n            return this._urlChange().then(() => this.getRoot());\r\n        }\r\n    }\r\n    _render(url) {\r\n        const config = this.config();\r\n        if (config.then) {\r\n            return config.then(cfg => this._render_final(cfg, url));\r\n        }\r\n        else {\r\n            return this._render_final(config, url);\r\n        }\r\n    }\r\n    _render_final(config, url) {\r\n        // get previous view in the same slot\r\n        let slot = null;\r\n        let container = null;\r\n        let show = false;\r\n        if (!this._container.tagName) {\r\n            slot = this._container;\r\n            if (slot.popup) {\r\n                container = document.body;\r\n                show = true;\r\n            }\r\n            else {\r\n                container = this.webix.$$(slot.id);\r\n            }\r\n        }\r\n        else {\r\n            container = this._container;\r\n        }\r\n        // view already destroyed\r\n        if (!this.app || !container) {\r\n            return Promise.reject(null);\r\n        }\r\n        let response;\r\n        const current = this._segment.current();\r\n        // using wrapper object, so ui can be changed from app:render event\r\n        const result = { ui: {} };\r\n        this.app.copyConfig(config, result.ui, this._subs);\r\n        this.app.callEvent(\"app:render\", [this, url, result]);\r\n        result.ui.$scope = this;\r\n        /* destroy old HTML attached views before creating new one */\r\n        if (!slot && current.isNew && current.view) {\r\n            current.view.destructor();\r\n        }\r\n        try {\r\n            // special handling for adding inside of multiview - preserve old id\r\n            if (slot && !show) {\r\n                const oldui = container;\r\n                const parent = oldui.getParentView();\r\n                if (parent && parent.name === \"multiview\" && !result.ui.id) {\r\n                    result.ui.id = oldui.config.id;\r\n                }\r\n            }\r\n            this._root = this.app.webix.ui(result.ui, container);\r\n            const asWin = this._root;\r\n            // check for url added to ignore this.ui calls\r\n            if (show && asWin.setPosition && !asWin.isVisible()) {\r\n                asWin.show();\r\n            }\r\n            // check, if we are replacing some older view\r\n            if (slot) {\r\n                if (slot.view && slot.view !== this && slot.view !== this.app) {\r\n                    slot.view.destructor();\r\n                }\r\n                slot.id = this._root.config.id;\r\n                if (this.getParentView() || !this.app.app)\r\n                    slot.view = this;\r\n                else {\r\n                    // when we have subapp, set whole app as a view\r\n                    // so on destruction, the whole app will be destroyed\r\n                    slot.view = this.app;\r\n                }\r\n            }\r\n            if (current.isNew) {\r\n                current.view = this;\r\n                current.isNew = false;\r\n            }\r\n            response = Promise.resolve(this._init(this._root, url)).then(() => {\r\n                return this._urlChange().then(() => {\r\n                    this._initUrl = null;\r\n                    return this.ready(this._root, url.suburl());\r\n                });\r\n            });\r\n        }\r\n        catch (e) {\r\n            response = Promise.reject(e);\r\n        }\r\n        return response.catch(err => this._initError(this, err));\r\n    }\r\n    _init(view, url) {\r\n        return this.init(view, url.suburl());\r\n    }\r\n    _urlChange() {\r\n        this.app.callEvent(\"app:urlchange\", [this, this._segment]);\r\n        const waits = [];\r\n        for (const key in this._subs) {\r\n            const frame = this._subs[key];\r\n            const wait = this._renderFrameLock(key, frame, null);\r\n            if (wait) {\r\n                waits.push(wait);\r\n            }\r\n        }\r\n        return Promise.all(waits).then(() => {\r\n            return this.urlChange(this._root, this._segment.suburl());\r\n        });\r\n    }\r\n    _renderFrameLock(key, frame, path) {\r\n        // if subview is not occupied by some rendering yet\r\n        if (!frame.lock) {\r\n            // retreive and store rendering end promise\r\n            const lock = this._renderFrame(key, frame, path);\r\n            if (lock) {\r\n                // clear lock after frame rendering\r\n                // as promise.finally is not supported by  Webix lesser than 6.2\r\n                // using a more verbose notation\r\n                frame.lock = lock.then(() => frame.lock = null, () => frame.lock = null);\r\n            }\r\n        }\r\n        // return rendering end promise\r\n        return frame.lock;\r\n    }\r\n    _renderFrame(key, frame, path) {\r\n        //default route\r\n        if (key === \"default\") {\r\n            if (this._segment.next()) {\r\n                // we have a next segment in url, render it\r\n                let params = path ? path.params : null;\r\n                if (frame.params) {\r\n                    params = this.webix.extend(params || {}, frame.params);\r\n                }\r\n                return this._createSubView(frame, this._segment.shift(params));\r\n            }\r\n            else if (frame.view && frame.popup) {\r\n                // there is no next segment, delete the existing sub-view\r\n                frame.view.destructor();\r\n                frame.view = null;\r\n            }\r\n        }\r\n        //if new path provided, set it to the frame\r\n        if (path !== null) {\r\n            frame.url = path.url;\r\n            if (frame.params) {\r\n                path.params = this.webix.extend(path.params || {}, frame.params);\r\n            }\r\n        }\r\n        // in case of routed sub-view\r\n        if (frame.route) {\r\n            // we have a new path for sub-view\r\n            if (path !== null) {\r\n                return frame.route.show(path, frame.view).then(() => {\r\n                    return this._createSubView(frame, frame.route);\r\n                });\r\n            }\r\n            // do not trigger onChange for isolated sub-views\r\n            if (frame.branch) {\r\n                return;\r\n            }\r\n        }\r\n        let view = frame.view;\r\n        // if view doesn't exists yet, init it\r\n        if (!view && frame.url) {\r\n            if (typeof frame.url === \"string\") {\r\n                // string, so we have isolated subview url\r\n                frame.route = new Route(frame.url, 0);\r\n                if (path)\r\n                    frame.route.setParams(frame.route.route.url, path.params, 0);\r\n                if (frame.params)\r\n                    frame.route.setParams(frame.route.route.url, frame.params, 0);\r\n                return this._createSubView(frame, frame.route);\r\n            }\r\n            else {\r\n                // object, so we have an embeded subview\r\n                if (typeof frame.url === \"function\" && !(view instanceof frame.url)) {\r\n                    view = new (this.app._override(frame.url))(this.app, \"\");\r\n                }\r\n                if (!view) {\r\n                    view = frame.url;\r\n                }\r\n            }\r\n        }\r\n        // trigger onChange for already existed view\r\n        if (view) {\r\n            return view.render(frame, (frame.route || this._segment), this);\r\n        }\r\n    }\r\n    _initError(view, err) {\r\n        /*\r\n            if view is destroyed, ignore any view related errors\r\n        */\r\n        if (this.app) {\r\n            this.app.error(\"app:error:initview\", [err, view]);\r\n        }\r\n        return true;\r\n    }\r\n    _createSubView(sub, suburl) {\r\n        return this.app.createFromURL(suburl.current()).then(view => {\r\n            return view.render(sub, suburl, this);\r\n        });\r\n    }\r\n    _destroyKids() {\r\n        // destroy child views\r\n        const uis = this._children;\r\n        for (let i = uis.length - 1; i >= 0; i--) {\r\n            if (uis[i] && uis[i].destructor) {\r\n                uis[i].destructor();\r\n            }\r\n        }\r\n        // reset vars for better GC processing\r\n        this._children = [];\r\n    }\r\n}\n\n// wrapper for raw objects and Jet 1.x structs\r\nclass JetViewRaw extends JetView {\r\n    constructor(app, config) {\r\n        super(app, config);\r\n        this._ui = config.ui;\r\n    }\r\n    config() {\r\n        return this._ui;\r\n    }\r\n}\n\nclass SubRouter {\r\n    constructor(cb, config, app) {\r\n        this.path = \"\";\r\n        this.app = app;\r\n    }\r\n    set(path, config) {\r\n        this.path = path;\r\n        const a = this.app;\r\n        a.app.getRouter().set(a._segment.append(this.path), { silent: true });\r\n    }\r\n    get() {\r\n        return this.path;\r\n    }\r\n}\n\nlet _once = true;\r\nclass JetAppBase extends JetBase {\r\n    constructor(config) {\r\n        const webix = (config || {}).webix || window.webix;\r\n        config = webix.extend({\r\n            name: \"App\",\r\n            version: \"1.0\",\r\n            start: \"/home\"\r\n        }, config, true);\r\n        super(webix, config);\r\n        this.config = config;\r\n        this.app = this.config.app;\r\n        this.ready = Promise.resolve();\r\n        this._services = {};\r\n        this.webix.extend(this, this.webix.EventSystem);\r\n    }\r\n    getUrl() {\r\n        return this._subSegment.suburl();\r\n    }\r\n    getUrlString() {\r\n        return this._subSegment.toString();\r\n    }\r\n    getService(name) {\r\n        let obj = this._services[name];\r\n        if (typeof obj === \"function\") {\r\n            obj = this._services[name] = obj(this);\r\n        }\r\n        return obj;\r\n    }\r\n    setService(name, handler) {\r\n        this._services[name] = handler;\r\n    }\r\n    destructor() {\r\n        this.getSubView().destructor();\r\n        super.destructor();\r\n    }\r\n    // copy object and collect extra handlers\r\n    copyConfig(obj, target, config) {\r\n        // raw ui config\r\n        if (obj instanceof JetBase ||\r\n            (typeof obj === \"function\" && obj.prototype instanceof JetBase)) {\r\n            obj = { $subview: obj };\r\n        }\r\n        // subview placeholder\r\n        if (typeof obj.$subview != \"undefined\") {\r\n            return this.addSubView(obj, target, config);\r\n        }\r\n        // process sub-properties\r\n        const isArray = obj instanceof Array;\r\n        target = target || (isArray ? [] : {});\r\n        for (const method in obj) {\r\n            let point = obj[method];\r\n            // view class\r\n            if (typeof point === \"function\" && point.prototype instanceof JetBase) {\r\n                point = { $subview: point };\r\n            }\r\n            if (point && typeof point === \"object\" &&\r\n                !(point instanceof this.webix.DataCollection) && !(point instanceof RegExp) && !(point instanceof Map)) {\r\n                if (point instanceof Date) {\r\n                    target[method] = new Date(point);\r\n                }\r\n                else {\r\n                    const copy = this.copyConfig(point, (point instanceof Array ? [] : {}), config);\r\n                    if (copy !== null) {\r\n                        if (isArray)\r\n                            target.push(copy);\r\n                        else\r\n                            target[method] = copy;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                target[method] = point;\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    getRouter() {\r\n        return this.$router;\r\n    }\r\n    clickHandler(e, target) {\r\n        if (e) {\r\n            target = target || (e.target || e.srcElement);\r\n            if (target && target.getAttribute) {\r\n                const trigger = target.getAttribute(\"trigger\");\r\n                if (trigger) {\r\n                    this._forView(target, view => view.app.trigger(trigger));\r\n                    e.cancelBubble = true;\r\n                    return e.preventDefault();\r\n                }\r\n                const route = target.getAttribute(\"route\");\r\n                if (route) {\r\n                    this._forView(target, view => view.show(route));\r\n                    e.cancelBubble = true;\r\n                    return e.preventDefault();\r\n                }\r\n            }\r\n        }\r\n        const parent = target.parentNode;\r\n        if (parent) {\r\n            this.clickHandler(e, parent);\r\n        }\r\n    }\r\n    getRoot() {\r\n        return this.getSubView().getRoot();\r\n    }\r\n    refresh() {\r\n        if (!this._subSegment) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return this.getSubView().refresh().then(view => {\r\n            this.callEvent(\"app:route\", [this.getUrl()]);\r\n            return view;\r\n        });\r\n    }\r\n    loadView(url) {\r\n        const views = this.config.views;\r\n        let result = null;\r\n        if (url === \"\") {\r\n            return Promise.resolve(this._loadError(\"\", new Error(\"Webix Jet: Empty url segment\")));\r\n        }\r\n        try {\r\n            if (views) {\r\n                if (typeof views === \"function\") {\r\n                    // custom loading strategy\r\n                    result = views(url);\r\n                }\r\n                else {\r\n                    // predefined hash\r\n                    result = views[url];\r\n                }\r\n                if (typeof result === \"string\") {\r\n                    url = result;\r\n                    result = null;\r\n                }\r\n            }\r\n            if (!result) {\r\n                if (url === \"_hidden\") {\r\n                    result = { hidden: true };\r\n                }\r\n                else if (url === \"_blank\") {\r\n                    result = {};\r\n                }\r\n                else {\r\n                    url = url.replace(/\\./g, \"/\");\r\n                    result = this.require(\"jet-views\", url);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            result = this._loadError(url, e);\r\n        }\r\n        // custom handler can return view or its promise\r\n        if (!result.then) {\r\n            result = Promise.resolve(result);\r\n        }\r\n        // set error handler\r\n        result = result\r\n            .then(module => module.__esModule ? module.default : module)\r\n            .catch(err => this._loadError(url, err));\r\n        return result;\r\n    }\r\n    _forView(target, handler) {\r\n        const view = this.webix.$$(target);\r\n        if (view) {\r\n            handler(view.$scope);\r\n        }\r\n    }\r\n    _loadViewDynamic(url) {\r\n        return null;\r\n    }\r\n    createFromURL(chunk) {\r\n        let view;\r\n        if (chunk.isNew || !chunk.view) {\r\n            view = this.loadView(chunk.page)\r\n                .then(ui => this.createView(ui, name, chunk.params));\r\n        }\r\n        else {\r\n            view = Promise.resolve(chunk.view);\r\n        }\r\n        return view;\r\n    }\r\n    _override(ui) {\r\n        const over = this.config.override;\r\n        if (over) {\r\n            let dv;\r\n            while (ui) {\r\n                dv = ui;\r\n                ui = over.get(ui);\r\n            }\r\n            return dv;\r\n        }\r\n        return ui;\r\n    }\r\n    createView(ui, name, params) {\r\n        ui = this._override(ui);\r\n        let obj;\r\n        if (typeof ui === \"function\") {\r\n            if (ui.prototype instanceof JetAppBase) {\r\n                // UI class\r\n                return new ui({ app: this, name, params, router: SubRouter });\r\n            }\r\n            else if (ui.prototype instanceof JetBase) {\r\n                // UI class\r\n                return new ui(this, { name, params });\r\n            }\r\n            else {\r\n                // UI factory functions\r\n                ui = ui(this);\r\n            }\r\n        }\r\n        if (ui instanceof JetBase) {\r\n            obj = ui;\r\n        }\r\n        else {\r\n            // UI object\r\n            obj = new JetViewRaw(this, { name, ui });\r\n        }\r\n        return obj;\r\n    }\r\n    // show view path\r\n    show(url, config) {\r\n        if (url && this.app && url.indexOf(\"//\") == 0)\r\n            return this.app.show(url.substr(1), config);\r\n        return this.render(this._container, url || this.config.start, config);\r\n    }\r\n    // event helpers\r\n    trigger(name, ...rest) {\r\n        this.apply(name, rest);\r\n    }\r\n    apply(name, data) {\r\n        this.callEvent(name, data);\r\n    }\r\n    action(name) {\r\n        return this.webix.bind(function (...rest) {\r\n            this.apply(name, rest);\r\n        }, this);\r\n    }\r\n    on(name, handler) {\r\n        this.attachEvent(name, handler);\r\n    }\r\n    use(plugin, config) {\r\n        plugin(this, null, config);\r\n    }\r\n    error(name, er) {\r\n        this.callEvent(name, er);\r\n        this.callEvent(\"app:error\", er);\r\n        /* tslint:disable */\r\n        if (this.config.debug) {\r\n            for (var i = 0; i < er.length; i++) {\r\n                console.error(er[i]);\r\n                if (er[i] instanceof Error) {\r\n                    let text = er[i].message;\r\n                    if (text.indexOf(\"Module build failed\") === 0) {\r\n                        text = text.replace(/\\x1b\\[[0-9;]*m/g, \"\");\r\n                        document.body.innerHTML = `<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>${text}</pre>`;\r\n                    }\r\n                    else {\r\n                        text += \"<br><br>Check console for more details\";\r\n                        this.webix.message({ type: \"error\", text: text, expire: -1 });\r\n                    }\r\n                }\r\n            }\r\n            debugger;\r\n        }\r\n        /* tslint:enable */\r\n    }\r\n    // renders top view\r\n    render(root, url, config) {\r\n        this._container = (typeof root === \"string\") ?\r\n            this.webix.toNode(root) :\r\n            (root || document.body);\r\n        const firstInit = !this.$router;\r\n        let path = null;\r\n        if (firstInit) {\r\n            if (_once && \"tagName\" in this._container) {\r\n                this.webix.event(document.body, \"click\", e => this.clickHandler(e));\r\n                _once = false;\r\n            }\r\n            if (typeof url === \"string\") {\r\n                url = new Route(url, 0);\r\n            }\r\n            this._subSegment = this._first_start(url);\r\n            this._subSegment.route.linkRouter = true;\r\n        }\r\n        else {\r\n            if (typeof url === \"string\") {\r\n                path = url;\r\n            }\r\n            else {\r\n                if (this.app) {\r\n                    path = url.split().route.path || this.config.start;\r\n                }\r\n                else {\r\n                    path = url.toString();\r\n                }\r\n            }\r\n        }\r\n        const params = config ? config.params : this.config.params || null;\r\n        const top = this.getSubView();\r\n        const segment = this._subSegment;\r\n        const ready = segment\r\n            .show({ url: path, params }, top)\r\n            .then(() => this.createFromURL(segment.current()))\r\n            .then(view => view.render(root, segment))\r\n            .then(base => {\r\n            this.$router.set(segment.route.path, { silent: true });\r\n            this.callEvent(\"app:route\", [this.getUrl()]);\r\n            return base;\r\n        });\r\n        this.ready = this.ready.then(() => ready);\r\n        return ready;\r\n    }\r\n    getSubView() {\r\n        if (this._subSegment) {\r\n            const view = this._subSegment.current().view;\r\n            if (view)\r\n                return view;\r\n        }\r\n        return new JetView(this, {});\r\n    }\r\n    require(type, url) { return null; }\r\n    _first_start(route) {\r\n        this._segment = route;\r\n        const cb = (a) => setTimeout(() => {\r\n            this.show(a).catch(e => {\r\n                if (!(e instanceof NavigationBlocked))\r\n                    throw e;\r\n            });\r\n        }, 1);\r\n        this.$router = new (this.config.router)(cb, this.config, this);\r\n        // start animation for top-level app\r\n        if (this._container === document.body && this.config.animation !== false) {\r\n            const node = this._container;\r\n            this.webix.html.addCss(node, \"webixappstart\");\r\n            setTimeout(() => {\r\n                this.webix.html.removeCss(node, \"webixappstart\");\r\n                this.webix.html.addCss(node, \"webixapp\");\r\n            }, 10);\r\n        }\r\n        if (!route) {\r\n            // if no url defined, check router first\r\n            let urlString = this.$router.get();\r\n            if (!urlString) {\r\n                urlString = this.config.start;\r\n                this.$router.set(urlString, { silent: true });\r\n            }\r\n            route = new Route(urlString, 0);\r\n        }\r\n        else if (this.app) {\r\n            const now = route.current().view;\r\n            route.current().view = this;\r\n            if (route.next()) {\r\n                route.refresh();\r\n                route = route.split();\r\n            }\r\n            else {\r\n                route = new Route(this.config.start, 0);\r\n            }\r\n            route.current().view = now;\r\n        }\r\n        return route;\r\n    }\r\n    // error during view resolving\r\n    _loadError(url, err) {\r\n        this.error(\"app:error:resolve\", [err, url]);\r\n        return { template: \" \" };\r\n    }\r\n    addSubView(obj, target, config) {\r\n        const url = obj.$subview !== true ? obj.$subview : null;\r\n        const name = obj.name || (url ? this.webix.uid() : \"default\");\r\n        target.id = obj.id || \"s\" + this.webix.uid();\r\n        const view = config[name] = {\r\n            id: target.id,\r\n            url,\r\n            branch: obj.branch,\r\n            popup: obj.popup,\r\n            params: obj.params\r\n        };\r\n        return view.popup ? null : target;\r\n    }\r\n}\n\nclass HashRouter {\r\n    constructor(cb, config) {\r\n        this.config = config || {};\r\n        this._detectPrefix();\r\n        this.cb = cb;\r\n        window.onpopstate = () => this.cb(this.get());\r\n    }\r\n    set(path, config) {\r\n        if (this.config.routes) {\r\n            const compare = path.split(\"?\", 2);\r\n            for (const key in this.config.routes) {\r\n                if (this.config.routes[key] === compare[0]) {\r\n                    path = key + (compare.length > 1 ? \"?\" + compare[1] : \"\");\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (this.get() !== path) {\r\n            window.history.pushState(null, null, this.prefix + this.sufix + path);\r\n        }\r\n        if (!config || !config.silent) {\r\n            setTimeout(() => this.cb(path), 1);\r\n        }\r\n    }\r\n    get() {\r\n        let path = this._getRaw().replace(this.prefix, \"\").replace(this.sufix, \"\");\r\n        path = (path !== \"/\" && path !== \"#\") ? path : \"\";\r\n        if (this.config.routes) {\r\n            const compare = path.split(\"?\", 2);\r\n            const key = this.config.routes[compare[0]];\r\n            if (key) {\r\n                path = key + (compare.length > 1 ? \"?\" + compare[1] : \"\");\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n    _detectPrefix() {\r\n        // use \"#!\" for backward compatibility\r\n        const sufix = this.config.routerPrefix;\r\n        this.sufix = \"#\" + ((typeof sufix === \"undefined\") ? \"!\" : sufix);\r\n        this.prefix = document.location.href.split(\"#\", 2)[0];\r\n    }\r\n    _getRaw() {\r\n        return document.location.href;\r\n    }\r\n}\n\nlet isPatched = false;\r\nfunction patch(w) {\r\n    if (isPatched || !w) {\r\n        return;\r\n    }\r\n    isPatched = true;\r\n    // custom promise for IE8\r\n    const win = window;\r\n    if (!win.Promise) {\r\n        win.Promise = w.promise;\r\n    }\r\n    const version = w.version.split(\".\");\r\n    // will be fixed in webix 5.3\r\n    if (version[0] * 10 + version[1] * 1 < 53) {\r\n        w.ui.freeze = function (handler) {\r\n            // disabled because webix jet 5.0 can't handle resize of scrollview correctly\r\n            // w.ui.$freeze = true;\r\n            const res = handler();\r\n            if (res && res.then) {\r\n                res.then(function (some) {\r\n                    w.ui.$freeze = false;\r\n                    w.ui.resize();\r\n                    return some;\r\n                });\r\n            }\r\n            else {\r\n                w.ui.$freeze = false;\r\n                w.ui.resize();\r\n            }\r\n            return res;\r\n        };\r\n    }\r\n    // adding views as classes\r\n    const baseAdd = w.ui.baselayout.prototype.addView;\r\n    const baseRemove = w.ui.baselayout.prototype.removeView;\r\n    const config = {\r\n        addView(view, index) {\r\n            // trigger logic only for widgets inside of jet-view\r\n            // ignore case when addView used with already initialized widget\r\n            if (this.$scope && this.$scope.webixJet && !view.queryView) {\r\n                const jview = this.$scope;\r\n                const subs = {};\r\n                view = jview.app.copyConfig(view, {}, subs);\r\n                baseAdd.apply(this, [view, index]);\r\n                for (const key in subs) {\r\n                    jview._renderFrame(key, subs[key], null).then(() => {\r\n                        jview._subs[key] = subs[key];\r\n                    });\r\n                }\r\n                return view.id;\r\n            }\r\n            else {\r\n                return baseAdd.apply(this, arguments);\r\n            }\r\n        },\r\n        removeView() {\r\n            baseRemove.apply(this, arguments);\r\n            if (this.$scope && this.$scope.webixJet) {\r\n                const subs = this.$scope._subs;\r\n                // check all sub-views, destroy and clean the removed one\r\n                for (const key in subs) {\r\n                    const test = subs[key];\r\n                    if (!w.$$(test.id)) {\r\n                        test.view.destructor();\r\n                        delete subs[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    w.extend(w.ui.layout.prototype, config, true);\r\n    w.extend(w.ui.baselayout.prototype, config, true);\r\n    // wrapper for using Jet Apps as views\r\n    w.protoUI({\r\n        name: \"jetapp\",\r\n        $init(cfg) {\r\n            this.$app = new this.app(cfg);\r\n            const id = w.uid().toString();\r\n            cfg.body = { id };\r\n            this.$ready.push(function () {\r\n                this.callEvent(\"onInit\", [this.$app]);\r\n                this.$app.render({ id });\r\n            });\r\n        }\r\n    }, w.ui.proxy, w.EventSystem);\r\n}\n\nclass JetApp extends JetAppBase {\r\n    constructor(config) {\r\n        config.router = config.router || HashRouter;\r\n        super(config);\r\n        patch(this.webix);\r\n    }\r\n    require(type, url) {\r\n        return require(type + \"/\" + url);\r\n    }\r\n}\n\nclass StoreRouter {\r\n    constructor(cb, config, app) {\r\n        this.storage = config.storage || app.webix.storage.session;\r\n        this.name = (config.storeName || config.id + \":route\");\r\n        this.cb = cb;\r\n    }\r\n    set(path, config) {\r\n        this.storage.put(this.name, path);\r\n        if (!config || !config.silent) {\r\n            setTimeout(() => this.cb(path), 1);\r\n        }\r\n    }\r\n    get() {\r\n        return this.storage.get(this.name);\r\n    }\r\n}\n\nclass UrlRouter extends HashRouter {\r\n    _detectPrefix() {\r\n        this.prefix = \"\";\r\n        this.sufix = this.config.routerPrefix || \"\";\r\n    }\r\n    _getRaw() {\r\n        return document.location.pathname + (document.location.search || \"\");\r\n    }\r\n}\n\nclass EmptyRouter {\r\n    constructor(cb, _$config) {\r\n        this.path = \"\";\r\n        this.cb = cb;\r\n    }\r\n    set(path, config) {\r\n        this.path = path;\r\n        if (!config || !config.silent) {\r\n            setTimeout(() => this.cb(path), 1);\r\n        }\r\n    }\r\n    get() {\r\n        return this.path;\r\n    }\r\n}\n\nfunction UnloadGuard(app, view, config) {\r\n    view.on(app, `app:guard`, function (_$url, point, promise) {\r\n        if (point === view || point.contains(view)) {\r\n            const res = config();\r\n            if (res === false) {\r\n                promise.confirm = Promise.reject(new NavigationBlocked());\r\n            }\r\n            else {\r\n                promise.confirm = promise.confirm.then(() => res);\r\n            }\r\n        }\r\n    });\r\n}\n\n//     (c) 2012-2018 Airbnb, Inc.\n\n// var has = require('has');\nfunction has(store, key) {\n  return Object.prototype.hasOwnProperty.call(store, key);\n}\n// var forEach = require('for-each');\nfunction forEach(obj, handler, context) {\n  for (var key in obj) {\n    if (has(obj, key)) {\n      handler.call((context || obj), obj[key], key, obj);\n    }\n  }\n}\n// var trim = require('string.prototype.trim');\nfunction trim(str) {\n  return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n}\n// var warning = require('warning');\nfunction warn(message) {\n  message = 'Warning: ' + message;\n  if (typeof console !== 'undefined') {\n    console.error(message);\n  }\n\n  try { throw new Error(message); } catch (x) {}\n}\n\nvar replace = String.prototype.replace;\nvar split = String.prototype.split;\n\n// #### Pluralization methods\n// The string that separates the different phrase possibilities.\nvar delimiter = '||||';\n\nvar russianPluralGroups = function (n) {\n  var end = n % 10;\n  if (n !== 11 && end === 1) {\n    return 0;\n  }\n  if (2 <= end && end <= 4 && !(n >= 12 && n <= 14)) {\n    return 1;\n  }\n  return 2;\n};\n\n// Mapping from pluralization group plural logic.\nvar pluralTypes = {\n  arabic: function (n) {\n    // http://www.arabeyes.org/Plural_Forms\n    if (n < 3) { return n; }\n    var lastTwo = n % 100;\n    if (lastTwo >= 3 && lastTwo <= 10) return 3;\n    return lastTwo >= 11 ? 4 : 5;\n  },\n  bosnian_serbian: russianPluralGroups,\n  chinese: function () { return 0; },\n  croatian: russianPluralGroups,\n  french: function (n) { return n > 1 ? 1 : 0; },\n  german: function (n) { return n !== 1 ? 1 : 0; },\n  russian: russianPluralGroups,\n  lithuanian: function (n) {\n    if (n % 10 === 1 && n % 100 !== 11) { return 0; }\n    return n % 10 >= 2 && n % 10 <= 9 && (n % 100 < 11 || n % 100 > 19) ? 1 : 2;\n  },\n  czech: function (n) {\n    if (n === 1) { return 0; }\n    return (n >= 2 && n <= 4) ? 1 : 2;\n  },\n  polish: function (n) {\n    if (n === 1) { return 0; }\n    var end = n % 10;\n    return 2 <= end && end <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n  },\n  icelandic: function (n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; },\n  slovenian: function (n) {\n    var lastTwo = n % 100;\n    if (lastTwo === 1) {\n      return 0;\n    }\n    if (lastTwo === 2) {\n      return 1;\n    }\n    if (lastTwo === 3 || lastTwo === 4) {\n      return 2;\n    }\n    return 3;\n  }\n};\n\n\n// Mapping from pluralization group to individual language codes/locales.\n// Will look up based on exact match, if not found and it's a locale will parse the locale\n// for language code, and if that does not exist will default to 'en'\nvar pluralTypeToLanguages = {\n  arabic: ['ar'],\n  bosnian_serbian: ['bs-Latn-BA', 'bs-Cyrl-BA', 'srl-RS', 'sr-RS'],\n  chinese: ['id', 'id-ID', 'ja', 'ko', 'ko-KR', 'lo', 'ms', 'th', 'th-TH', 'zh'],\n  croatian: ['hr', 'hr-HR'],\n  german: ['fa', 'da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hi-IN', 'hu', 'hu-HU', 'it', 'nl', 'no', 'pt', 'sv', 'tr'],\n  french: ['fr', 'tl', 'pt-br'],\n  russian: ['ru', 'ru-RU'],\n  lithuanian: ['lt'],\n  czech: ['cs', 'cs-CZ', 'sk'],\n  polish: ['pl'],\n  icelandic: ['is'],\n  slovenian: ['sl-SL']\n};\n\nfunction langToTypeMap(mapping) {\n  var ret = {};\n  forEach(mapping, function (langs, type) {\n    forEach(langs, function (lang) {\n      ret[lang] = type;\n    });\n  });\n  return ret;\n}\n\nfunction pluralTypeName(locale) {\n  var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n  return langToPluralType[locale]\n    || langToPluralType[split.call(locale, /-/, 1)[0]]\n    || langToPluralType.en;\n}\n\nfunction pluralTypeIndex(locale, count) {\n  return pluralTypes[pluralTypeName(locale)](count);\n}\n\nfunction escape(token) {\n  return token.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction constructTokenRegex(opts) {\n  var prefix = (opts && opts.prefix) || '%{';\n  var suffix = (opts && opts.suffix) || '}';\n\n  if (prefix === delimiter || suffix === delimiter) {\n    throw new RangeError('\"' + delimiter + '\" token is reserved for pluralization');\n  }\n\n  return new RegExp(escape(prefix) + '(.*?)' + escape(suffix), 'g');\n}\n\nvar dollarRegex = /\\$/g;\nvar dollarBillsYall = '$$';\nvar defaultTokenRegex = /%\\{(.*?)\\}/g;\n\n// ### transformPhrase(phrase, substitutions, locale)\n//\n// Takes a phrase string and transforms it by choosing the correct\n// plural form and interpolating it.\n//\n//     transformPhrase('Hello, %{name}!', {name: 'Spike'});\n//     // \"Hello, Spike!\"\n//\n// The correct plural form is selected if substitutions.smart_count\n// is set. You can pass in a number instead of an Object as `substitutions`\n// as a shortcut for `smart_count`.\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 1}, 'en');\n//     // \"1 new message\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', {smart_count: 2}, 'en');\n//     // \"2 new messages\"\n//\n//     transformPhrase('%{smart_count} new messages |||| 1 new message', 5, 'en');\n//     // \"5 new messages\"\n//\n// You should pass in a third argument, the locale, to specify the correct plural type.\n// It defaults to `'en'` with 2 plural forms.\nfunction transformPhrase(phrase, substitutions, locale, tokenRegex) {\n  if (typeof phrase !== 'string') {\n    throw new TypeError('Polyglot.transformPhrase expects argument #1 to be string');\n  }\n\n  if (substitutions == null) {\n    return phrase;\n  }\n\n  var result = phrase;\n  var interpolationRegex = tokenRegex || defaultTokenRegex;\n\n  // allow number as a pluralization shortcut\n  var options = typeof substitutions === 'number' ? { smart_count: substitutions } : substitutions;\n\n  // Select plural form: based on a phrase text that contains `n`\n  // plural forms separated by `delimiter`, a `locale`, and a `substitutions.smart_count`,\n  // choose the correct plural form. This is only done if `count` is set.\n  if (options.smart_count != null && result) {\n    var texts = split.call(result, delimiter);\n    result = trim(texts[pluralTypeIndex(locale || 'en', options.smart_count)] || texts[0]);\n  }\n\n  // Interpolate: Creates a `RegExp` object for each interpolation placeholder.\n  result = replace.call(result, interpolationRegex, function (expression, argument) {\n    if (!has(options, argument) || options[argument] == null) { return expression; }\n    // Ensure replacement value is escaped to prevent special $-prefixed regex replace tokens.\n    return replace.call(options[argument], dollarRegex, dollarBillsYall);\n  });\n\n  return result;\n}\n\n// ### Polyglot class constructor\nfunction Polyglot(options) {\n  var opts = options || {};\n  this.phrases = {};\n  this.extend(opts.phrases || {});\n  this.currentLocale = opts.locale || 'en';\n  var allowMissing = opts.allowMissing ? transformPhrase : null;\n  this.onMissingKey = typeof opts.onMissingKey === 'function' ? opts.onMissingKey : allowMissing;\n  this.warn = opts.warn || warn;\n  this.tokenRegex = constructTokenRegex(opts.interpolation);\n}\n\n// ### polyglot.locale([locale])\n//\n// Get or set locale. Internally, Polyglot only uses locale for pluralization.\nPolyglot.prototype.locale = function (newLocale) {\n  if (newLocale) this.currentLocale = newLocale;\n  return this.currentLocale;\n};\n\n// ### polyglot.extend(phrases)\n//\n// Use `extend` to tell Polyglot how to translate a given key.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The key can be any string.  Feel free to call `extend` multiple times;\n// it will override any phrases with the same key, but leave existing phrases\n// untouched.\n//\n// It is also possible to pass nested phrase objects, which get flattened\n// into an object with the nested keys concatenated using dot notation.\n//\n//     polyglot.extend({\n//       \"nav\": {\n//         \"hello\": \"Hello\",\n//         \"hello_name\": \"Hello, %{name}\",\n//         \"sidebar\": {\n//           \"welcome\": \"Welcome\"\n//         }\n//       }\n//     });\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}',\n//     //   'nav.sidebar.welcome': 'Welcome'\n//     // }\n//\n// `extend` accepts an optional second argument, `prefix`, which can be used\n// to prefix every key in the phrases object with some string, using dot\n// notation.\n//\n//     polyglot.extend({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     }, \"nav\");\n//\n//     console.log(polyglot.phrases);\n//     // {\n//     //   'nav.hello': 'Hello',\n//     //   'nav.hello_name': 'Hello, %{name}'\n//     // }\n//\n// This feature is used internally to support nested phrase objects.\nPolyglot.prototype.extend = function (morePhrases, prefix) {\n  forEach(morePhrases, function (phrase, key) {\n    var prefixedKey = prefix ? prefix + '.' + key : key;\n    if (typeof phrase === 'object') {\n      this.extend(phrase, prefixedKey);\n    } else {\n      this.phrases[prefixedKey] = phrase;\n    }\n  }, this);\n};\n\n// ### polyglot.unset(phrases)\n// Use `unset` to selectively remove keys from a polyglot instance.\n//\n//     polyglot.unset(\"some_key\");\n//     polyglot.unset({\n//       \"hello\": \"Hello\",\n//       \"hello_name\": \"Hello, %{name}\"\n//     });\n//\n// The unset method can take either a string (for the key), or an object hash with\n// the keys that you would like to unset.\nPolyglot.prototype.unset = function (morePhrases, prefix) {\n  if (typeof morePhrases === 'string') {\n    delete this.phrases[morePhrases];\n  } else {\n    forEach(morePhrases, function (phrase, key) {\n      var prefixedKey = prefix ? prefix + '.' + key : key;\n      if (typeof phrase === 'object') {\n        this.unset(phrase, prefixedKey);\n      } else {\n        delete this.phrases[prefixedKey];\n      }\n    }, this);\n  }\n};\n\n// ### polyglot.clear()\n//\n// Clears all phrases. Useful for special cases, such as freeing\n// up memory if you have lots of phrases but no longer need to\n// perform any translation. Also used internally by `replace`.\nPolyglot.prototype.clear = function () {\n  this.phrases = {};\n};\n\n// ### polyglot.replace(phrases)\n//\n// Completely replace the existing phrases with a new set of phrases.\n// Normally, just use `extend` to add more phrases, but under certain\n// circumstances, you may want to make sure no old phrases are lying around.\nPolyglot.prototype.replace = function (newPhrases) {\n  this.clear();\n  this.extend(newPhrases);\n};\n\n\n// ### polyglot.t(key, options)\n//\n// The most-used method. Provide a key, and `t` will return the\n// phrase.\n//\n//     polyglot.t(\"hello\");\n//     => \"Hello\"\n//\n// The phrase value is provided first by a call to `polyglot.extend()` or\n// `polyglot.replace()`.\n//\n// Pass in an object as the second argument to perform interpolation.\n//\n//     polyglot.t(\"hello_name\", {name: \"Spike\"});\n//     => \"Hello, Spike\"\n//\n// If you like, you can provide a default value in case the phrase is missing.\n// Use the special option key \"_\" to specify a default.\n//\n//     polyglot.t(\"i_like_to_write_in_language\", {\n//       _: \"I like to write in %{language}.\",\n//       language: \"JavaScript\"\n//     });\n//     => \"I like to write in JavaScript.\"\n//\nPolyglot.prototype.t = function (key, options) {\n  var phrase, result;\n  var opts = options == null ? {} : options;\n  if (typeof this.phrases[key] === 'string') {\n    phrase = this.phrases[key];\n  } else if (typeof opts._ === 'string') {\n    phrase = opts._;\n  } else if (this.onMissingKey) {\n    var onMissingKey = this.onMissingKey;\n    result = onMissingKey(key, opts, this.currentLocale, this.tokenRegex);\n  } else {\n    this.warn('Missing translation for key: \"' + key + '\"');\n    result = key;\n  }\n  if (typeof phrase === 'string') {\n    result = transformPhrase(phrase, opts, this.currentLocale, this.tokenRegex);\n  }\n  return result;\n};\n\n\n// ### polyglot.has(key)\n//\n// Check if polyglot has a translation for given key\nPolyglot.prototype.has = function (key) {\n  return has(this.phrases, key);\n};\n\n// export transformPhrase\nPolyglot.transformPhrase = function transform(phrase, substitutions, locale) {\n  return transformPhrase(phrase, substitutions, locale);\n};\n\nvar webixPolyglot = Polyglot;\n\nfunction Locale(app, _view, config) {\r\n    config = config || {};\r\n    const storage = config.storage;\r\n    let lang = storage ? (storage.get(\"lang\") || \"en\") : (config.lang || \"en\");\r\n    function setLangData(name, data, silent) {\r\n        if (data.__esModule) {\r\n            data = data.default;\r\n        }\r\n        const pconfig = { phrases: data };\r\n        if (config.polyglot) {\r\n            app.webix.extend(pconfig, config.polyglot);\r\n        }\r\n        const poly = service.polyglot = new webixPolyglot(pconfig);\r\n        poly.locale(name);\r\n        service._ = app.webix.bind(poly.t, poly);\r\n        lang = name;\r\n        if (storage) {\r\n            storage.put(\"lang\", lang);\r\n        }\r\n        if (config.webix) {\r\n            const locName = config.webix[name];\r\n            if (locName) {\r\n                app.webix.i18n.setLocale(locName);\r\n            }\r\n        }\r\n        if (!silent) {\r\n            return app.refresh();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    function getLang() { return lang; }\r\n    function setLang(name, silent) {\r\n        // ignore setLang if loading by path is disabled\r\n        if (config.path === false) {\r\n            return;\r\n        }\r\n        const path = (config.path ? config.path + \"/\" : \"\") + name;\r\n        const data = app.require(\"jet-locales\", path);\r\n        setLangData(name, data, silent);\r\n    }\r\n    const service = {\r\n        getLang, setLang, setLangData, _: null, polyglot: null\r\n    };\r\n    app.setService(\"locale\", service);\r\n    setLang(lang, true);\r\n}\n\nfunction show(view, config, value) {\r\n    if (config.urls) {\r\n        value = config.urls[value] || value;\r\n    }\r\n    else if (config.param) {\r\n        value = { [config.param]: value };\r\n    }\r\n    view.show(value);\r\n}\r\nfunction Menu(app, view, config) {\r\n    const frame = view.getSubViewInfo().parent;\r\n    const ui = view.$$(config.id || config);\r\n    let silent = false;\r\n    ui.attachEvent(\"onchange\", function () {\r\n        if (!silent) {\r\n            show(frame, config, this.getValue());\r\n        }\r\n    });\r\n    ui.attachEvent(\"onafterselect\", function () {\r\n        if (!silent) {\r\n            let id = null;\r\n            if (ui.setValue) {\r\n                id = this.getValue();\r\n            }\r\n            else if (ui.getSelectedId) {\r\n                id = ui.getSelectedId();\r\n            }\r\n            show(frame, config, id);\r\n        }\r\n    });\r\n    view.on(app, `app:route`, function () {\r\n        let name = \"\";\r\n        if (config.param) {\r\n            name = view.getParam(config.param, true);\r\n        }\r\n        else {\r\n            const segment = frame.getUrl()[1];\r\n            if (segment) {\r\n                name = segment.page;\r\n            }\r\n        }\r\n        if (name) {\r\n            silent = true;\r\n            if (ui.setValue && ui.getValue() !== name) {\r\n                ui.setValue(name);\r\n            }\r\n            else if (ui.select && ui.exists(name) && ui.getSelectedId() !== name) {\r\n                ui.select(name);\r\n            }\r\n            silent = false;\r\n        }\r\n    });\r\n}\n\nconst baseicons = {\r\n    good: \"check\",\r\n    error: \"warning\",\r\n    saving: \"refresh fa-spin\"\r\n};\r\nconst basetext = {\r\n    good: \"Ok\",\r\n    error: \"Error\",\r\n    saving: \"Connecting...\"\r\n};\r\nfunction Status(app, view, config) {\r\n    let status = \"good\";\r\n    let count = 0;\r\n    let iserror = false;\r\n    let expireDelay = config.expire;\r\n    if (!expireDelay && expireDelay !== false) {\r\n        expireDelay = 2000;\r\n    }\r\n    const texts = config.texts || basetext;\r\n    const icons = config.icons || baseicons;\r\n    if (typeof config === \"string\") {\r\n        config = { target: config };\r\n    }\r\n    function refresh(content) {\r\n        const area = view.$$(config.target);\r\n        if (area) {\r\n            if (!content) {\r\n                content = \"<div class='status_\" +\r\n                    status +\r\n                    \"'><span class='webix_icon fa-\" +\r\n                    icons[status] + \"'></span> \" + texts[status] + \"</div>\";\r\n            }\r\n            area.setHTML(content);\r\n        }\r\n    }\r\n    function success() {\r\n        count--;\r\n        setStatus(\"good\");\r\n    }\r\n    function fail(err) {\r\n        count--;\r\n        setStatus(\"error\", err);\r\n    }\r\n    function start(promise) {\r\n        count++;\r\n        setStatus(\"saving\");\r\n        if (promise && promise.then) {\r\n            promise.then(success, fail);\r\n        }\r\n    }\r\n    function getStatus() {\r\n        return status;\r\n    }\r\n    function hideStatus() {\r\n        if (count === 0) {\r\n            refresh(\" \");\r\n        }\r\n    }\r\n    function setStatus(mode, err) {\r\n        if (count < 0) {\r\n            count = 0;\r\n        }\r\n        if (mode === \"saving\") {\r\n            status = \"saving\";\r\n            refresh();\r\n        }\r\n        else {\r\n            iserror = (mode === \"error\");\r\n            if (count === 0) {\r\n                status = iserror ? \"error\" : \"good\";\r\n                if (iserror) {\r\n                    app.error(\"app:error:server\", [err.responseText || err]);\r\n                }\r\n                else {\r\n                    if (expireDelay) {\r\n                        setTimeout(hideStatus, expireDelay);\r\n                    }\r\n                }\r\n                refresh();\r\n            }\r\n        }\r\n    }\r\n    function track(data) {\r\n        const dp = app.webix.dp(data);\r\n        if (dp) {\r\n            view.on(dp, \"onAfterDataSend\", start);\r\n            view.on(dp, \"onAfterSaveError\", (_id, _obj, response) => fail(response));\r\n            view.on(dp, \"onAfterSave\", success);\r\n        }\r\n    }\r\n    app.setService(\"status\", {\r\n        getStatus,\r\n        setStatus,\r\n        track\r\n    });\r\n    if (config.remote) {\r\n        view.on(app.webix, \"onRemoteCall\", start);\r\n    }\r\n    if (config.ajax) {\r\n        view.on(app.webix, \"onBeforeAjax\", (_mode, _url, _data, _request, _headers, _files, promise) => {\r\n            start(promise);\r\n        });\r\n    }\r\n    if (config.data) {\r\n        track(config.data);\r\n    }\r\n}\n\nfunction Theme(app, _view, config) {\r\n    config = config || {};\r\n    const storage = config.storage;\r\n    let theme = storage ?\r\n        (storage.get(\"theme\") || \"flat-default\")\r\n        :\r\n            (config.theme || \"flat-default\");\r\n    const service = {\r\n        getTheme() { return theme; },\r\n        setTheme(name, silent) {\r\n            const parts = name.split(\"-\");\r\n            const links = document.getElementsByTagName(\"link\");\r\n            for (let i = 0; i < links.length; i++) {\r\n                const lname = links[i].getAttribute(\"title\");\r\n                if (lname) {\r\n                    if (lname === name || lname === parts[0]) {\r\n                        links[i].disabled = false;\r\n                    }\r\n                    else {\r\n                        links[i].disabled = true;\r\n                    }\r\n                }\r\n            }\r\n            app.webix.skin.set(parts[0]);\r\n            // remove old css\r\n            app.webix.html.removeCss(document.body, \"theme-\" + theme);\r\n            // add new css\r\n            app.webix.html.addCss(document.body, \"theme-\" + name);\r\n            theme = name;\r\n            if (storage) {\r\n                storage.put(\"theme\", name);\r\n            }\r\n            if (!silent) {\r\n                app.refresh();\r\n            }\r\n        }\r\n    };\r\n    app.setService(\"theme\", service);\r\n    service.setTheme(theme, true);\r\n}\n\nfunction copyParams(data, url, route) {\r\n    for (let i = 0; i < route.length; i++) {\r\n        data[route[i]] = url[i + 1] ? url[i + 1].page : \"\";\r\n    }\r\n}\r\nfunction UrlParam(app, view, config) {\r\n    const route = config.route || config;\r\n    const data = {};\r\n    view.on(app, \"app:urlchange\", function (subview, segment) {\r\n        if (view === subview) {\r\n            copyParams(data, segment.suburl(), route);\r\n            segment.size(route.length + 1);\r\n        }\r\n    });\r\n    const os = view.setParam;\r\n    const og = view.getParam;\r\n    view.setParam = function (name, value, show) {\r\n        const index = route.indexOf(name);\r\n        if (index >= 0) {\r\n            data[name] = value;\r\n            this._segment.update(\"\", value, index + 1);\r\n            if (show) {\r\n                return view.show(null);\r\n            }\r\n        }\r\n        else {\r\n            return os.call(this, name, value, show);\r\n        }\r\n    };\r\n    view.getParam = function (key, mode) {\r\n        const val = data[key];\r\n        if (typeof val !== \"undefined\") {\r\n            return val;\r\n        }\r\n        return og.call(this, key, mode);\r\n    };\r\n    copyParams(data, view.getUrl(), route);\r\n}\n\nfunction User(app, _view, config) {\r\n    config = config || {};\r\n    const login = config.login || \"/login\";\r\n    const logout = config.logout || \"/logout\";\r\n    const afterLogin = config.afterLogin || app.config.start;\r\n    const afterLogout = config.afterLogout || \"/login\";\r\n    const ping = config.ping || 5 * 60 * 1000;\r\n    const model = config.model;\r\n    let user = config.user;\r\n    const service = {\r\n        getUser() {\r\n            return user;\r\n        },\r\n        getStatus(server) {\r\n            if (!server) {\r\n                return user !== null;\r\n            }\r\n            return model.status().catch(() => null).then(data => {\r\n                user = data;\r\n            });\r\n        },\r\n        login(name, pass) {\r\n            return model.login(name, pass).then(data => {\r\n                user = data;\r\n                if (!data) {\r\n                    throw new Error(\"Access denied\");\r\n                }\r\n                app.callEvent(\"app:user:login\", [user]);\r\n                app.show(afterLogin);\r\n            });\r\n        },\r\n        logout() {\r\n            user = null;\r\n            return model.logout().then(res => {\r\n                app.callEvent(\"app:user:logout\", []);\r\n                return res;\r\n            });\r\n        }\r\n    };\r\n    function canNavigate(url, obj) {\r\n        if (url === logout) {\r\n            service.logout();\r\n            obj.redirect = afterLogout;\r\n        }\r\n        else if (url !== login && !service.getStatus()) {\r\n            obj.redirect = login;\r\n        }\r\n    }\r\n    app.setService(\"user\", service);\r\n    app.attachEvent(`app:guard`, function (url, _$root, obj) {\r\n        if (config.public && config.public(url)) {\r\n            return true;\r\n        }\r\n        if (typeof user === \"undefined\") {\r\n            obj.confirm = service.getStatus(true).then(() => canNavigate(url, obj));\r\n        }\r\n        return canNavigate(url, obj);\r\n    });\r\n    if (ping) {\r\n        setInterval(() => service.getStatus(true), ping);\r\n    }\r\n}\n\n/*\r\nMIT License\r\nCopyright (c) 2019 XB Software\r\n*/\r\nlet webix = window.webix;\r\nif (webix) {\r\n    patch(webix);\r\n}\r\nconst plugins = {\r\n    UnloadGuard, Locale, Menu, Theme, User, Status, UrlParam\r\n};\r\nconst errors = { NavigationBlocked };\r\nconst w = window;\r\nif (!w.Promise) {\r\n    w.Promise = w.webix.promise;\r\n}\n\nexport { plugins, errors, JetApp, JetView, HashRouter, StoreRouter, UrlRouter, EmptyRouter, SubRouter };\n//# sourceMappingURL=jet.js.map\n","var index = 1;\nfunction uid() {\n\treturn index++;\n}\n\nvar empty = undefined;\n\nexport function ignoreInitial(code) {\n\tlet init = false;\n\treturn function() {\n\t\tif (init) return code.apply(this, arguments);\n\t\telse init = true;\n\t};\n}\n\nvar context = null;\nexport function withContext(value, code) {\n\tcontext = value;\n\tcode();\n\tcontext = null;\n}\n\nexport function filter(rule, handler) {\n\treturn function(v, o, obj, meta) {\n\t\tif (rule(v, meta)) handler.apply(this, arguments);\n\t};\n}\n\nexport function link(source, target, key) {\n\tObject.defineProperty(target, key, {\n\t\tget: () => source[key],\n\t\tset: value => (source[key] = value),\n\t});\n}\n\nexport function debounce(handler, delay) {\n\tdelay = delay || 200;\n\tlet timer = null;\n\tlet data = null;\n\treturn function() {\n\t\tdata = arguments;\n\t\tif (!timer) {\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = null;\n\n\t\t\t\thandler.apply(this, data);\n\t\t\t}, delay);\n\t\t}\n\t};\n}\n\nexport function createState(data, config) {\n\tconfig = config || {};\n\tconst handlers = {};\n\tconst out = {};\n\n\tconst observe = function(mask, handler) {\n\t\tvar key = uid();\n\t\thandlers[key] = { mask, handler };\n\t\tif (mask === \"*\") handler(out, empty, mask);\n\t\telse handler(out[mask], empty, mask);\n\n\t\treturn key;\n\t};\n\n\tconst observeEnd = function(id) {\n\t\tdelete handlers[id];\n\t};\n\n\tconst queue = [];\n\tlet waitInQueue = false;\n\n\tvar batch = function(code) {\n\t\tif (typeof code !== \"function\") {\n\t\t\tconst values = code;\n\t\t\tcode = () => {\n\t\t\t\tfor (const key in values) out[key] = values[key];\n\t\t\t};\n\t\t}\n\n\t\twaitInQueue = true;\n\t\tcode(out);\n\t\twaitInQueue = false;\n\t\twhile (queue.length) {\n\t\t\tconst obj = queue.shift();\n\t\t\tnotify.apply(this, obj);\n\t\t}\n\t};\n\n\tconst notify = function(key, old, value, meta) {\n\t\tif (waitInQueue) {\n\t\t\tqueue.push([key, old, value, meta]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst list = Object.keys(handlers);\n\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\tconst obj = handlers[list[i]];\n\t\t\tif (!obj) continue;\n\t\t\tif (obj.mask === \"*\" || obj.mask === key) {\n\t\t\t\tobj.handler(value, old, key, meta);\n\t\t\t}\n\t\t}\n\t};\n\n\t// normal js object\n\tfor (const key2 in data) {\n\t\tif (data.hasOwnProperty(key2)) {\n\t\t\tconst test = data[key2];\n\t\t\tif (config.nested && typeof test === \"object\" && test) {\n\t\t\t\tout[key2] = createState(test, config);\n\t\t\t} else {\n\t\t\t\treactive(out, test, key2, notify);\n\t\t\t}\n\t\t}\n\t}\n\n\tObject.defineProperty(out, \"$changes\", {\n\t\tvalue: {\n\t\t\tattachEvent: observe,\n\t\t\tdetachEvent: observeEnd,\n\t\t},\n\t\tenumerable: false,\n\t\tconfigurable: false,\n\t});\n\tObject.defineProperty(out, \"$observe\", {\n\t\tvalue: observe,\n\t\tenumerable: false,\n\t\tconfigurable: false,\n\t});\n\tObject.defineProperty(out, \"$batch\", {\n\t\tvalue: batch,\n\t\tenumerable: false,\n\t\tconfigurable: false,\n\t});\n\n\treturn out;\n}\n\nfunction reactive(obj, val, key, notify) {\n\tObject.defineProperty(obj, key, {\n\t\tget: function() {\n\t\t\treturn val;\n\t\t},\n\t\tset: function(value) {\n\t\t\tvar changed = false;\n\t\t\tif (val === null || value === null) {\n\t\t\t\tchanged = val !== value;\n\t\t\t} else {\n\t\t\t\tchanged = val.valueOf() != value.valueOf();\n\t\t\t}\n\n\t\t\tif (changed) {\n\t\t\t\tvar old = val;\n\t\t\t\tval = value;\n\t\t\t\tnotify(key, old, value, context);\n\t\t\t}\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: false,\n\t});\n}","let once = false;\n\nexport function initRLayout(){\n    if (once) return;\n    once = true;\n\n    webix.protoUI(\n        {\n            name: \"r-layout\",\n            sizeTrigger(app, handler, value) {\n                this._compactValue = value;\n                this._compactHandler = handler;\n                this._app = app;\n\n                const config = app.config;\n                this._forceCompact = typeof config.params.forceCompact !== \"undefined\";\n                this._compactWidth = config.compactWidth;\n\n                if (!this._forceCompact) this._checkTrigger(this.$view.width, value);\n            },\n            _checkTrigger(x, value) {\n                if (this._compactWidth) {\n                    if (\n                        (x <= this._compactWidth && !value) ||\n                        (x > this._compactWidth && value)\n                    ) {\n                        this._compactWidth = null;\n                        this._compactHandler(!value);\n                        return false;\n                    }\n                }\n                return true;\n            },\n            $setSize(x, y) {\n                if (this._forceCompact || this._checkTrigger(x, this._compactValue))\n                    webix.ui.layout.prototype.$setSize.call(this, x, y);\n                if (this._app) this._app.callEvent(\"view:resize\", []); //edit popup resize\n            },\n        },\n        webix.ui.layout\n    );\n}\n","export function initJetWin(app) {\n\tlet appId;\n\n\tconst service = {\n\t\tupdateConfig(config){\n\t\t\tconst appView = app.getRoot();\n\t\t\tconst appNode = appView.$view;\n\n\t\t\tif(!appId){\n\t\t\t\tif(appNode.id)\n\t\t\t\t\tappId = appNode.id;\n\t\t\t\telse \n\t\t\t\t\tappNode.id = appId = \"webix_\" + webix.uid();\n\n\t\t\t\twebix.html.addStyle(`.webix_win_inside *:not(.webix_modal_box):not(.webix_modal_cover){ z-index: 0; }`);\n\t\t\t\twebix.html.addStyle(`#${appId}{ position: relative; }`);\n\t\t\t\twebix.html.addStyle(`#${appId} .webix_window{ z-index:2 !important; }`);\n\t\t\t\twebix.html.addStyle(`#${appId} .webix_disabled{ z-index:1 !important; }`);\n\t\t\t}\n\t\t\telse if(appId && !appNode.id) //app refresh\n\t\t\t\tappNode.id = appId;\n\n\t\t\tconfig.container = appId;\n\n\t\t\tif(config.fullscreen){\n\t\t\t\tconfig._fillApp = true;\n\t\t\t\tdelete config.fullscreen;\n\t\t\t}\n\n\t\t\tif(!config.on)\n\t\t\t\tconfig.on = {};\n\n\t\t\tlet firstShow = true;\n\t\t\tconst defaultHandler = config.on.onShow;\n\n\t\t\tconfig.on.onShow = function(){\n\t\t\t\tif(defaultHandler)\n\t\t\t\t\tdefaultHandler.apply(this, arguments);\n\n\t\t\t\tif(firstShow){\n\t\t\t\t\tthis.$setSize = (x, y) => {\n\t\t\t\t\t\tsetSize(this, appView, true);\n\t\t\t\t\t\twebix.ui.window.prototype.$setSize.apply(this, [x, y]);\n\t\t\t\t\t};\n\t\t\t\t\tsetHandlers(this, app);\n\t\t\t\t\tfirstShow = null;\n\t\t\t\t}\n\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\twebix.html.addCss(appNode, \"webix_win_inside\");\n\t\t\t\tappView.disable();\n\n\t\t\t\tsetSize(this, appView);\n\t\t\t}\n\n\t\t\treturn config;\n\t\t}\n\t};\n\n\tapp.setService(\"jet-win\", service);\n}\n\nfunction setSize(win, appView, silent){\n\tconst appWidth = appView.$width;\n\tconst appHeight = appView.$height;\n\n\tif(win.config._fillApp)\n\t\twin.define({\n\t\t\twidth: appWidth,\n\t\t\theight: appHeight,\n\t\t});\n\telse {\n\t\twin.define({\n\t\t\tleft: (appWidth - win.$width) / 2,\n\t\t\ttop: (appHeight - win.$height) / 2,\n\t\t});\n\t}\n\n\tif(!silent)\n\t\twin.resize();\n}\n\nfunction setHandlers(win, app){\n\tconst appView = app.getRoot();\n\n\twin.attachEvent(\"onHide\", ()=> {\n\t\tif(!appView.$destructed){\n\t\t\twebix.html.removeCss(appView.$view, \"webix_win_inside\");\n\t\t\tappView.enable();\n\t\t}\n\t});\n\n\tconst resizeEv = app.attachEvent(\"view:resize\", ()=> {\n\t\tsetSize(win, appView);\n\t});\n\n\twin.attachEvent(\"onDestruct\", ()=> {\n\t\tapp.detachEvent(resizeEv);\n\t});\n}\n","export default function handler(view) {\n\treturn {\n\t\tattachEvent: (key, handler) => {\n\t\t\twebix.UIManager.addHotKey(key, handler, view);\n\t\t\treturn { key, handler };\n\t\t},\n\t\tdetachEvent: ({ key, handler }) =>\n\t\t\twebix.UIManager.removeHotKey(key, handler, view),\n\t};\n}\n","export const folderIcon = \"<span class='webix_icon wxi-folder'></span>\";\nexport const backIcon =\n\t\"<span class='webix_icon wxi-angle-double-left webix_fmanager_back_icon'></span>\";\nexport const folderCardIcon =\n\t\"<span class='webix_icon wxi-folder webix_fmanager_folder_icon'></span>\";\nexport const menuIcon =\n\t\"<span class='webix_icon wxi-dots webix_fmanager_menu_icon'></span>\";\n\nexport const gridMode =\n\t\"<span class='webix_fmanager_icon fmi-view-list webix_fmanager_mode_icon'></span>\";\nexport const cardMode =\n\t\"<span class='webix_fmanager_icon fmi-view-grid webix_fmanager_mode_icon'></span>\";\nexport const doubleMode =\n\t\"<span class='webix_fmanager_icon fmi-view-array webix_fmanager_mode_icon'></span>\";\n","import { JetView } from \"webix-jet\";\n\nconst FOLDER = 0x01; // folders (any folders in tree and right side)\nconst TEXT = 0x02; // code type files\nconst VIEW = 0x04; // files that can be opened in a browser (some audio files are downloadable)\nconst COMPACT = 0x08; // compact mode\nconst SEARCH = 0x10; // menu opened in search (search results)\nconst FILE = 0x20; // files\nconst SINGLE = 0x40; // menu is opened for 1 item (file or folder)\nconst RIGHT = 0x80; // menu is opened on the right side (item or empty space)\nconst ITEMS = 0x100; // files and folders in both parts\n\nexport default class MenuBodyView extends JetView {\n\tconstructor(app, config) {\n\t\tsuper(app);\n\t\tthis.compact = !!config.compact;\n\t\tthis.tree = !!config.tree;\n\t}\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst state = this.getParam(\"state\");\n\n\t\tconst options = [\n\t\t\t{\n\t\t\t\tid: \"download\",\n\t\t\t\tvalue: _(\"Download\"),\n\t\t\t\ticon: \"wxi-download\",\n\t\t\t\tshow: FILE | SINGLE,\n\t\t\t\thotkey: \"Ctrl+D\",\n\t\t\t},\n\t\t\t{\n\t\t\t\t$template: \"Separator\",\n\t\t\t\tshow: FILE | SINGLE,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"toggle-preview\",\n\t\t\t\tvalue: _(\"Preview\"),\n\t\t\t\ticon: \"wxi-eye\",\n\t\t\t\tshow: COMPACT | FILE,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"locate\",\n\t\t\t\tvalue: _(\"Open item location\"),\n\t\t\t\ticon: \"wxi-folder\",\n\t\t\t\thotkey: \"Ctrl+Alt+O\",\n\t\t\t\tshow: SEARCH | SINGLE,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"open\",\n\t\t\t\tvalue: _(\"Open\"),\n\t\t\t\ticon: \"wxi-folder-open\",\n\t\t\t\thotkey: \"Ctrl+O\",\n\t\t\t\tshow: VIEW | SINGLE,\n\t\t\t},\n\t\t\t// edit option (5)\n\t\t\t{\n\t\t\t\t$template: \"Separator\",\n\t\t\t\tshow: VIEW,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"copy\",\n\t\t\t\tvalue: _(\"Copy\"),\n\t\t\t\thotkey: \"Ctrl+C\",\n\t\t\t\ticon: \"fmi-content-copy\",\n\t\t\t\tshow: RIGHT | ITEMS,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"cut\",\n\t\t\t\tvalue: _(\"Cut\"),\n\t\t\t\thotkey: \"Ctrl+X\",\n\t\t\t\ticon: \"fmi-content-cut\",\n\t\t\t\tshow: RIGHT | ITEMS,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"paste\",\n\t\t\t\tvalue: _(\"Paste\"),\n\t\t\t\thotkey: \"Ctrl+V\",\n\t\t\t\ticon: \"fmi-content-paste\",\n\t\t\t\tshow: RIGHT,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$template: \"Separator\",\n\t\t\t\tshow: RIGHT | ITEMS,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"rename\",\n\t\t\t\tvalue: _(\"Rename\"),\n\t\t\t\ticon: \"fmi-rename-box\",\n\t\t\t\thotkey: \"Ctrl+R\",\n\t\t\t\tshow: ITEMS | SINGLE,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"delete\",\n\t\t\t\tvalue: _(\"Delete\"),\n\t\t\t\ticon: \"wxi-close\",\n\t\t\t\thotkey: \"Del / &#8592;\",\n\t\t\t\tshow: ITEMS,\n\t\t\t},\n\t\t];\n\n\t\tif (this.app.config.editor) {\n\t\t\toptions.splice(5, 0, {\n\t\t\t\tid: \"edit\",\n\t\t\t\tvalue: _(\"Edit\"),\n\t\t\t\ticon: \"wxi-pencil\",\n\t\t\t\thotkey: \"Ctrl+E\",\n\t\t\t\tshow: TEXT,\n\t\t\t});\n\t\t}\n\n\t\tconst menu = {\n\t\t\tview: \"menu\",\n\t\t\tcss: \"webix_fmanager_menu\",\n\t\t\tlayout: \"y\",\n\t\t\tautoheight: true,\n\t\t\tdata: options,\n\t\t\ttemplate: obj => {\n\t\t\t\treturn (\n\t\t\t\t\t(obj.icon\n\t\t\t\t\t\t? `<span class=\"webix_list_icon webix_icon ${obj.icon}\"></span>`\n\t\t\t\t\t\t: \"\") +\n\t\t\t\t\tobj.value +\n\t\t\t\t\t(obj.hotkey\n\t\t\t\t\t\t? `<span class=\"webix_fmanager_context-menu-hotkey\">${obj.hotkey}</span>`\n\t\t\t\t\t\t: \"\")\n\t\t\t\t);\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonMenuItemClick: id => {\n\t\t\t\t\tif (id === \"toggle-preview\") state.preview = !state.preview;\n\t\t\t\t\telse this.app.callEvent(\"app:action\", [id, this.Files]);\n\t\t\t\t\tthis.app.callEvent(\"app:filemenu:click\");\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn menu;\n\t}\n\tFilterOptions(files) {\n\t\tthis.Files = files;\n\n\t\tconst file = files[0];\n\t\tconst many = files.length > 1;\n\n\t\tconst vtypes = [\"image\", \"audio\", \"video\", \"code\", \"pdf\"];\n\t\tconst viewable =\n\t\t\tvtypes.indexOf(file.type) != -1 || vtypes.indexOf(file.$ext) != -1;\n\t\tconst search = this.app.getState().search;\n\n\t\tconst empty = file.type === \"empty\";\n\n\t\tthis.getRoot().define(\"width\", search && !many ? 270 : 200);\n\n\t\tthis.getRoot().filter(o => {\n\t\t\treturn !(\n\t\t\t\t(o.show & SINGLE && many) ||\n\t\t\t\t(o.show & FOLDER && file.type !== \"folder\") ||\n\t\t\t\t(o.show & FILE && (file.type === \"folder\" || file.type == \"empty\")) ||\n\t\t\t\t(o.show & TEXT && file.type !== \"code\") ||\n\t\t\t\t(o.show & VIEW && !viewable) ||\n\t\t\t\t(o.show & COMPACT && !this.compact) ||\n\t\t\t\t(o.show & RIGHT && this.tree) ||\n\t\t\t\t(o.show & ITEMS && empty) ||\n\t\t\t\t(o.show & SEARCH && !search)\n\t\t\t);\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nimport MenuBodyView from \"./menubody\";\n\nexport default class ContextMenuView extends JetView {\n\tconstructor(app, config) {\n\t\tsuper(app);\n\t\tthis._config = config;\n\t}\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"context\",\n\t\t\tbody: {\n\t\t\t\t$subview: new (this.app.dynamic(MenuBodyView))(this.app, {\n\t\t\t\t\t...this._config,\n\t\t\t\t}),\n\t\t\t\tname: \"options\",\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonBeforeShow: e => {\n\t\t\t\t\tconst files = this._Locate(e);\n\t\t\t\t\tif (files) this.getSubView(\"options\").FilterOptions(files);\n\t\t\t\t\telse return false;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\tinit() {\n\t\tthis.on(this.app, \"app:filemenu:click\", () => this.getRoot().hide());\n\t}\n\tAttachTo(master, locate) {\n\t\tthis._Locate = locate;\n\t\tthis.getRoot().attachTo(master);\n\t}\n\tShow(trg) {\n\t\tthis.getRoot().show(trg, {\n\t\t\tx: -trg.offsetX,\n\t\t\ty: trg.target.offsetHeight - trg.offsetY,\n\t\t});\n\t}\n\tHide() {\n\t\tthis.getRoot().hide();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport hotkey from \"jet-hotkey\";\n\nimport { folderIcon } from \"../../helpers/icons\";\n\nimport ContextMenuView from \"../menus/contextmenu\";\n\nexport default class DataViewBase extends JetView {\n\tinit() {\n\t\tthis.State = this.getParam(\"state\");\n\t\tthis.Local = this.app.getService(\"local\");\n\n\t\tthis._Track = true;\n\t\tthis.WTable.attachEvent(\"onAfterSelect\", () => this.ShiftFocus());\n\t\tthis.WTable.attachEvent(\"onSelectChange\", () => {\n\t\t\tif (this._Track) {\n\t\t\t\tconst newIDs = []\n\t\t\t\t\t.concat(\n\t\t\t\t\t\tthis.WTable.getSelectedId(true).map(a => this.WTable.getItem(a))\n\t\t\t\t\t)\n\t\t\t\t\t.filter(a => a.value !== \"..\");\n\t\t\t\tif (newIDs.length || this.State.selectedItem.length) {\n\t\t\t\t\tif (!newIDs.length) newIDs.$noSelect = true;\n\t\t\t\t\tthis.State.selectedItem = newIDs;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// refresh self on folder change\n\t\tthis.on(this.State.$changes, \"path\", (v, o) => {\n\t\t\tif (!this.State.search) {\n\t\t\t\tif (this.State.source === \"files\") {\n\t\t\t\t\tif (!o) this.LoadData(v);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.Local.folders().then(hierarchy => {\n\t\t\t\t\t\t\tthis.State.selectedItem = this.GetPrevLocation(hierarchy, v, o);\n\t\t\t\t\t\t\tthis.LoadData(v);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (o) {\n\t\t\t\tthis.State.$batch({\n\t\t\t\t\tsearch: \"\",\n\t\t\t\t\tsearchStats: null,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// refresh selection on localData.refresh\n\t\tthis.on(this.WTable.data, \"onStoreUpdated\", (i, o, m) => {\n\t\t\tif (!m && this.WTable.count() && this.State.selectedItem.length) {\n\t\t\t\tthis.SelectActive();\n\t\t\t}\n\t\t});\n\n\t\t// Shared hotkeys\n\t\tthis.AddHotkeys();\n\n\t\tconst compact = this.getParam(\"compact\", true);\n\t\tthis.Menu = this.ui(\n\t\t\tnew (this.app.dynamic(ContextMenuView))(this.app, {\n\t\t\t\tcompact,\n\t\t\t\tstate: this.State,\n\t\t\t})\n\t\t);\n\t\tthis.Menu.AttachTo(this.WTable.$view, e => {\n\t\t\tconst id = this.WTable.locate(e);\n\t\t\tif (!id) return [{ type: \"empty\" }];\n\t\t\telse if (id.header) return;\n\n\t\t\tconst item = this.WTable.getItem(id);\n\t\t\tif (item.value == \"..\") return false;\n\n\t\t\tif (!this.WTable.isSelected(id)) this.WTable.select(id);\n\n\t\t\tlet sel = this.WTable.getSelectedId(true);\n\t\t\tif (sel.length === 1) return [item];\n\t\t\tsel = sel.map(s => this.WTable.getItem(s)).filter(o => o.value != \"..\");\n\t\t\treturn sel;\n\t\t});\n\n\t\t// hide contexts on scroll and drag\n\t\tthis.on(this.WTable, \"onAfterScroll\", () => this.Menu.Hide());\n\t\tthis.on(this.WTable, \"onBeforeDrag\", () => this.Menu.Hide());\n\t}\n\n\t/**\n\t * Moves focus from one panel to the other in Total\n\t */\n\tShiftFocus() {\n\t\tif (this.getParam(\"trackActive\", true)) this.State.isActive = true;\n\t}\n\n\t/**\n\t * Opens a folder or file(s)\n\t * @param {Array} items - selected files and folders\n\t */\n\tActivate(items) {\n\t\tif (!items.length) return; // nothing selected - ignore\n\n\t\tif (items.length === 1) {\n\t\t\tconst item = items[0];\n\t\t\tif (item.type === \"folder\") {\n\t\t\t\tthis.ShowSubFolder(item.value === \"..\" ? item.value : item.id);\n\t\t\t} else {\n\t\t\t\tconst operation =\n\t\t\t\t\titem.type === \"code\" && this.app.config.editor ? \"edit\" : \"open\";\n\t\t\t\tthis.app.callEvent(\"app:action\", [operation, items]);\n\t\t\t}\n\t\t} else {\n\t\t\tconst operation = this.app.config.editor ? \"edit\" : \"open\";\n\t\t\tthis.app.callEvent(\"app:action\", [operation, items]);\n\t\t}\n\t}\n\n\t/**\n\t * Opens a selected directory\n\t * @param {string} id - the ID of the selected folder\n\t */\n\tShowSubFolder(id) {\n\t\tlet path;\n\t\tif (id == \"..\") {\n\t\t\tconst t = this.State.path.split(\"/\");\n\t\t\tpath = \"/\" + t.slice(1, t.length - 1).join(\"/\");\n\t\t} else {\n\t\t\tpath = id;\n\t\t}\n\n\t\tthis.State.path = path;\n\t}\n\n\t/**\n\t *\n\t * @param {Object} hierarchy - folders TreeCollection\n\t * @param {string} path - new opened path\n\t * @param {string} oldPath - old opened path\n\t * @returns {Array} with the previous opened path or an empty array\n\t */\n\tGetPrevLocation(hierarchy, path, oldPath) {\n\t\t// oldPath does not exist if path was changed after a folder renamed\n\t\tif (oldPath === \"/\" || !hierarchy.exists(oldPath)) return [];\n\n\t\tif (path === \"/\") path = \"../files\";\n\t\tlet id;\n\t\twhile (oldPath) {\n\t\t\tid = oldPath;\n\t\t\toldPath = hierarchy.getParentId(oldPath);\n\t\t\tif (oldPath === path) {\n\t\t\t\tconst obj = hierarchy.getItem(id);\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: obj.id,\n\t\t\t\t\t\tvalue: obj.value,\n\t\t\t\t\t\ttype: \"folder\",\n\t\t\t\t\t\tdate: new Date(obj.date),\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\t/**\n\t * Gets the target directory for a moved file or folder\n\t * @param {string} target - the ID of a folder\n\t * @returns {Object} - data object of the target folder\n\t */\n\tGetTargetFolder(target) {\n\t\tconst targetItem = target ? this.WTable.getItem(target) : null;\n\t\tconst invalidTarget =\n\t\t\t!targetItem || targetItem.type !== \"folder\" || targetItem.value === \"..\";\n\t\tconst targetFolder = invalidTarget ? this.State.path : targetItem.id;\n\t\treturn targetFolder;\n\t}\n\n\t/**\n\t * Selects the first item in the newly opened directory\n\t */\n\tSelectActive() {\n\t\tconst table = this.WTable;\n\t\tif (this.State.isActive !== false && !table.getSelectedId()) {\n\t\t\tlet sel = this.State.selectedItem;\n\n\t\t\tfor (let i = 0; i < sel.length; i++) {\n\t\t\t\tif (table.exists(sel[i].id)) table.select(sel[i].id, true);\n\t\t\t}\n\n\t\t\tif (!sel.$noSelect && !table.getSelectedId()) {\n\t\t\t\tconst id = table.getFirstId();\n\t\t\t\tif (id) {\n\t\t\t\t\ttable.select(id);\n\t\t\t\t\tsel.$noSelect = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twebix.delay(() => webix.UIManager.setFocus(table));\n\t\t}\n\t}\n\n\t/**\n\t * Returns currently selected files and directories\n\t * @returns {Array} - an array of file/directory data objects; an empty array if nothing is selected\n\t */\n\tGetSelection() {\n\t\treturn this.WTable.getSelectedId(true).map(file => {\n\t\t\treturn this.WTable.getItem(file);\n\t\t});\n\t}\n\n\t/**\n\t * Loads folders and files inside the opened directory\n\t * @param {string} path - the currently opened directory\n\t * @param {Boolean} search - pass true to signal that the data are loaded in response to a search query\n\t */\n\tLoadData(path, search) {\n\t\tthis._Track = false;\n\t\tconst table = this.WTable;\n\t\tif (search) {\n\t\t\ttable.clearAll();\n\t\t\tthis.app\n\t\t\t\t.getService(\"backend\")\n\t\t\t\t.search(path, search)\n\t\t\t\t.then(data => {\n\t\t\t\t\t// ignore data if search was cancelled quickly\n\t\t\t\t\tif (this.app) {\n\t\t\t\t\t\tfor (let i = 0; i < data.length; ++i)\n\t\t\t\t\t\t\tthis.Local.prepareData(data[i]);\n\n\t\t\t\t\t\ttable.parse(data);\n\n\t\t\t\t\t\tthis.GetSearchStats(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tif (table.data.url !== path) {\n\t\t\t\ttable.clearAll();\n\t\t\t\tthis.Local.files(path).then(data => {\n\t\t\t\t\t// ignore data if either search or mode was changed quickly after path change\n\t\t\t\t\tif (this.app) {\n\t\t\t\t\t\tthis.RenderData(data);\n\t\t\t\t\t\tthis.SelectActive();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis._Track = true;\n\t}\n\n\t/**\n\t * Moves files and folders to a target directory\n\t * @param {Array} source - an array of data objects of files and folders that are being moved\n\t * @param {string} target - the ID of the target directory\n\t * @returns {Boolean} - must always be false to cancel default Webix logic for drag-and-drop\n\t */\n\tMoveFiles(source, target) {\n\t\tthis.app\n\t\t\t.getService(\"operations\")\n\t\t\t.move(source, this.GetTargetFolder(target));\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns a string with a file type icon\n\t * @param {Object} obj - the data object of a file\n\t * @returns {string} with HTML of a file type icon\n\t */\n\tIcon(obj) {\n\t\treturn `<img class=\"webix_fmanager_file-type-icon\" src=\"${this.app\n\t\t\t.getService(\"backend\")\n\t\t\t.icon(obj)}\" />`;\n\t}\n\n\t/**\n\t * Defines the looks of the dragged node for drag-and-drop of files and folders\n\t * @param {Object} ctx - the context object of drag-and-drop Webix logic\n\t */\n\tDragMarker(ctx) {\n\t\tconst list = this.WTable;\n\n\t\t// remove \"..\"\n\t\tconst parent = list.find(f => f.value === \"..\", true);\n\t\tif (parent) {\n\t\t\tconst parentInd = ctx.source.indexOf(parent.id);\n\t\t\tif (parentInd !== -1) ctx.source.splice(parentInd, 1);\n\t\t}\n\n\t\tconst files = ctx.source.length;\n\t\tif (!files) return false;\n\n\t\tif (files === 1) list.select(ctx.source[0]);\n\n\t\tconst firstDragged = list.getItem(ctx.source[0]);\n\t\tlet icon;\n\t\tif (firstDragged.type === \"folder\") {\n\t\t\ticon = folderIcon;\n\t\t} else {\n\t\t\ticon = this.Icon(firstDragged);\n\t\t}\n\n\t\tlet html = \"<div class='webix_fmanager_grid_drag_zone_list'>\";\n\t\thtml += `<div class=\"webix_fmanager_inner_drag_zone_list\">${icon}${firstDragged.value}</div>`;\n\t\thtml += \"</div>\";\n\n\t\tif (files > 1) {\n\t\t\thtml = \"<div class='webix_drag_main'>\" + html + \"</div>\";\n\t\t\thtml += \"<div class='webix_badge'>\" + files + \"</div>\";\n\n\t\t\tlet multiple = \"<div class='webix_drag_multiple'></div>\";\n\t\t\tif (files > 2)\n\t\t\t\tmultiple = \"<div class='webix_drag_multiple_last'></div>\" + multiple;\n\n\t\t\thtml = multiple + html;\n\t\t}\n\n\t\tctx.html = html;\n\t}\n\n\t/**\n\t * Adds hotkeys for operations with directories and files\n\t */\n\tAddHotkeys() {\n\t\tconst ctrlKey = webix.env.isMac ? \"COMMAND\" : \"CTRL\";\n\n\t\tconst operations = [\n\t\t\t{ key: \"DELETE\", oper: \"delete\" },\n\t\t\t{ key: \"BACKSPACE\", oper: \"delete\" },\n\t\t\t{ key: `${ctrlKey}+C`, oper: \"copy\" },\n\t\t\t{ key: `${ctrlKey}+X`, oper: \"cut\" },\n\t\t\t{ key: `${ctrlKey}+V`, oper: \"paste\" },\n\t\t\t{ key: `${ctrlKey}+R`, oper: \"rename\" },\n\t\t\t{ key: `${ctrlKey}+O`, oper: \"open\" },\n\t\t\t{ key: `${ctrlKey}+D`, oper: \"download\" },\n\t\t\t{ key: `${ctrlKey}+Alt+O`, oper: \"locate\" },\n\t\t];\n\n\t\tif (this.app.config.editor) {\n\t\t\toperations.push({ key: `${ctrlKey}+E`, oper: \"edit\" });\n\t\t}\n\n\t\tfor (let i = 0; i < operations.length; ++i) {\n\t\t\tthis.on(hotkey(this.getRoot()), operations[i].key, (v, e) => {\n\t\t\t\tconst params = [operations[i].oper];\n\t\t\t\tthis.app.callEvent(\"app:action\", params);\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.on(hotkey(this.getRoot()), `${ctrlKey}+A`, (v, e) => {\n\t\t\tthis.WTable.selectAll();\n\t\t\twebix.html.preventEvent(e);\n\t\t});\n\t}\n\n\t/**\n\t * Counts found folders and files\n\t * @param {Array} data - all directories and files that match a search query\n\t */\n\tGetSearchStats(data) {\n\t\tconst all = data.length;\n\t\tconst folders = data.filter(i => i.type === \"folder\");\n\t\tthis.State.searchStats = {\n\t\t\tfolders: folders ? folders.length : 0,\n\t\t\tfiles: all - folders.length,\n\t\t};\n\t}\n\n\t/**\n\t * Handles clicks on empty spaces in list or cards\n\t * If click happened in Total in the inactive half, this method will shift focus to this part\n\t */\n\tEmptyClick() {\n\t\tif (this.State.isActive !== false) this.WTable.unselectAll();\n\t\telse this.ShiftFocus();\n\t}\n}\n","import DataViewBase from \"views/sections/dataview\";\nimport { menuIcon, folderCardIcon } from \"../helpers/icons\";\n\nexport default class CardsView extends DataViewBase {\n\tconfig() {\n\t\tconst compact = this.getParam(\"compact\", true);\n\n\t\tconst smallSkin =\n\t\t\twebix.skin.$name === \"mini\" || webix.skin.$name === \"compact\";\n\t\tconst itemSize = smallSkin\n\t\t\t? {\n\t\t\t\t\theight: 149,\n\t\t\t\t\twidth: 181,\n\t\t\t\t\tpadding: 16,\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\theight: 197,\n\t\t\t\t\twidth: 236,\n\t\t\t\t\tpadding: 20,\n\t\t\t  };\n\n\t\treturn {\n\t\t\tview: \"dataview\",\n\t\t\tlocalId: \"cards\",\n\t\t\tdrag: !compact,\n\t\t\tselect: true,\n\t\t\tmultiselect: true,\n\t\t\tcss: \"webix_noselect webix_fmanager_cards\",\n\t\t\ttemplate: obj => this.CardTemplate(obj),\n\t\t\ttype: {\n\t\t\t\t...itemSize,\n\t\t\t\ttype: \"tiles\",\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonItemDblClick: () => this.Activate(this.GetSelection()),\n\t\t\t\tonEnter: () => this.Activate(this.GetSelection()),\n\t\t\t\tonBeforeDrag: ctx => this.DragMarker(ctx),\n\t\t\t\tonBeforeDrop: ctx => this.MoveFiles(ctx.source, ctx.target),\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_fmanager_menu_icon: e => {\n\t\t\t\t\tthis.Menu.Show(e);\n\t\t\t\t},\n\t\t\t\twebix_dataview: (e, id) => {\n\t\t\t\t\tif (!id) this.EmptyClick();\n\t\t\t\t},\n\t\t\t},\n\t\t\tonContext: {\n\t\t\t\twebix_dataview: (e, id) => {\n\t\t\t\t\tif (!id) this.EmptyClick();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\tinit() {\n\t\tthis.WTable = this.$$(\"cards\");\n\t\tsuper.init();\n\t}\n\tRenderData(data) {\n\t\tthis.WTable.sync(data, () => this.WTable.filter(f => f.value !== \"..\"));\n\t}\n\tCardTemplate(obj) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tlet preview, panel;\n\t\tif (obj.type === \"folder\") {\n\t\t\tpreview = `<div class=\"webix_fmanager_card_preview\">${folderCardIcon}</div>`;\n\n\t\t\tpanel = `<div class=\"webix_fmanager_card_panel\">\n\t\t<span class=\"webix_fmanager_card_label\">${_(\"Folder\")}</span>\n\t\t<span class=\"webix_fmanager_card_name folder\">${this.SearchTemplate(\n\t\t\tobj.value\n\t\t)}</span>${menuIcon}\n\t\t</div>`;\n\t\t} else {\n\t\t\tconst skin = webix.skin.$active;\n\t\t\tconst picSize = skin.listItemHeight < 29 ? [163, 92] : [214, 124];\n\n\t\t\tconst origin = this.app\n\t\t\t\t.getService(\"backend\")\n\t\t\t\t.previewURL(obj, picSize[0], picSize[1]);\n\t\t\tconst img = `<img height=\"${picSize[1]}\" width=\"${\n\t\t\t\tpicSize[0]\n\t\t\t}\" src=\"${origin}\" onerror='this.style.display=\"none\"'/>`;\n\n\t\t\tpreview = `<div class=\"webix_fmanager_card_preview file\">${img}</div>`;\n\n\t\t\tconst fileIcon = this.Icon(obj);\n\n\t\t\tpanel = `<div class=\"webix_fmanager_card_panel file\">\n\t\t<span class=\"webix_fmanager_card_name\">${fileIcon}<span class=\"file_name_text\">${this.SearchTemplate(\n\t\t\t\tobj.value\n\t\t\t)}</span></span>${menuIcon}\n\t\t</div>`;\n\t\t}\n\n\t\treturn preview + panel;\n\t}\n\n\tSearchTemplate(name) {\n\t\tif (this.State.search) {\n\t\t\tconst rex = new RegExp(\"(\" + this.State.search + \")\", \"gi\");\n\t\t\treturn name.replace(\n\t\t\t\trex,\n\t\t\t\t\"<span class='webix_fmanager_search_mark'>$1</span>\"\n\t\t\t);\n\t\t}\n\n\t\treturn name;\n\t}\n}\n","export function fileNameSelectMask(input) {\n\tconst extIndex = input.value.lastIndexOf(\".\");\n\tif (extIndex > -1) input.setSelectionRange(0, extIndex);\n\telse input.select();\n}\n\nexport function iterateAsync(arr, code, ctx) {\n\tctx = ctx || { i: 0, cancel: false };\n\n\tif (ctx.i >= arr.length) return;\n\n\treturn code(arr[ctx.i], ctx.i).then(() => {\n\t\tctx.i += 1;\n\t\tif (!ctx.cancel) return iterateAsync(arr, code, ctx);\n\t});\n}\n\nexport function formatTemplate(size) {\n\tif (size >= 1000000000) return (size / 1000000000).toFixed(1) + \" Gb\";\n\tif (size >= 1000000) return (size / 1000000).toFixed(1) + \" Mb\";\n\tif (size >= 1000) return (size / 1000).toFixed(1) + \" kb\";\n\n\treturn size + \" b\";\n}\n\nexport function ext(path) {\n\tif (!path) return \"\";\n\tconst parts = path.split(\".\");\n\tif (parts.length < 2) return \"\";\n\treturn parts[parts.length - 1];\n}\n\nexport function getLastSelected(files) {\n\treturn files.length\n\t\t? files[files.length - 1]\n\t\t: { type: \"empty\", value: \"Nothing is selected\" };\n}\n\nexport function safeName(str) {\n\tstr = str.replace(/[/\\\\:*?\"<>|]/g, \"\").trim();\n\twhile (str[0] === \".\") str = str.substr(1).trim();\n\n\treturn str;\n}\n\nexport function capitalize(str) {\n\tif (!str) return \"\";\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n","webix.protoUI({\r\n\tname: \"codemirror-editor\",\r\n\tdefaults: {\r\n\t\tmode: \"javascript\",\r\n\t\tlineNumbers: true,\r\n\t\tmatchBrackets: true,\r\n\t\ttheme: \"default\"\r\n\t},\r\n\t$init: function (config) {\r\n\t\tthis.$view.innerHTML = \"<textarea style='width:100%;height:100%;'></textarea>\";\r\n\t\tthis._textarea = this.$view.firstChild;\r\n\t\tthis._waitEditor = webix.promise.defer();\r\n\t\tthis.$ready.push(this._render_cm_editor);\r\n\t},\r\n\tcomplex_types: {\r\n\t\tphp: {\r\n\t\t\tmode: [\"xml\", \"javascript\", \"css\", \"htmlmixed\", \"clike\"]\r\n\t\t},\r\n\t\thtmlembedded: {\r\n\t\t\tmode: [\"xml\", \"javascript\", \"css\", \"htmlmixed\"],\r\n\t\t\taddon: [\"mode/multiplex\"]\r\n\t\t},\r\n\t\thtmlmixed: {\r\n\t\t\tmode: [\"xml\", \"javascript\", \"css\"]\r\n\t\t},\r\n\t\tdockerfile: {\r\n\t\t\taddon: [\"mode/simple\"]\r\n\t\t}\r\n\t},\r\n\t_render_cm_editor: function () {\r\n\r\n\t\tif (this.config.cdn === false) {\r\n\t\t\tthis._render_when_ready;\r\n\t\t\treturn;\r\n\t\t};\r\n\r\n\t\tvar cdn = this.config.cdn || \"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/\";\r\n\t\t// basic\r\n\t\tvar sources = [\r\n\t\t\tcdn + \"/codemirror.css\",\r\n\t\t\tcdn + \"/codemirror.js\"\r\n\t\t];\r\n\r\n\t\t// mode\r\n\t\tvar mode = this.config.mode ? this.config.mode : \"javascript\";\r\n\t\t// complex modes based on others: htmlmixed, htmlembedded, php\r\n\t\tvar extras = this.complex_types[mode];\r\n\t\tif (extras) {\r\n\t\t\tif (extras[\"mode\"]) {\r\n\t\t\t\textras[\"mode\"].forEach(function (name) {\r\n\t\t\t\t\tvar path = \"/mode/\" + name + \"/\" + name + \".js\";\r\n\t\t\t\t\tsources.push(cdn + path);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tif (extras[\"addon\"]) {\r\n\t\t\t\textras[\"addon\"].forEach(function (name) {\r\n\t\t\t\t\tvar path = \"/addon/\" + name + \".js\";\r\n\t\t\t\t\tsources.push(cdn + path);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t};\r\n\t\tsources.push(cdn + \"/mode/\" + mode + \"/\" + mode + \".js\");\r\n\r\n\t\t// theme\r\n\t\tif (this.config.theme && this.config.theme !== \"default\") {\r\n\t\t\tsources.push(cdn + \"/theme/\" + this.config.theme + \".css\")\r\n\t\t};\r\n\r\n\t\t// matchbrackets add-on\r\n\t\tif (this.config.matchBrackets) {\r\n\t\t\tsources.push(cdn + \"/addon/edit/matchbrackets.js\")\r\n\t\t};\r\n\r\n\t\twebix.require(sources)\r\n\t\t\t.then(webix.bind(this._render_when_ready, this))\r\n\t\t\t.catch(function (e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t});\r\n\t},\r\n\t_render_when_ready: function () {\r\n\t\tthis._editor = CodeMirror.fromTextArea(this._textarea, {\r\n\t\t\tmode: this.config.mode,\r\n\t\t\tlineNumbers: this.config.lineNumbers,\r\n\t\t\tmatchBrackets: this.config.matchBrackets,\r\n\t\t\ttheme: this.config.theme\r\n\t\t});\r\n\r\n\t\tthis._waitEditor.resolve(this._editor);\r\n\r\n\t\tthis.setValue(this.config.value);\r\n\t\tif (this._focus_await)\r\n\t\t\tthis.focus();\r\n\t},\r\n\t_set_inner_size: function () {\r\n\t\tif (!this._editor || !this.$width) return;\r\n\r\n\t\tthis._updateScrollSize();\r\n\t\tthis._editor.scrollTo(0, 0); //force repaint, mandatory for IE\r\n\t},\r\n\t_updateScrollSize: function () {\r\n\t\tvar box = this._editor.getWrapperElement();\r\n\t\tvar height = (this.$height || 0) + \"px\";\r\n\r\n\t\tbox.style.height = height;\r\n\t\tbox.style.width = (this.$width || 0) + \"px\";\r\n\r\n\t\tvar scroll = this._editor.getScrollerElement();\r\n\t\tif (scroll.style.height != height) {\r\n\t\t\tscroll.style.height = height;\r\n\t\t\tthis._editor.refresh();\r\n\t\t}\r\n\t},\r\n\t$setSize: function (x, y) {\r\n\t\tif (webix.ui.view.prototype.$setSize.call(this, x, y)) {\r\n\t\t\tthis._set_inner_size();\r\n\t\t}\r\n\t},\r\n\tsetValue: function (value) {\r\n\t\tif (!value && value !== 0)\r\n\t\t\tvalue = \"\";\r\n\r\n\t\tthis.config.value = value;\r\n\t\tif (this._editor) {\r\n\t\t\tthis._editor.setValue(value);\r\n\t\t\t//by default - clear editor's undo history when setting new value\r\n\t\t\tif (!this.config.preserveUndoHistory)\r\n\t\t\t\tthis._editor.clearHistory();\r\n\t\t\tthis._updateScrollSize();\r\n\t\t}\r\n\t},\r\n\tgetValue: function () {\r\n\t\treturn this._editor ? this._editor.getValue() : this.config.value;\r\n\t},\r\n\tfocus: function () {\r\n\t\tthis._focus_await = true;\r\n\t\tif (this._editor)\r\n\t\t\tthis._editor.focus();\r\n\t},\r\n\tgetEditor: function (waitEditor) {\r\n\t\treturn waitEditor ? this._waitEditor : this._editor;\r\n\t},\r\n\t//undo, redo, etc\r\n\tundo: function () {\r\n\t\tthis._editor.undo();\r\n\t},\r\n\tredo: function () {\r\n\t\tthis._editor.redo();\r\n\t},\r\n\tundoLength: function () {\r\n\t\treturn this._editor.historySize().undo;\r\n\t}\r\n}, webix.ui.view);","import \"@wbx/view-codemirror-editor\";\n\nimport { JetView } from \"webix-jet\";\nimport { iterateAsync } from \"helpers/common\";\nimport hotkey from \"jet-hotkey\";\n\nconst typeHash = {\n\tcss: [\"css\", \"less\"],\n\tgo: [\"go\"],\n\thtmlmixed: [\"html\", \"xml\", \"svg\"],\n\tjavascript: [\"js\", \"mjs\", \"json\", \"ts\", \"coffee\"],\n\tmarkdown: [\"md\"],\n\tphp: [\"php\", \"phtml\", \"php3\", \"php4\", \"php5\", \"php7\", \"php-s\", \"pht\", \"phar\"],\n\tpython: [\"py\", \"pyc\", \"pyd\", \"pyo\", \"pyw\", \"pyz\"],\n\tsql: [\"sql\", \"sqlite3\", \"sqlite\", \"db\"],\n\tyaml: [\"yaml\", \"yml\"],\n\tshell: [\"sh\"],\n};\n\nexport default class EditorView extends JetView {\n\tconfig() {\n\t\tthis._ = this.app.getService(\"locale\")._;\n\t\tthis.Files = this.getParam(\"files\");\n\n\t\tconst tabbar = {\n\t\t\tview: \"tabbar\",\n\t\t\tlocalId: \"tabbar\",\n\t\t\tcss: \"webix_fmanager_editor_tabs\",\n\t\t\tborderless: true,\n\t\t\ttabMinWidth: 170,\n\t\t\tmoreTemplate:\n\t\t\t\t\"<span class='webix_icon webix_tabbar_more fmi-format-list-bulleted'></span>\",\n\t\t\ttooltip: obj => obj.id,\n\t\t\toptions: [],\n\t\t\ton: {\n\t\t\t\tonChange: id => this.OpenDoc(id),\n\t\t\t\tonBeforeTabClick: (id, e) => this.TabAction(id, e),\n\t\t\t},\n\t\t\ttabbarPopup: {\n\t\t\t\tcss: \"webix_fmanager_editor_popup\",\n\t\t\t},\n\t\t};\n\n\t\tconst skin = webix.skin.$active;\n\t\tconst toolbar = {\n\t\t\tview: \"toolbar\",\n\t\t\tcss: \"webix_fmanager_editor_bar\",\n\t\t\tpadding: { left: 4, right: 4, top: 0, bottom: 0 },\n\t\t\theight: skin.toolbarHeight + !(skin.toolbarHeight % 2),\n\t\t\tcols: webix.env.mobile ? this.GetMobileControls() : [tabbar],\n\t\t};\n\n\t\tif (webix.env.mobile) {\n\t\t\ttoolbar.cols.push(this.GetCloseAll(true));\n\t\t} else {\n\t\t\ttoolbar.cols.push({ width: 12 }, this.GetCloseAll());\n\t\t}\n\n\t\tconst dark = webix.skin.$name == \"contrast\" || webix.skin.$name === \"dark\";\n\t\treturn {\n\t\t\ttype: \"wide\",\n\t\t\trows: [\n\t\t\t\ttoolbar,\n\t\t\t\t{\n\t\t\t\t\tview: \"codemirror-editor\",\n\t\t\t\t\tlocalId: \"editor\",\n\t\t\t\t\ttheme: dark ? \"monokai\" : \"default\",\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\t/**\n\t * Returns the Save button and file name label (in FM used for editor on touch devices)\n\t * @returns {Array} - of objects with control configuration\n\t */\n\tGetMobileControls() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tview: \"button\",\n\t\t\t\tlocalId: \"saveBtn\",\n\t\t\t\ttype: \"icon\",\n\t\t\t\tlabel: this._(\"Save\"),\n\t\t\t\ticon: \"wxi-check\",\n\t\t\t\tcss: \"webix_primary webix_fmanager_editor_save\",\n\t\t\t\twidth: 90,\n\t\t\t\tclick: () => this.Save(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"label\",\n\t\t\t\tlabel: \" \",\n\t\t\t\tlocalId: \"name\",\n\t\t\t\tcss: \"webix_fmanager_editor_name\",\n\t\t\t},\n\t\t];\n\t}\n\n\t/**\n\t *\n\t * @param {Boolean} mobile - true - returns the icon for mobile devices; false - desktop\n\t * @returns {Object} with icon widget configuration\n\t */\n\tGetCloseAll(mobile) {\n\t\treturn {\n\t\t\tview: \"icon\",\n\t\t\ticon: mobile ? \"wxi-close\" : \"fmi-exit-to-app\",\n\t\t\tclick: () => this.ConfirmAll(),\n\t\t\ttooltip: this._(\"Close the editor\") + \" (Esc)\",\n\t\t};\n\t}\n\n\tinit() {\n\t\tconst editor = this.$$(\"editor\");\n\t\twebix.extend(editor, webix.ProgressBar);\n\t\teditor.showProgress({\n\t\t\ttype: \"top\",\n\t\t});\n\n\t\tif (webix.env.mobile) {\n\t\t\tconst file = this.Files[0];\n\t\t\tthis.$$(\"name\").setValue(this.GetFileLabel(file));\n\t\t}\n\n\t\tthis._oldValue = {};\n\t\tthis._changed = {};\n\t\tthis._buffers = {}; // codemirror buffers\n\n\t\teditor.getEditor(true).then(editorObj => {\n\t\t\titerateAsync(this.Files, file => {\n\t\t\t\treturn this.app\n\t\t\t\t\t.getService(\"operations\")\n\t\t\t\t\t.read(file.id)\n\t\t\t\t\t.then(text => this.AddDoc(file, text));\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (!webix.env.mobile) {\n\t\t\t\t\t\tconst tabbar = this.$$(\"tabbar\");\n\t\t\t\t\t\tfor (let i = 0; i < this.Files.length; ++i) {\n\t\t\t\t\t\t\tthis.AddTab(tabbar, this.Files[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttabbar.setValue(tabbar.config.options[0].id);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.OpenDoc(this.Files[0].id);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\teditor.hideProgress();\n\t\t\t\t});\n\n\t\t\tthis.HandleChanges(editorObj);\n\t\t});\n\n\t\t// editor hotkeys for saving\n\t\tconst ctrlKey = webix.env.isMac ? \"COMMAND\" : \"CTRL\";\n\t\tthis.on(hotkey(), `${ctrlKey} + S`, (v, e) => {\n\t\t\tthis.Save();\n\t\t\twebix.html.preventEvent(e);\n\t\t});\n\t\tthis.on(hotkey(), `${ctrlKey} + Shift + S`, () => this.SaveAll());\n\t\tthis.on(hotkey(), \"ESC\", () => this.ConfirmAll());\n\t}\n\n\t/**\n\t * Adds a handler for changes in the editor (checks for changes comparing to the original text and updates the 'light bulb')\n\t * @param {Object} editor - CodeMirror.Editor instance\n\t */\n\tHandleChanges(editor) {\n\t\teditor.on(\"changes\", () => {\n\t\t\tthis.TextChanged(this.GetActiveFile());\n\t\t});\n\t}\n\n\t/**\n\t * Saves a file contents to the buffer\n\t * @param {Object} file - the file data object\n\t * @param {string} text - the contents of the file\n\t */\n\tAddDoc(file, text) {\n\t\tthis._oldValue[file.id] = text;\n\t\tthis._buffers[file.id] = CodeMirror.Doc(text, this.GetFileType(file));\n\t}\n\n\t/**\n\t * Prepares a label with file name for tabs\n\t * @param {Object} file - a file data object\n\t * @param {Boolean} short - (optional) if true, only the file name (without directory) will be returned; if not passed/false, the full path to the file will be returned\n\t * @returns {string}\n\t */\n\tGetFileLabel(file, short) {\n\t\treturn `<div class=\"filename\">${this.ClipName(\n\t\t\tshort ? file.value : file.id\n\t\t)}</div><span class=\"extension\">.${file.$ext}</span>`;\n\t}\n\n\t/**\n\t * Cuts off the file extension from its name/ID\n\t * @param {string} path - the file ID or name\n\t * @returns {string}\n\t */\n\tClipName(path) {\n\t\tif (!path) return \"\";\n\t\tconst parts = path.split(\".\");\n\t\treturn parts.slice(0, parts.length - 1).join(\".\");\n\t}\n\n\t/**\n\t * Adds a tab to tabbar for each loaded file if there are several of them\n\t * @param {Object} tabbar - this.$$(\"tabbar\")\n\t * @param {Object} file - a file data object\n\t */\n\tAddTab(tabbar, file) {\n\t\tconst icon = `<span class=\"webix_fmanager_tab_action webix_icon wxi-close\" webix_tooltip=\"${this._(\n\t\t\t\"Close this file\"\n\t\t)}\"></span>`;\n\t\tconst tabContent = `<div class=\"tab_content\">${this.GetFileLabel(\n\t\t\tfile,\n\t\t\ttrue\n\t\t)}${icon}</div>`;\n\n\t\tconst width =\n\t\t\twebix.html.getTextSize(file.value, \"webix_item_tab\").width + 90;\n\t\ttabbar.addOption({\n\t\t\tid: file.id,\n\t\t\tvalue: tabContent,\n\t\t\tcss: \"webix_fmanager_editor_tab\",\n\t\t\twidth: width > 250 ? 250 : width,\n\t\t});\n\t}\n\n\t/**\n\t * Opens a file in the editor, the previous file stays in the buffer (in multi mode)\n\t * @param {string} name - the file ID (the full path to the file, here serves as the key)\n\t */\n\tOpenDoc(name) {\n\t\tthis.$$(\"editor\")\n\t\t\t.getEditor(true)\n\t\t\t.then(editor => {\n\t\t\t\teditor.swapDoc(this._buffers[name]);\n\t\t\t\teditor.focus();\n\t\t\t});\n\t}\n\n\t/**\n\t * Closes the editor and returns to main FM view\n\t */\n\tBack() {\n\t\tthis.show(\"/top\", { params: { state: this.getParam(\"state\") } });\n\t}\n\n\t/**\n\t * Opens a confirmation dialogue if the user decides to close the editor, but there are unsaved changes\n\t * Closes the editor, if the user doesn't mind loosing changes or there are no unsaved changes\n\t */\n\tConfirmAll() {\n\t\tif (this.CheckChanges())\n\t\t\twebix\n\t\t\t\t.confirm({\n\t\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\t\ttext: this._(\"Are you sure you want to exit without saving?\"),\n\t\t\t\t})\n\t\t\t\t.then(() => this.Back());\n\t\telse this.Back();\n\t}\n\n\t/**\n\t * Handles clicks on tab icons\n\t * @param {string} id - the ID of a text file\n\t * @param {MouseEvent} e - the browser click event\n\t * @returns {Boolean} - the return value is used by inner Webix logic, see comments below\n\t */\n\tTabAction(id, e) {\n\t\t// clicks on the More popup will not send the native event object + we need to just select the tab there anyway\n\t\tif (e) {\n\t\t\tconst classes = e.target.className;\n\t\t\tconst actionIcon =\n\t\t\t\tclasses.indexOf(\"webix_icon\") !== -1 &&\n\t\t\t\tid == this.$$(\"tabbar\").getValue();\n\n\t\t\tif (actionIcon) {\n\t\t\t\tif (classes.indexOf(\"close\") !== -1) {\n\t\t\t\t\tthis.CloseTab(id);\n\t\t\t\t} else if (classes.indexOf(\"circle\") !== -1) {\n\t\t\t\t\tthis.ConfirmOne(id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn !actionIcon; // must return false if the action is to be executed;\n\t\t\t// otherwise Webix tabbar selection will happen and will ruin the work of logic behind tab option removal\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Opens a confirmation dialogue if the user decides to close the currently active tab\n\t * Will close the file anyway, but if the user clicks OK will save the file before that\n\t * @param {string} id - the file ID\n\t */\n\tConfirmOne(id) {\n\t\twebix\n\t\t\t.confirm({\n\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\ttext: this._(\"Save before closing?\"),\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.Save(id).then(() => this.CloseTab(id));\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tthis.CloseTab(id);\n\t\t\t});\n\t}\n\n\t/**\n\t * Checks if there are unsaved changes\n\t * @returns {Boolean}\n\t */\n\tCheckChanges() {\n\t\tfor (let f in this._changed) {\n\t\t\tif (this._changed[f]) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Saves all unsaved changes\n\t * Note that the function inside iterateAsync must return a promise\n\t */\n\tSaveAll() {\n\t\tconst files = this.Files.filter(f => this._changed[f.id]);\n\t\tif (files.length) {\n\t\t\titerateAsync(files, file => {\n\t\t\t\treturn this.WriteFileContent(file.id);\n\t\t\t}).then(() => {\n\t\t\t\tthis.ChangeTextState(false);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Saves the file in the currently active tab (multi mode) or the only file in single mode\n\t * @param {string} id - the file ID\n\t * @returns {Promise}\n\t */\n\tSave(id) {\n\t\tif (!id) id = this.GetActiveFile();\n\t\tif (this._changed[id]) {\n\t\t\treturn this.WriteFileContent(id).then(() => {\n\t\t\t\tthis.ChangeTextState(false, id);\n\t\t\t});\n\t\t}\n\t\treturn webix.promise.resolve();\n\t}\n\n\t/**\n\t * Saves changes of 1 file\n\t * @param {string} id - the file ID\n\t * @returns {Promise} that resolves with a file data object\n\t */\n\tWriteFileContent(id) {\n\t\tconst content = this._buffers[id].getValue();\n\t\treturn this.app\n\t\t\t.getService(\"operations\")\n\t\t\t.write(id, content)\n\t\t\t.then(() => {\n\t\t\t\tthis._oldValue[id] = content;\n\t\t\t});\n\t}\n\n\t/**\n\t * Gets the ID of the currently active file\n\t * @returns {string} - the file ID\n\t */\n\tGetActiveFile() {\n\t\treturn webix.env.mobile ? this.Files[0].id : this.$$(\"tabbar\").getValue();\n\t}\n\n\t/**\n\t * Returns the file type of the given file\n\t * @param {Object} file - a file data object\n\t * @returns {string} - the file type accepted by CodeMirror\n\t */\n\tGetFileType(file) {\n\t\tif (file.value === \"Dockerfile\") return \"dockerfile\";\n\n\t\tif (file.$ext) {\n\t\t\tfor (var type in typeHash) {\n\t\t\t\tif (typeHash[type].indexOf(file.$ext) !== -1) {\n\t\t\t\t\treturn type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn \"htmlmixed\"; // the most versatile mode\n\t}\n\n\t/**\n\t * Checks if the file text was changed by the latest edit (comparing with the latest save)\n\t * and then turns on/off the 'light bulbs' on the Save button and on file tabs\n\t * @param {string} file - a file ID\n\t */\n\tTextChanged(file) {\n\t\tconst isEqual = this._buffers[file] == this._oldValue[file];\n\t\t// if current state does not correspond to _changed flag\n\t\tthis.ChangeTextState(!isEqual, file);\n\t}\n\n\t/**\n\t * Turns on/off the 'light bulbs' on file tabs or Save button\n\t * @param {Boolean} state - true if changed, false if unchanged\n\t * @param {string} file - (optional) a file ID; if not passed, all files are marked as unchanged/saved\n\t */\n\tChangeTextState(state, file) {\n\t\tif (file && state === !!this._changed[file]) return;\n\n\t\tif (file) this._changed[file] = state;\n\t\telse this._changed = {};\n\n\t\tif (webix.env.mobile) {\n\t\t\tthis.ChangeButtonState(state);\n\t\t} else {\n\t\t\tthis.ChangeTabsState(state, file);\n\t\t}\n\t}\n\n\t/**\n\t * Turns on/off the 'light bulbs' on the Save button\n\t * @param {Boolean} state - true if changed, false if unchanged\n\t */\n\tChangeButtonState(state) {\n\t\tconst button = this.$$(\"saveBtn\");\n\t\tbutton.config.icon = state ? \"webix_fmanager_icon fmi-circle\" : \"wxi-check\";\n\t\tbutton.refresh();\n\t}\n\n\t/**\n\t * Turns on/off the 'light bulbs' on file tabs\n\t * @param {Boolean} state - true if changed, false if unchanged\n\t * @param {string} file - (optional) a file ID; if not passed, all files are marked as unchanged/saved\n\t */\n\tChangeTabsState(state, file) {\n\t\tconst tabbar = this.$$(\"tabbar\");\n\t\tif (file) {\n\t\t\tlet tab = tabbar.getOption(file);\n\t\t\tthis.ChangeTabState(tab, state);\n\t\t} else {\n\t\t\tconst tabs = tabbar.config.options;\n\t\t\tfor (let i = 0; i < tabs.length; ++i) {\n\t\t\t\tthis.ChangeTabState(tabs[i], state);\n\t\t\t}\n\t\t}\n\t\ttabbar.refresh();\n\t}\n\n\t/**\n\t * Turns on/off a 'light bulb' on 1 tab\n\t * @param {Object} tab - a configuration object of a tab\n\t * @param {Boolean} state - on/off (file changed/unchanged)\n\t */\n\tChangeTabState(tab, state) {\n\t\ttab.value = tab.value.replace(\n\t\t\tstate ? \"wxi-close\" : \"webix_fmanager_icon fmi-circle\",\n\t\t\tstate ? \"webix_fmanager_icon fmi-circle\" : \"wxi-close\"\n\t\t);\n\t}\n\n\t/**\n\t * Closes a tab with file and removes it from the buffer\n\t * Webix logic ensures that the next visible tab is selected\n\t * If this is the last tab, the editor closes\n\t * @param {string} id - the file ID\n\t */\n\tCloseTab(id) {\n\t\tconst tabbar = this.$$(\"tabbar\");\n\t\ttabbar.removeOption(id);\n\n\t\tif (!tabbar.getValue()) {\n\t\t\treturn this.Back();\n\t\t}\n\n\t\tdelete this._buffers[id];\n\t\tdelete this._changed[id];\n\t\tdelete this._oldValue[id];\n\t}\n}\n","import { safeName } from \"helpers/common\";\n\nexport function prompt(config, app) {\n\tconst result = new webix.promise.defer();\n\n\twebix\n\t\t.ui(\n\t\t\tapp.getService(\"jet-win\").updateConfig({\n\t\t\t\tview: \"window\",\n\t\t\t\tcss: \"webix_fmanager_prompt\",\n\t\t\t\thead: {\n\t\t\t\t\tview: \"toolbar\",\n\t\t\t\t\tpadding: { left: 12, right: 4 },\n\t\t\t\t\tborderless: true,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ view: \"label\", label: config.text },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"icon\",\n\t\t\t\t\t\t\ticon: \"wxi-close\",\n\t\t\t\t\t\t\thotkey: \"esc\",\n\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\tresult.reject(\"prompt cancelled\");\n\t\t\t\t\t\t\t\tthis.getTopParentView().close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"form\",\n\t\t\t\t\tpadding: { top: 0, left: 12, right: 12, bottom: 12 },\n\t\t\t\t\trows: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 10,\n\t\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\t\t\t\tvalue: config.value,\n\t\t\t\t\t\t\t\t\tmaxWidth: 230,\n\t\t\t\t\t\t\t\t\tvalidate: safeName,\n\t\t\t\t\t\t\t\t\tcss: \"webix_fmanager_prompt_input\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\t\t\t\tvalue: config.button,\n\t\t\t\t\t\t\t\t\tcss: \"webix_primary\",\n\t\t\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\t\t\thotkey: \"enter\",\n\t\t\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\t\t\tconst popup = this.getTopParentView();\n\t\t\t\t\t\t\t\t\t\tconst form = popup.getBody();\n\n\t\t\t\t\t\t\t\t\t\tif (form.validate()) {\n\t\t\t\t\t\t\t\t\t\t\tconst newname = form.getValues().name;\n\t\t\t\t\t\t\t\t\t\t\tresult.resolve(newname);\n\t\t\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\twebix.UIManager.setFocus(form);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tonShow() {\n\t\t\t\t\t\tconst input = this.getBody().elements.name.getInputNode();\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\tif (config.selectMask) config.selectMask(input);\n\t\t\t\t\t\telse input.select();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t})\n\t\t)\n\t\t.show();\n\n\treturn result;\n}\n","import { JetView } from \"webix-jet\";\nimport { prompt } from \"../../helpers/prompt\";\nimport { fileNameSelectMask, safeName } from \"../../helpers/common\";\n\nexport default class AddNewMenuView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\twidth: 198,\n\t\t\tbody: {\n\t\t\t\tview: \"menu\",\n\t\t\t\tautoheight: true,\n\t\t\t\tlayout: \"y\",\n\t\t\t\tcss: \"webix_fmanager_add_new_menu\",\n\t\t\t\tdata: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"makefile\",\n\t\t\t\t\t\tvalue: _(\"Add new file\"),\n\t\t\t\t\t\ticon: \"webix_fmanager_icon fmi-file-plus-outline\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"makedir\",\n\t\t\t\t\t\tvalue: _(\"Add new folder\"),\n\t\t\t\t\t\ticon: \"webix_fmanager_icon fmi-folder-plus-outline\",\n\t\t\t\t\t},\n\t\t\t\t\t{ $template: \"Separator\" },\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"upload\",\n\t\t\t\t\t\tvalue: _(\"Upload file\"),\n\t\t\t\t\t\ticon: \"webix_fmanager_icon fmi-file-upload-outline\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"uploaddir\",\n\t\t\t\t\t\tvalue: _(\"Upload folder\"),\n\t\t\t\t\t\ticon: \"webix_fmanager_icon fmi-folder-upload-outline\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ton: {\n\t\t\t\t\tonMenuItemClick: id => this.StartAction(id),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\tShow(target) {\n\t\tthis.getRoot().show(target, { x: 20 });\n\t}\n\n\tStartAction(id) {\n\t\tif (id === \"makefile\" || id === \"makedir\") {\n\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\tprompt(\n\t\t\t\t{\n\t\t\t\t\ttext: _(\"Enter a new name\"),\n\t\t\t\t\tbutton: _(\"Add\"),\n\t\t\t\t\tselectMask: fileNameSelectMask,\n\t\t\t\t\tvalue: \"New \" + (id === \"makefile\" ? \"file.txt\" : \"folder\"),\n\t\t\t\t},\n\t\t\t\tthis.app\n\t\t\t).then(name => {\n\t\t\t\tthis.app.callEvent(\"app:action\", [id, safeName(name)]);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.app.callEvent(\"app:action\", [id]);\n\t\t}\n\t\tthis.getRoot().hide();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport AddNewMenuView from \"./menus/addnewmenu\";\nimport ContextMenuView from \"./menus/contextmenu\";\n\nimport { formatTemplate } from \"../helpers/common\";\n\nexport default class FoldersView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst button = {\n\t\t\tview: \"button\",\n\t\t\tvalue: _(\"Add New\"),\n\t\t\tinputWidth: 210,\n\t\t\tcss: \"webix_primary\",\n\t\t\talign: \"center\",\n\t\t\tclick: function() {\n\t\t\t\tthis.$scope.Menu.Show(this.$view);\n\t\t\t},\n\t\t};\n\n\t\tconst navbar = {\n\t\t\tview: \"tree\",\n\t\t\tlocalId: \"tree\",\n\t\t\tcss: \"webix_fmanager_tree\",\n\t\t\tselect: true,\n\t\t\tdrag: \"target\",\n\t\t\ttype: {\n\t\t\t\ttemplate: (o, common) => {\n\t\t\t\t\treturn `${common.icon(o)}${common.folder(o)} <span>${\n\t\t\t\t\t\to.$level === 1 ? _(o.value) : o.value\n\t\t\t\t\t}</span>`;\n\t\t\t\t},\n\t\t\t\tfolder: o => `<div class='webix_icon wxi-${o.icon || \"folder\"}'></div>`,\n\t\t\t},\n\t\t\tborderless: true,\n\t\t\ton: {\n\t\t\t\tonBeforeDrop: ctx => this.MoveFiles(ctx.source, ctx.target),\n\t\t\t\tonBeforeContextMenu: id => {\n\t\t\t\t\tif (id.substr(0, 2) !== \"..\") this.Tree.select(id);\n\t\t\t\t\telse return false;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tconst FSStats = {\n\t\t\tlocalId: \"fs:stats\",\n\t\t\tborderless: true,\n\t\t\theight: 68,\n\t\t\tcss: \"webix_fmanager_fsstats\",\n\t\t\ttemplate: obj => {\n\t\t\t\tconst used = Math.floor((obj.used / obj.total) * 100);\n\n\t\t\t\tconst activeSkinAccentColor = webix.skin.$active.timelineColor;\n\t\t\t\tconst svg = `<svg width=\"100%\" height=\"20px\">\n<rect y=\"1\" rx=\"4\" width=\"100%\" height=\"8\" style=\"fill:#DFE2E6;\" />\n<rect y=\"1\" rx=\"4\" width=\"${used ||\n\t\t\t\t\t0}%\" height=\"8\" style=\"fill:${activeSkinAccentColor};\" /></svg>`;\n\n\t\t\t\tconst label = `<div class=\"webix_fmanager_fsstats_label\">${formatTemplate(\n\t\t\t\t\tobj.used || 0\n\t\t\t\t)} ${_(\"of\")} ${formatTemplate(obj.total || 0)} ${_(\"used\")}</div>`;\n\n\t\t\t\treturn svg + label;\n\t\t\t},\n\t\t};\n\n\t\tconst navpanel = {\n\t\t\tview: \"proxy\",\n\t\t\tbody: {\n\t\t\t\trows: [button, navbar, FSStats],\n\t\t\t\tpadding: { top: 8, bottom: 4 },\n\t\t\t},\n\t\t};\n\n\t\treturn navpanel;\n\t}\n\n\tinit() {\n\t\tthis.State = this.getParam(\"state\");\n\t\tthis.Tree = this.$$(\"tree\");\n\n\t\tthis.app\n\t\t\t.getService(\"local\")\n\t\t\t.folders()\n\t\t\t.then(h => {\n\t\t\t\tthis.Tree.sync(h);\n\t\t\t\tthis.Subscribe();\n\t\t\t\tthis.GetFsStats();\n\t\t\t});\n\n\t\tthis.Menu = this.ui(AddNewMenuView);\n\n\t\tthis.ContextMenu = this.ui(\n\t\t\tnew (this.app.dynamic(ContextMenuView))(this.app, {\n\t\t\t\tcompact: false,\n\t\t\t\ttree: true,\n\t\t\t})\n\t\t);\n\t\tthis.ContextMenu.AttachTo(this.Tree, e => {\n\t\t\tconst id = this.Tree.locate(e);\n\t\t\treturn id ? [this.Tree.getItem(id)] : null;\n\t\t});\n\n\t\tthis.on(this.app, \"reload:fs:stats\", () => this.GetFsStats(true));\n\t}\n\n\tSubscribe() {\n\t\tthis.Tree.attachEvent(\"onAfterSelect\", () => {\n\t\t\tlet v = this.Tree.getSelectedId();\n\t\t\tif (v.substr(0, 2) == \"..\") {\n\t\t\t\tthis.State.$batch({\n\t\t\t\t\tsource: v.slice(3),\n\t\t\t\t\tpath: \"/\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.State.$batch({\n\t\t\t\t\tsource: this.GetRootId(v).slice(3),\n\t\t\t\t\tpath: v,\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.TreeState = this.Tree.getState();\n\t\t});\n\t\tthis.Tree.attachEvent(\"onAfterOpen\", () => {\n\t\t\tthis.TreeState = this.Tree.getState();\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"path\", v => {\n\t\t\tthis.State.path = v;\n\t\t\tif (this.Tree.exists(v)) {\n\t\t\t\tthis.Tree.select(v);\n\t\t\t\tvar parent = this.Tree.getParentId(v);\n\t\t\t\tif (parent) this.Tree.open(parent);\n\t\t\t\tthis.Tree.showItem(v);\n\t\t\t} else this.Tree.select(\"../\" + this.State.source);\n\t\t});\n\n\t\tthis.app\n\t\t\t.getService(\"local\")\n\t\t\t.folders()\n\t\t\t.then(collection => {\n\t\t\t\tthis.on(collection.data, \"onStoreUpdated\", id => {\n\t\t\t\t\tif (!id && this.Tree.count()) {\n\t\t\t\t\t\tthis.Tree.setState(this.TreeState);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tGetFsStats(force) {\n\t\tthis.app\n\t\t\t.getService(\"backend\")\n\t\t\t.getInfo(force)\n\t\t\t.then(data => {\n\t\t\t\tthis.$$(\"fs:stats\").setValues(data.stats);\n\t\t\t});\n\t}\n\n\tMoveFiles(source, target) {\n\t\tif (target === \"../files\") target = \"/\";\n\t\tthis.app.getService(\"operations\").move(source, target);\n\t\treturn false;\n\t}\n\n\tGetRootId(path) {\n\t\tlet root;\n\t\twhile (path) {\n\t\t\troot = path;\n\t\t\tpath = this.Tree.getParentId(path);\n\t\t}\n\t\treturn root;\n\t}\n}\n","import DataViewBase from \"views/sections/dataview\";\nimport hotkey from \"jet-hotkey\";\n\nimport { folderIcon, backIcon } from \"../helpers/icons\";\nimport { formatTemplate } from \"../helpers/common\";\n\nexport default class GridView extends DataViewBase {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst compact = this.getParam(\"compact\", true);\n\n\t\tconst grid = {\n\t\t\tview: \"datatable\",\n\t\t\tlocalId: \"table\",\n\t\t\tcss: \"webix_noselect webix_header_border webix_fmanager_filelist\",\n\t\t\tselect: \"row\",\n\t\t\tmultiselect: true,\n\t\t\tdrag: true,\n\t\t\tresizeColumn: { headerOnly: true },\n\t\t\tsort: \"multi\",\n\t\t\ttype: {\n\t\t\t\tbackIcon: () => backIcon,\n\t\t\t\tbackLabel: () => _(\"back to parent folder\"),\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonItemDblClick: () => this.Activate(this.GetSelection()),\n\t\t\t\tonEnter: () => this.Activate(this.GetSelection()),\n\t\t\t\tonBeforeDrag: ctx => this.DragMarker(ctx),\n\t\t\t\tonBeforeDrop: ctx => this.MoveFiles(ctx.source, ctx.target),\n\t\t\t\t\"data->onStoreLoad\": () => {\n\t\t\t\t\t// needed for folder content reloads or path change after some sorting\n\t\t\t\t\tthis.WTable.markSorting();\n\t\t\t\t},\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_ss_center_scroll: () => this.EmptyClick(),\n\t\t\t\twebix_column: () => false,\n\t\t\t},\n\t\t\tonContext: {\n\t\t\t\twebix_ss_center_scroll: (e, id) => {\n\t\t\t\t\tif (!id) this.EmptyClick();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tid: \"value\",\n\t\t\t\t\theader: \"\",\n\t\t\t\t\ttemplate: obj => this.NameTemplate(obj),\n\t\t\t\t\tsort: sort(\"value\"),\n\t\t\t\t\tfillspace: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"size\",\n\t\t\t\t\theader: _(\"Size\"),\n\t\t\t\t\ttemplate: obj =>\n\t\t\t\t\t\tobj.type !== \"folder\" ? formatTemplate(obj.size) : \"\",\n\t\t\t\t\tsort: sort(\"size\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"date\",\n\t\t\t\t\theader: _(\"Date\"),\n\t\t\t\t\tsort: sort(\"date\"),\n\t\t\t\t\tformat: date => {\n\t\t\t\t\t\tif (date instanceof Date && !isNaN(date))\n\t\t\t\t\t\t\treturn webix.i18n.longDateFormatStr(date);\n\t\t\t\t\t\telse return \"\";\n\t\t\t\t\t},\n\t\t\t\t\twidth: 150,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tif (compact) {\n\t\t\tgrid.columns.splice(1, 2);\n\t\t}\n\n\t\treturn grid;\n\t}\n\tinit() {\n\t\tthis.WTable = this.$$(\"table\");\n\t\tsuper.init();\n\n\t\tthis.on(this.State.$changes, \"isActive\", v => {\n\t\t\tif (!v) {\n\t\t\t\tthis.Menu.Hide();\n\t\t\t\tthis._Track = false;\n\t\t\t\tthis.WTable.unselect();\n\t\t\t\tthis._Track = true;\n\t\t\t} else {\n\t\t\t\tthis.SelectActive();\n\t\t\t\twebix.delay(() => webix.UIManager.setFocus(this.WTable));\n\t\t\t}\n\t\t});\n\n\t\t// other hotkeys are shared, this one is specific\n\t\tthis.on(hotkey(this.getRoot()), \"TAB\", () => {\n\t\t\tif (this.getParam(\"trackActive\", true)) this.State.isActive = false;\n\t\t});\n\t}\n\tRenderData(data) {\n\t\tthis.WTable.sync(data);\n\t}\n\tNameTemplate(obj) {\n\t\treturn obj.type === \"folder\"\n\t\t\t? folderIcon + obj.value\n\t\t\t: `${this.Icon(obj)}<span class=\"file-name\">${obj.value}</span>`;\n\t}\n}\n\nfunction sort(by) {\n\treturn function(a, b) {\n\t\tif (\n\t\t\ta.value === \"..\" ||\n\t\t\tb.value === \"..\" ||\n\t\t\t(a.type === \"folder\" && b.type !== \"folder\") ||\n\t\t\t(b.type === \"folder\" && a.type !== \"folder\")\n\t\t)\n\t\t\treturn 0;\n\n\t\tif (by === \"value\")\n\t\t\treturn a.value.localeCompare(b.value, undefined, {\n\t\t\t\tignorePunctuation: true,\n\t\t\t\tnumeric: true,\n\t\t\t});\n\n\t\treturn a[by] < b[by] ? -1 : a[by] > b[by] ? 1 : 0;\n\t};\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class PreviewPopupView extends JetView {\n\tconfig() {\n\t\treturn this.app.getService(\"jet-win\").updateConfig({\n\t\t\tview: \"window\",\n\t\t\tborderless: true,\n\t\t\thead: false,\n\t\t\tfullscreen: true,\n\t\t\tbody: { $subview: true, branch: true, name: \"preview\" },\n\t\t});\n\t}\n\tIsVisible() {\n\t\treturn this.getRoot().isVisible();\n\t}\n\tShow(params) {\n\t\tthis.show(\"preview\", {\n\t\t\ttarget: \"preview\",\n\t\t\tparams: { state: params.state, compact: true },\n\t\t});\n\t\tthis.getRoot().show();\n\t}\n\tHide() {\n\t\tthis.show(\"_blank\", {\n\t\t\ttarget: \"preview\",\n\t\t});\n\t\tthis.getRoot().hide();\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nimport FoldersTree from \"../folders\";\n\nexport default class SideTreeView extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"sidemenu\",\n\t\t\tcss: \"webix_files_sidemenu\",\n\t\t\twidth: 300,\n\t\t\tanimate: false,\n\t\t\tstate: state => {\n\t\t\t\tconst toolbarHeight = webix.skin.$active.toolbarHeight + 14;\n\t\t\t\tstate.left = this.Parent.left;\n\t\t\t\tstate.top = this.Parent.top + toolbarHeight;\n\t\t\t\tstate.height = this.Parent.height - toolbarHeight;\n\t\t\t},\n\t\t\tbody: FoldersTree,\n\t\t};\n\t}\n\tinit() {\n\t\tthis.on(this.app, \"view:resize\", () => {\n\t\t\tif (this.getRoot().isVisible()) this.Show(true);\n\t\t});\n\t}\n\tShow(updatePos) {\n\t\tif (!updatePos && this.getRoot().isVisible()) return;\n\n\t\tthis.Parent = this.app.getRoot().$view.getBoundingClientRect();\n\t\tthis.getRoot().show();\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { createState } from \"jet-restate\";\n\nexport default class DoublePanelView extends JetView {\n\tconfig() {\n\t\tconst panels = {\n\t\t\ttype: \"wide\",\n\t\t\tcols: [\n\t\t\t\t{ $subview: true, branch: true, name: \"left\" },\n\t\t\t\t{ view: \"resizer\" },\n\t\t\t\t{ $subview: true, branch: true, name: \"right\" },\n\t\t\t],\n\t\t};\n\n\t\treturn panels;\n\t}\n\tinit() {\n\t\tthis.State = this.getParam(\"state\");\n\n\t\tconst left = createState({\n\t\t\tselectedItem: [].concat(this.State.selectedItem),\n\t\t\tpath: this.State.path,\n\t\t\tsource: this.GetSource(\"left\"),\n\t\t\tmode: \"list\",\n\t\t\tisActive: true,\n\t\t});\n\t\tleft.selectedItem.$noSelect = this.State.selectedItem.$noSelect;\n\n\t\tconst right = createState({\n\t\t\tselectedItem: [],\n\t\t\tpath: this.State.path,\n\t\t\tsource: this.GetSource(\"right\"),\n\t\t\tmode: \"list\",\n\t\t\tisActive: false,\n\t\t});\n\n\t\tthis._TrackChanges(left, right);\n\t\tthis._TrackChanges(right, left);\n\n\t\tthis.show(\"panel/list\", {\n\t\t\ttarget: \"left\",\n\t\t\tparams: { trackActive: true, state: left },\n\t\t});\n\t\tthis.show(\"panel/list\", {\n\t\t\ttarget: \"right\",\n\t\t\tparams: { trackActive: true, state: right },\n\t\t});\n\t}\n\n\t_TrackChanges(state, next) {\n\t\tthis.on(state.$changes, \"path\", v => {\n\t\t\tif (state.isActive) this.State.path = v;\n\t\t});\n\t\tthis.on(state.$changes, \"source\", v => {\n\t\t\tif (state.isActive) this.State.source = v;\n\t\t});\n\t\tthis.on(state.$changes, \"selectedItem\", v => {\n\t\t\tif (state.isActive) this.State.selectedItem = v;\n\t\t});\n\t\tthis.on(state.$changes, \"isActive\", v => {\n\t\t\tif (v)\n\t\t\t\tthis.State.$batch({\n\t\t\t\t\tpath: state.path,\n\t\t\t\t\tsource: state.source,\n\t\t\t\t});\n\t\t\tnext.isActive = !v;\n\t\t});\n\t\tthis.on(this.app, \"pathChanged\", (opath, npath) => {\n\t\t\tif (\n\t\t\t\t!state.isActive &&\n\t\t\t\t(state.path === opath || state.path.indexOf(opath + \"/\") === 0)\n\t\t\t) {\n\t\t\t\tstate.path = state.path.replace(opath, npath);\n\t\t\t}\n\t\t});\n\t}\n\tGetSource() {\n\t\treturn this.State.source;\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class PanelSearchView extends JetView {\n\tconfig() {\n\t\tthis.State = this.getParam(\"state\");\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst back = {\n\t\t\tview: \"icon\",\n\t\t\ticon: \"wxi-angle-left\",\n\t\t\tclick: () => {\n\t\t\t\tthis.State.$batch({\n\t\t\t\t\tsearch: \"\",\n\t\t\t\t\tsearchStats: null,\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\n\t\tconst toolbar = {\n\t\t\tview: \"toolbar\",\n\t\t\tcols: [\n\t\t\t\tback,\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"header\",\n\t\t\t\t\ttype: \"header\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tcss: \"webix_fmanager_path\",\n\t\t\t\t\ttemplate: obj => {\n\t\t\t\t\t\tconst text = _(\"Search results in\");\n\t\t\t\t\t\tconst root = this.app.getService(\"backend\").getRootName();\n\t\t\t\t\t\tlet path = \"\";\n\t\t\t\t\t\tif (obj && obj.path && obj.path !== \"/\") {\n\t\t\t\t\t\t\tpath = webix.template.escape(obj.path);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn `${text} ${root}${path}`;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t],\n\t\t};\n\n\t\treturn {\n\t\t\trows: [toolbar, { $subview: true, params: { state: this.State } }],\n\t\t};\n\t}\n\tinit() {\n\t\tthis.$$(\"header\").setValues({ path: this.State.path });\n\t}\n\tready() {\n\t\tthis.on(this.State.$changes, \"search\", v => {\n\t\t\tv = v.trim();\n\t\t\tif (v) {\n\t\t\t\tthis.State.selectedItem = [];\n\t\t\t\tthis.getSubView().LoadData(this.State.path, v);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class PanelView extends JetView {\n\tconfig() {\n\t\tconst path = {\n\t\t\tview: \"template\",\n\t\t\tlocalId: \"path\",\n\t\t\tborderless: true,\n\t\t\tcss: \"webix_fmanager_path\",\n\t\t\ttemplate: obj => this.RenderPath(obj),\n\t\t\tonClick: {\n\t\t\t\twebix_fmanager_path_chunk: e => this.ChangePath(e),\n\t\t\t},\n\t\t};\n\n\t\tconst refresh = {\n\t\t\tview: \"icon\",\n\t\t\ticon: \"wxi-sync\",\n\t\t\tcss: \"webix_fmanager_spec_icon\",\n\t\t\ttooltip: \"Refresh\",\n\t\t\tclick: () => {\n\t\t\t\tthis.app.getService(\"local\").refresh(this.State.path);\n\t\t\t},\n\t\t};\n\n\t\tconst toolbar = {\n\t\t\tview: \"toolbar\",\n\t\t\tpaddingX: 4,\n\t\t\tcols: [refresh, path],\n\t\t};\n\n\t\treturn {\n\t\t\trows: [\n\t\t\t\ttoolbar,\n\t\t\t\t{ $subview: true, params: { state: this.getParam(\"state\") } },\n\t\t\t],\n\t\t};\n\t}\n\tinit() {\n\t\tthis.State = this.getParam(\"state\");\n\n\t\tthis.on(this.State.$changes, \"path\", v => this.ProcessPath(v));\n\n\t\tconst uapi = this.app.getService(\"upload\").getUploader();\n\t\tuapi.addDropZone(this.getRoot().$view);\n\t\tthis.on(uapi, \"onBeforeFileDrop\", (files, e) => {\n\t\t\tif (this.getRoot().$view.contains(e.target))\n\t\t\t\tuapi.config.tempUrlData = { id: this.State.path };\n\t\t});\n\t}\n\n\tProcessPath(v) {\n\t\tthis.app\n\t\t\t.getService(\"local\")\n\t\t\t.folders()\n\t\t\t.then(dirs => {\n\t\t\t\tlet path = [\"/\"];\n\t\t\t\tif (v !== \"/\") {\n\t\t\t\t\tconst p = v.split(\"/\");\n\t\t\t\t\tfor (let i = 1, id = \"\"; i < p.length; ++i) {\n\t\t\t\t\t\tid += `/${p[i]}`;\n\t\t\t\t\t\tpath.push(dirs.getItem(id).value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$(\"path\").setValues({ path: path });\n\t\t\t});\n\t}\n\n\tRenderPath(obj) {\n\t\tif (obj.path && obj.path.length) {\n\t\t\tconst icon = \"<span class='webix_icon wxi-angle-right'></span>\";\n\t\t\tconst rootName = this.app.getService(\"backend\").getRootName();\n\n\t\t\t// template data is initially undefined\n\t\t\tlet htmlPath = \"\";\n\t\t\tobj.path.forEach((chunk, index) => {\n\t\t\t\t// as folders may have the same name, index is stored as \"data-path\" attribute\n\t\t\t\thtmlPath += `<span class=\"webix_fmanager_path_chunk\" data-path=\"${index}\">${\n\t\t\t\t\tindex ? chunk : rootName\n\t\t\t\t}</span>`;\n\t\t\t\tif (index < obj.path.length - 1) htmlPath += icon;\n\t\t\t});\n\n\t\t\treturn htmlPath;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tChangePath(e) {\n\t\tconst chunkInd = e.target.getAttribute(\"data-path\") * 1;\n\t\tconst path = this.State.path.split(\"/\");\n\t\tpath.splice(chunkInd + 1, path.length - 1);\n\t\tconst newPath = path.join(\"/\") || \"/\";\n\t\tthis.State.path = newPath;\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport {\n\tformatTemplate,\n\tgetLastSelected,\n\tcapitalize,\n} from \"../../helpers/common\";\n\nexport default class InfoPreview extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\tconst dateTimeFormat = webix.Date.dateToStr(\n\t\t\t\"%M %j, %Y&nbsp;&nbsp;&nbsp;&nbsp;%H:%i:%s\"\n\t\t);\n\n\t\tconst mainInfo = {\n\t\t\tcss: \"webix_fmanager_preview_info\",\n\t\t\tlocalId: \"info\",\n\t\t\tborderless: true,\n\t\t\tautoheight: true,\n\t\t\ttemplate: obj => {\n\t\t\t\tif (!obj.id) return \"\";\n\t\t\t\tconst _ = this.app.getService(\"locale\")._;\n\t\t\t\tconst keys = (obj.type === \"folder\"\n\t\t\t\t\t? [\"Type\", \"Date\"]\n\t\t\t\t\t: [\"Type\", \"Size\", \"Date\"]\n\t\t\t\t).map(k => `<div class='key_value_cell''>${_(k)}</div>`);\n\n\t\t\t\tconst keyCol = `<div class='key_col'>${keys.join(\"\")}</div>`;\n\n\t\t\t\tconst values = (obj.type === \"folder\"\n\t\t\t\t\t? [capitalize(_(obj.type)), dateTimeFormat(obj.date)]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\tcapitalize(_(obj.type)),\n\t\t\t\t\t\t\tformatTemplate(obj.size),\n\t\t\t\t\t\t\tdateTimeFormat(obj.date),\n\t\t\t\t\t  ]\n\t\t\t\t).map(v => `<div class='key_value_cell'>${v}</div>`);\n\n\t\t\t\tconst valueCol = `<div class=\"value_col\">${values.join(\"\")}</div>`;\n\n\t\t\t\treturn `<div>${keyCol}${valueCol}</div>`;\n\t\t\t},\n\t\t};\n\n\t\tconst extraInfo = {\n\t\t\tcss: \"webix_fmanager_preview_info extra\",\n\t\t\tlocalId: \"extra:info\",\n\t\t\thidden: true,\n\t\t\tautoheight: true,\n\t\t\ttemplate: obj => {\n\t\t\t\tconst tags = Object.keys(obj);\n\t\t\t\tlet keyCol = \"<div class='key_col'>\";\n\t\t\t\tfor (let i = 0; i < tags.length; ++i) {\n\t\t\t\t\tkeyCol += `<div class='key_value_cell key'>${tags[i]}</div>`;\n\t\t\t\t}\n\t\t\t\tkeyCol += \"</div>\";\n\n\t\t\t\tlet valueCol = \"<div class='value_col'>\";\n\t\t\t\tfor (let val in obj) {\n\t\t\t\t\tlet value = obj[val].trim();\n\t\t\t\t\tvalueCol += `<div class='key_value_cell'>${\n\t\t\t\t\t\tvalue && value != \"0\"\n\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t: \"<span class='webix_fmanager_id3tags-unknown'>Unknown</span>\"\n\t\t\t\t\t}</div>`;\n\t\t\t\t}\n\t\t\t\tvalueCol += \"</div>\";\n\n\t\t\t\treturn `<div><div class=\"webix_fmanager_info_header\">\n<span class=\"webix_fmanager_icon fmi-information-outline\"></span>\n<span class=\"webix_fmanager_info_title\">Extra info</span>\n</div>${keyCol}${valueCol}</div>`;\n\t\t\t},\n\t\t};\n\n\t\tconst counter = {\n\t\t\tlocalId: \"search:counter\",\n\t\t\tcss: \"webix_fmanager_preview_info\",\n\t\t\theight: 104,\n\t\t\tborderless: true,\n\t\t\ttemplate: o => {\n\t\t\t\tconst keys = [\"Folders\", \"Files\"].map(\n\t\t\t\t\tk => `<div class='key_value_cell''>${_(k)}</div>`\n\t\t\t\t);\n\t\t\t\tconst keyCol = `<div class='key_col search'>${keys.join(\"\")}</div>`;\n\n\t\t\t\tconst values = [o.folders, o.files].map(\n\t\t\t\t\tv => `<div class='key_value_cell'>${v}</div>`\n\t\t\t\t);\n\n\t\t\t\tconst valueCol = `<div class=\"value_col search\">${values.join(\n\t\t\t\t\t\"\"\n\t\t\t\t)}</div>`;\n\n\t\t\t\treturn `<div>${keyCol}${valueCol}</div>`;\n\t\t\t},\n\t\t};\n\n\t\tconst infoTabs = {\n\t\t\tlocalId: \"info:tabs\",\n\t\t\tview: \"tabview\",\n\t\t\tcss: \"webix_fmanager_info_tab\",\n\t\t\tcells: [\n\t\t\t\t{\n\t\t\t\t\theader: _(\"Information\"),\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tpadding: 14,\n\t\t\t\t\t\tmargin: 14,\n\t\t\t\t\t\trows: [mainInfo, extraInfo, {}],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theader: _(\"Search results\"),\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tpadding: 14,\n\t\t\t\t\t\tmargin: 14,\n\t\t\t\t\t\trows: [counter, {}],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn infoTabs;\n\t}\n\tinit() {\n\t\tthis.Tabview = this.$$(\"info:tabs\");\n\t\tthis.State = this.getParam(\"state\");\n\n\t\tthis.on(this.State.$changes, \"selectedItem\", v => {\n\t\t\tthis.ShowInfo(getLastSelected(v));\n\t\t});\n\n\t\tthis.on(this.State.$changes, \"searchStats\", v => {\n\t\t\tif (v) {\n\t\t\t\tthis.$$(\"search:counter\").setValues(v);\n\t\t\t} else {\n\t\t\t\tif (!this.State.selectedItem.length) this.Tabview.hide();\n\t\t\t}\n\t\t});\n\t}\n\tShowInfo(v) {\n\t\tconst tabbar = this.Tabview.getTabbar();\n\t\tconst infoId = tabbar.config.options[0].id;\n\t\tconst counterId = tabbar.config.options[1].id;\n\n\t\tif (v.type !== \"empty\") {\n\t\t\tthis.SetInfo(this.$$(\"info\"), v);\n\t\t\tthis.SwitchTabs(tabbar, counterId, infoId);\n\n\t\t\tconst extraInfo = this.$$(\"extra:info\");\n\t\t\tconst meta = this.app.getService(\"backend\").getMeta(v);\n\t\t\t// if feature is disabled getMeta returns false\n\t\t\tif (!meta) extraInfo.hide();\n\t\t\telse\n\t\t\t\tmeta\n\t\t\t\t\t.then(data => this.SetExtraInfo(extraInfo, data))\n\t\t\t\t\t.catch(() => extraInfo.hide());\n\t\t} else {\n\t\t\tif (!this.State.search) this.Tabview.hide();\n\t\t\telse this.SwitchTabs(tabbar, infoId, counterId);\n\t\t}\n\t}\n\tSetExtraInfo(view, data) {\n\t\tif (!_isEmpty(data)) {\n\t\t\tthis.SetInfo(view, data);\n\t\t} else view.hide();\n\t}\n\tSetInfo(view, data) {\n\t\tview.setValues(data);\n\t\tview.show();\n\t}\n\tSwitchTabs(tab, hide, show) {\n\t\ttab.hideOption(hide);\n\t\ttab.setValue(show);\n\t\ttab.showOption(show);\n\t\tthis.Tabview.show();\n\t}\n}\n\n// if all tags empty or obj has no keys, do not show them at all\nfunction _isEmpty(obj) {\n\tfor (let i in obj) {\n\t\tif (typeof obj[i] === \"object\") return _isEmpty(obj[i]);\n\t\telse if (obj[i] && obj[i] !== \"0\") return false;\n\t}\n\treturn true;\n}\n","import { JetView } from \"webix-jet\";\nimport InfoPreview from \"./info\";\nimport { getLastSelected } from \"../../helpers/common\";\n\nexport default class PreviewView extends JetView {\n\tconfig() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst compact = this.getParam(\"compact\");\n\t\tconst state = this.getParam(\"state\");\n\n\t\tconst toolbar = {\n\t\t\tview: \"toolbar\",\n\t\t\tlocalId: \"toolbar\",\n\t\t\tpadding: { right: 6 },\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\tview: \"label\",\n\t\t\t\t\tlocalId: \"filename:label\",\n\t\t\t\t\tcss: \"webix_fmanager_preview_name\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"wxi-download\",\n\t\t\t\t\tcss: \"webix_fmanager_spec_icon\",\n\t\t\t\t\tlocalId: \"download\",\n\t\t\t\t\ttooltip: _(\"Download file\"),\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tthis.app.callEvent(\"app:action\", [\"download\", [this.FileInfo]]);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"wxi-close\",\n\t\t\t\t\thidden: !compact,\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tstate.preview = !state.preview;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tconst preview = {\n\t\t\tview: \"proxy\",\n\t\t\tminHeight: 413,\n\t\t\tborderless: true,\n\t\t\tbody: {\n\t\t\t\t$subview: true,\n\t\t\t\tname: \"preview\",\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\tmargin: 0.1,\n\t\t\trows: [\n\t\t\t\ttoolbar,\n\t\t\t\t{\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tbody: {\n\t\t\t\t\t\ttype: \"wide\",\n\t\t\t\t\t\tmargin: 10,\n\t\t\t\t\t\trows: [preview, InfoPreview],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tinit() {\n\t\tthis.on(this.getParam(\"state\").$changes, \"selectedItem\", v => {\n\t\t\tlet lastSelected = getLastSelected(v);\n\n\t\t\tthis.ShowInfo(lastSelected);\n\t\t\tthis.FileInfo = lastSelected;\n\n\t\t\tconst downloadIcon = this.$$(\"download\");\n\t\t\tif (lastSelected.type === \"folder\") {\n\t\t\t\tdownloadIcon.hide();\n\t\t\t} else {\n\t\t\t\tdownloadIcon.show();\n\t\t\t}\n\t\t});\n\t}\n\n\tShowInfo(v) {\n\t\tlet previewUrl = \"preview.template\";\n\n\t\tconst player = this.app.config.player;\n\t\tif (player && (v.type === \"audio\" || v.type === \"video\")) {\n\t\t\tpreviewUrl = \"preview.media\";\n\t\t}\n\n\t\tif (v.type !== \"empty\") {\n\t\t\tthis.$$(\"filename:label\").setValue(v.value);\n\t\t\tthis.$$(\"toolbar\").show();\n\t\t} else {\n\t\t\tthis.$$(\"toolbar\").hide();\n\t\t}\n\n\t\tthis.show(previewUrl, {\n\t\t\ttarget: \"preview\",\n\t\t\tparams: {\n\t\t\t\tinfo: v,\n\t\t\t},\n\t\t});\n\t}\n}\n","webix.protoUI({\r\n\tname:\"plyr-player\",\r\n\tdefaults:{\r\n\t\tconfig:{},\r\n\t\tsource:{}\r\n\t},\r\n\t$init:function(){\r\n\t\tthis.$view.innerHTML = '<div class=\"webix_player_parent\"><audio></audio></div>';\r\n\t\tthis._container = this.$view.firstChild.firstChild;\r\n\t\t// visibility of tooltips and popup menu\r\n\t\tthis.$view.style.overflow = \"visible\";\r\n\r\n\t\tthis._waitView = webix.promise.defer();\r\n\t\tthis.$ready.push(this.render);\r\n\t},\r\n\tgetPlayer:function(wait){\r\n\t\treturn wait?this._waitView:this._player;\r\n\t},\r\n\trender:function(){\r\n\t\tif (this.config.cdn === false || window.Plyr){\r\n\t\t\tthis._initPlyr();\r\n\t\t\treturn;\r\n\t\t};\r\n\r\n\t\tvar cdn = this.config.cdn ? this.config.cdn : \"https://cdn.plyr.io/3.5.10\";\r\n\r\n\t\twebix.require([\r\n\t\t\tcdn+\"/plyr.js\",\r\n\t\t\tcdn+\"/plyr.css\"\r\n\t\t])\r\n\t\t.then( webix.bind(this._initPlyr, this) )\r\n\t\t.catch(function(e){\r\n\t\t\tconsole.log(e);\r\n\t\t});\r\n\t\t\r\n\t},\r\n\t_initPlyr:function(){\r\n\t\tif (this.$view){\r\n\t\t\tvar options = webix.extend({}, this.config.config);\r\n\t\t\tthis._player = new Plyr(this._container, options);\r\n\t\t\tthis._player.elements.container.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t// ensure proper desctruction\r\n\t\t\tthis.attachEvent(\"onDestroy\", function(){\r\n\t\t\t\tif (this._player){\r\n\t\t\t\t\tthis._player.destroy();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._waitView.resolve(this._player);\r\n\r\n\t\t\tthis._player.on(\"canplay\", webix.bind(function(){\r\n\t\t\t\tif (this._player.media){\r\n\t\t\t\t\t// prevent focusing on media tag outside the expected UI\r\n\t\t\t\t\tthis._player.media.setAttribute(\"tabindex\", \"-1\");\t\r\n\t\t\t\t\tthis._normalizeRatio();\r\n\t\t\t\t}\r\n\t\t\t}, this));\r\n\t\t\tthis._player.on(\"ready\", webix.bind(function(){\r\n\t\t\t\tif (this.$view){\r\n\t\t\t\t\t// allow width less than 200px\r\n\t\t\t\t\tthis.$view.querySelector(\".plyr--full-ui\").style[\"min-width\"] = \"0px\";\t\t\t\r\n\t\t\t\t\tthis._normalizeRatio();\r\n\t\t\t\t}\r\n\t\t\t}, this));\t\t\t\r\n\t\t}\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tthis.$view.firstChild.style.width = x+\"px\";\r\n\t\tthis.$view.firstChild.style.height = (y-2)+\"px\";\r\n\t\tif (this._player)\r\n\t\t\tthis._normalizeRatio(x, y);\r\n\t},\r\n\tsource_setter:function(value){\r\n\t\tthis._waitView.then(function(player){\r\n\t\t\tif (value)\r\n\t\t\t\tplayer.source = value;\r\n\t\t});\r\n\t},\r\n\tgetPlyr:function(wait){\r\n\t\treturn wait ? this._waitView : this._player;\r\n\t},\r\n\t_gcdRatio:function(x, y){\r\n\t\tx = Math.abs(x);\r\n\t\ty = Math.abs(y);\r\n\t\twhile(y) {\r\n\t\t\tvar t = y;\r\n\t\t\ty = x % y;\r\n\t\t\tx = t;\r\n\t\t}\r\n\t\treturn x;\r\n\t},\r\n\t_normalizeRatio:function(x, y){\r\n\t\tif (this.$view){\r\n\t\t\tx = x || this.$view.clientWidth;\r\n\t\t\ty = y || this.$view.clientHeight;\r\n\t\t\tvar div = this._gcdRatio(x, y),\r\n\t\t\t\tratioX = (x/div).toString(),\r\n\t\t\t\tratioY = (y/div).toString(),\r\n\t\t\t\tratio = ratioX+\":\"+ratioY;\t\t\t\r\n\t\t\tthis._player.ratio = ratio;\r\n\t\t}\r\n\t}\r\n}, webix.ui.view, webix.EventSystem);","import { JetView } from \"webix-jet\";\nimport \"@wbx/view-plyr\";\n\nexport default class MediaPreview extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tlocalId: \"albumArt\",\n\t\t\t\t\thidden: true,\n\t\t\t\t\tcss: \"webix_fmanager_preview\",\n\t\t\t\t\ttemplate: `<img class=\"webix_fmanager_preview_icon\" src=\"${this.app\n\t\t\t\t\t\t.getService(\"backend\")\n\t\t\t\t\t\t.icon({ type: \"audio\" }, \"big\")}\" />`,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"plyr-player\",\n\t\t\t\t\tcss: \"webix_fmanager_player\",\n\t\t\t\t\tlocalId: \"player\",\n\t\t\t\t\tconfig: {\n\t\t\t\t\t\tcontrols: [\n\t\t\t\t\t\t\t\"play-large\",\n\t\t\t\t\t\t\t\"play\",\n\t\t\t\t\t\t\t\"progress\",\n\t\t\t\t\t\t\t\"current-time\",\n\t\t\t\t\t\t\t\"mute\",\n\t\t\t\t\t\t\t\"volume\",\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\tinit() {\n\t\tconst node = this.$$(\"albumArt\").$view;\n\t\twebix.event(node, \"dblclick\", () => {\n\t\t\tconst info = this.getParam(\"info\");\n\t\t\tthis.app.callEvent(\"app:action\", [\"open\", [info]]);\n\t\t});\n\t}\n\turlChange() {\n\t\tconst info = this.getParam(\"info\");\n\t\tthis.ShowPreview(info);\n\t}\n\tShowPreview(info) {\n\t\tif (!info) return;\n\n\t\tconst url = this.app.getService(\"backend\").directLink(info.id);\n\t\tthis.SetMedia(url, info.type, info.$ext);\n\n\t\tconst art = this.$$(\"albumArt\");\n\t\tconst player = this.$$(\"player\");\n\t\tif (info.type === \"audio\") {\n\t\t\tplayer.config.height = 52;\n\t\t\tart.show();\n\t\t} else {\n\t\t\tplayer.config.height = 0;\n\t\t\tart.hide();\n\t\t}\n\t}\n\tSetMedia(src, type, ext) {\n\t\tconst player = this.$$(\"player\");\n\n\t\tplayer.define({\n\t\t\tsource: {\n\t\t\t\ttype,\n\t\t\t\tsources: [\n\t\t\t\t\t{\n\t\t\t\t\t\tsrc,\n\t\t\t\t\t\ttype: `${type}/${ext}`,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nexport default class TemplatePreview extends JetView {\n\tconfig() {\n\t\treturn {\n\t\t\tview: \"template\",\n\t\t\tlocalId: \"preview\",\n\t\t\tcss: \"webix_fmanager_preview\",\n\t\t};\n\t}\n\tinit() {\n\t\tconst node = this.getRoot().$view;\n\t\twebix.event(node, \"dblclick\", () => {\n\t\t\tconst info = this.getParam(\"info\");\n\t\t\tif (info.type === \"code\" && this.app.config.editor) {\n\t\t\t\tthis.app.callEvent(\"app:action\", [\"edit\", [info]]);\n\t\t\t} else if (info.type !== \"folder\" && info.type !== \"empty\") {\n\t\t\t\tthis.app.callEvent(\"app:action\", [\"open\", [info]]);\n\t\t\t}\n\t\t});\n\t}\n\turlChange() {\n\t\tconst info = this.getParam(\"info\");\n\t\tthis.ShowPreview(info);\n\t}\n\tShowPreview(info) {\n\t\tconst preview = this.$$(\"preview\");\n\n\t\tif (info.type === \"folder\") {\n\t\t\tpreview.setHTML(\n\t\t\t\t`<img class=\"webix_fmanager_preview_icon\" src=\"${this.app\n\t\t\t\t\t.getService(\"backend\")\n\t\t\t\t\t.icon({ type: \"folder\" }, \"big\")}\" />`\n\t\t\t);\n\t\t} else if (info.type === \"empty\") {\n\t\t\tpreview.setHTML(\n\t\t\t\t`<img class=\"webix_fmanager_preview_icon\" src=\"${this.app\n\t\t\t\t\t.getService(\"backend\")\n\t\t\t\t\t.icon({ type: \"none\" }, \"big\")}\" />`\n\t\t\t);\n\t\t} else {\n\t\t\tlet origin = this.app.getService(\"backend\").previewURL(info, 464, 407);\n\t\t\tpreview.setHTML(\n\t\t\t\t`<img style='width:100%; height:100%;' src='${origin}' onerror='this.style.display=\"none\"'>`\n\t\t\t);\n\t\t}\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { createState } from \"jet-restate\";\nimport { iterateAsync } from \"../helpers/common\";\n\nexport default class ProgressView extends JetView {\n\tconfig() {\n\t\tthis.Config = this.getParam(\"config\");\n\n\t\treturn this.app.getService(\"jet-win\").updateConfig({\n\t\t\tview: \"window\",\n\t\t\tcss: \"webix_fmanager_progress\",\n\t\t\thead: {\n\t\t\t\ttemplate: this.Config.head,\n\t\t\t\tcss: \"webix_fmanager_progress_head\",\n\t\t\t\theight: 54,\n\t\t\t},\n\t\t\tbody: {\n\t\t\t\tpadding: { top: 0, bottom: 20, left: 20, right: 20 },\n\t\t\t\tmargin: 10,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttemplate: obj =>\n\t\t\t\t\t\t\t`<div class=\"webix_fmanager_progress_bar\">\n<div class=\"webix_fmanager_progress_counter\">${obj.done} of ${obj.total} items</div>\n<div class=\"webix_fmanager_progress_name\">${obj.file}</div></div>`,\n\t\t\t\t\t\tlocalId: \"counter\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\theight: 59,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"button\",\n\t\t\t\t\t\tvalue: \"Stop\",\n\t\t\t\t\t\tcss: \"webix_fmanager_progress_cancel\",\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis.State.cancel = true;\n\t\t\t\t\t\t\tthis.getRoot().disable();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\t}\n\tready() {\n\t\tthis.WaitClose = webix.promise.defer();\n\t\tthis.Counter = this.$$(\"counter\");\n\n\t\tthis.Counter.setValues({\n\t\t\tdone: 0,\n\t\t\ttotal: this.Config.files.length,\n\t\t\tfile: this.Config.files[0],\n\t\t});\n\t\twebix.extend(this.Counter, webix.ProgressBar);\n\n\t\tthis.State = createState({ i: 0, cancel: false });\n\t\titerateAsync(this.Config.files, this.Config.code, this.State).finally(() =>\n\t\t\tthis.Close()\n\t\t);\n\n\t\tthis.on(this.State.$changes, \"i\", i => i && this.Step(i));\n\t}\n\tClose() {\n\t\tthis.Counter.showProgress({ type: \"bottom\", position: 1, delay: 100 });\n\t\t// FIXME - _hidden\n\t\tthis.show(\"_blank\", { target: \"popup\" });\n\t\tthis.WaitClose.resolve();\n\t}\n\tStep(i) {\n\t\tlet done = this.Counter.getValues().done;\n\n\t\tthis.Counter.setValues({ done: i, file: this.Config.files[i - 1] }, true);\n\n\t\tdone = (done + 1) / this.Config.files.length;\n\t\tthis.Counter.showProgress({\n\t\t\ttype: \"bottom\",\n\t\t\tposition: Math.min(1, done),\n\t\t\tdelay: 100,\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\nimport { cardMode, gridMode, doubleMode } from \"../helpers/icons\";\nimport { capitalize } from \"../helpers/common\";\nimport hotkey from \"jet-hotkey\";\n\nexport default class TopBarView extends JetView {\n\tconfig() {\n\t\tconst compact = this.getParam(\"compact\");\n\t\tconst skin = webix.skin.$active;\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst state = this.getParam(\"state\");\n\n\t\tconst bar = {\n\t\t\tview: \"toolbar\",\n\t\t\theight: skin.toolbarHeight + 12,\n\t\t\tmargin: 20,\n\t\t\tpaddingY: 9,\n\t\t\tpaddingX: 12,\n\t\t\tcols: [\n\t\t\t\t{\n\t\t\t\t\tview: \"icon\",\n\t\t\t\t\ticon: \"webix_fmanager_icon fmi-file-tree\",\n\t\t\t\t\tclick: () => this.app.callEvent(\"app:action\", [\"toggle-folders\"]),\n\t\t\t\t\thidden: !compact,\n\t\t\t\t},\n\t\t\t\t{ view: \"label\", label: _(\"Files\"), autowidth: true, hidden: compact },\n\t\t\t\t{\n\t\t\t\t\tview: \"search\",\n\t\t\t\t\twidth: compact ? 0 : 300,\n\t\t\t\t\tlocalId: \"search\",\n\t\t\t\t\tplaceholder: _(\"Search files and folders\"),\n\t\t\t\t},\n\t\t\t\t{ hidden: compact },\n\t\t\t\t{\n\t\t\t\t\tview: \"toggle\",\n\t\t\t\t\tcss: \"webix_fmanager_preview_toggle\",\n\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\ticon: \"wxi-eye\",\n\t\t\t\t\ttooltip: _(\"Preview\"),\n\t\t\t\t\twidth: skin.toolbarHeight < 37 ? 48 : 60,\n\t\t\t\t\tlocalId: \"previewMode\",\n\t\t\t\t\ton: {\n\t\t\t\t\t\tonChange: (_n, _o, mode) => {\n\t\t\t\t\t\t\tif (mode === \"user\") state.preview = !state.preview;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\thidden: compact,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"segmented\",\n\t\t\t\t\twidth: 124,\n\t\t\t\t\toptionWidth: 40,\n\t\t\t\t\tlocalId: \"modes\",\n\t\t\t\t\ttooltip: conf => {\n\t\t\t\t\t\tswitch (conf.id) {\n\t\t\t\t\t\t\tcase \"grid\":\n\t\t\t\t\t\t\t\treturn _(\"Table\");\n\t\t\t\t\t\t\tcase \"cards\":\n\t\t\t\t\t\t\t\treturn _(\"Cards\");\n\t\t\t\t\t\t\tcase \"double\":\n\t\t\t\t\t\t\t\treturn _(\"Total\");\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn capitalize(conf.id + \"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ value: gridMode, id: \"grid\" },\n\t\t\t\t\t\t{ value: cardMode, id: \"cards\" },\n\t\t\t\t\t\t{ value: doubleMode, id: \"double\" },\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\treturn bar;\n\t}\n\n\tinit() {\n\t\tconst common = this.getParam(\"state\");\n\t\tconst modes = this.$$(\"modes\");\n\n\t\tmodes.attachEvent(\"onChange\", v => {\n\t\t\tif (v) {\n\t\t\t\tcommon.$batch({\n\t\t\t\t\tmode: v,\n\t\t\t\t\tsearch: \"\",\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis.on(common.$changes, \"mode\", v => {\n\t\t\tif (modes.getOption(v)) modes.setValue(v);\n\t\t\telse modes.setValue();\n\t\t});\n\n\t\tconst search = this.$$(\"search\");\n\t\tsearch.attachEvent(\"onTimedKeyPress\", () => {\n\t\t\tcommon.search = search.getValue().trim();\n\t\t});\n\n\t\tthis.on(common.$changes, \"search\", s => {\n\t\t\ts = s.trim();\n\t\t\tsearch.setValue(s);\n\t\t});\n\n\t\tthis.on(common.$changes, \"preview\", v => {\n\t\t\tthis.$$(\"previewMode\").setValue(v * 1);\n\t\t});\n\n\t\t// global hotkey to move focus to search input\n\t\tthis.on(hotkey(), `${webix.env.isMac ? \"COMMAND\" : \"CTRL\"} + F`, (v, e) => {\n\t\t\tsearch.focus();\n\t\t\twebix.html.preventEvent(e);\n\t\t});\n\t}\n}\n","import { JetView } from \"webix-jet\";\n\nimport { initRLayout } from \"@xbs/jet-helpers\";\n\nimport TopBar from \"./topbar\";\nimport FoldersTree from \"./folders\";\n\nimport SideTreeView from \"./mobile/sidetree\";\nimport PreviewPopupView from \"./mobile/previewpopup\";\n\nexport default class TopView extends JetView {\n\tconfig() {\n\t\tinitRLayout();\n\t\tconst fCompact = this.getParam(\"forceCompact\");\n\t\tif (!webix.isUndefined(fCompact)) this.setParam(\"compact\", fCompact);\n\t\tthis.Compact = this.getParam(\"compact\");\n\n\t\tconst tree = {\n\t\t\tview: \"proxy\",\n\t\t\tbatch: \"tree\",\n\t\t\twidth: 240,\n\t\t\tminWidth: 240,\n\t\t\tmaxWidth: 400,\n\t\t\thidden: true,\n\t\t\tborderless: true,\n\t\t\tbody: FoldersTree,\n\t\t};\n\n\t\tconst panels = {\n\t\t\ttype: \"wide\",\n\t\t\tlocalId: \"folders\",\n\t\t\tcols: [\n\t\t\t\t{ $subview: true, name: \"center\", branch: true },\n\t\t\t\t{\n\t\t\t\t\tview: \"proxy\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\twidth: 470,\n\t\t\t\t\thidden: true,\n\t\t\t\t\tlocalId: \"r-side\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\t$subview: \"\",\n\t\t\t\t\t\tbranch: true,\n\t\t\t\t\t\tname: \"r-side\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tif (!this.Compact)\n\t\t\tpanels.cols.unshift(tree, { view: \"resizer\", batch: \"tree\" });\n\n\t\treturn {\n\t\t\tview: \"r-layout\",\n\t\t\ttype: \"wide\",\n\t\t\tcss: \"webix_files_main_layout\",\n\t\t\trows: [TopBar, panels, { $subview: true, popup: true, name: \"popup\" }],\n\t\t};\n\t}\n\tinit() {\n\t\t// responsive UI\n\t\tthis.getRoot().sizeTrigger(\n\t\t\tthis.app,\n\t\t\tmode => this.SetCompactMode(mode),\n\t\t\t!!this.Compact\n\t\t);\n\n\t\tconst state = this.getParam(\"state\");\n\t\tthis.State = state;\n\n\t\tif (this.Compact) {\n\t\t\tthis.SideTree = this.ui(SideTreeView);\n\t\t\tthis.PreviewPopup = this.ui(PreviewPopupView);\n\t\t}\n\n\t\tthis.on(this.app, \"app:action\", name => {\n\t\t\tswitch (name) {\n\t\t\t\tcase \"toggle-folders\":\n\t\t\t\t\tthis.ToggleFolders();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tthis.on(state.$changes, \"mode\", (v, o) => this.ShowMode(v, o));\n\t\tthis.on(state.$changes, \"search\", v => this.ShowSearch(v));\n\t\tthis.on(state.$changes, \"preview\", v => this.TogglePreview(v));\n\n\t\tthis.app\n\t\t\t.getService(\"progress\")\n\t\t\t.handle(this.getRoot(), this.ShowProgress.bind(this));\n\t}\n\n\tShowMode(v, o) {\n\t\tconst folders = this.$$(\"folders\");\n\t\tconst pos = {\n\t\t\ttarget: \"center\",\n\t\t\tparams: {\n\t\t\t\tstate: this.getParam(\"state\"),\n\t\t\t\tcompact: this.Compact,\n\t\t\t},\n\t\t};\n\n\t\tswitch (v) {\n\t\t\tcase \"grid\":\n\t\t\tcase \"cards\":\n\t\t\t\tfolders.showBatch(\"tree\");\n\t\t\t\tthis.show(\"panel/\" + (v == \"grid\" ? \"list\" : v), pos);\n\t\t\t\tbreak;\n\t\t\tcase \"double\":\n\t\t\t\tfolders.showBatch(\"\");\n\t\t\t\tthis.show(\"panel-double\", pos);\n\t\t\t\tbreak;\n\t\t\tcase \"search\": {\n\t\t\t\tthis.PrevMode = this.PrevMode || o;\n\t\t\t\tfolders.showBatch(\"\");\n\t\t\t\tthis.show(\"panel-search/cards\", pos);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tShowProgress(params) {\n\t\treturn this.show(\"./progress\", {\n\t\t\ttarget: \"popup\",\n\t\t\tparams,\n\t\t}).then(() => this.getSubView(\"popup\"));\n\t}\n\n\tTogglePreview(value) {\n\t\tif (!this.Compact) {\n\t\t\t// invert value, to get new mode\n\t\t\tconst side = this.$$(\"r-side\");\n\n\t\t\tif (value) {\n\t\t\t\tthis.show(\"preview\", {\n\t\t\t\t\ttarget: \"r-side\",\n\t\t\t\t\tparams: { state: this.State },\n\t\t\t\t});\n\t\t\t\tside.show();\n\t\t\t} else {\n\t\t\t\tthis.show(\"_blank\", { target: \"r-side\" });\n\t\t\t\tside.hide();\n\t\t\t}\n\t\t} else {\n\t\t\tif (value) {\n\t\t\t\tthis.PreviewPopup.Show({ state: this.State });\n\t\t\t} else {\n\t\t\t\tthis.PreviewPopup.Hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tToggleFolders() {\n\t\tthis.SideTree.Show();\n\t}\n\n\tShowSearch(value) {\n\t\tif (value) {\n\t\t\tthis.State.mode = \"search\";\n\t\t} else {\n\t\t\tif (this.State.mode === \"search\")\n\t\t\t\tthis.State.mode = this.PrevMode || \"grid\";\n\t\t\tthis.PrevMode = \"\";\n\t\t}\n\t}\n\n\tSetCompactMode(mode) {\n\t\tthis.setParam(\"compact\", mode);\n\t\tthis.refresh();\n\t}\n}\n","import m0 from \"./views/cards\";\nimport m1 from \"./views/editor\";\nimport m2 from \"./views/folders\";\nimport m3 from \"./views/list\";\nimport m4 from \"./views/menus/addnewmenu\";\nimport m5 from \"./views/menus/contextmenu\";\nimport m6 from \"./views/menus/menubody\";\nimport m7 from \"./views/mobile/previewpopup\";\nimport m8 from \"./views/mobile/sidetree\";\nimport m9 from \"./views/panel-double\";\nimport m10 from \"./views/panel-search\";\nimport m11 from \"./views/panel\";\nimport m12 from \"./views/preview/index.js\";\nimport m13 from \"./views/preview/info\";\nimport m14 from \"./views/preview/media\";\nimport m15 from \"./views/preview/template\";\nimport m16 from \"./views/progress\";\nimport m17 from \"./views/sections/dataview\";\nimport m18 from \"./views/top\";\nimport m19 from \"./views/topbar\";\nimport { JetView } from \"webix-jet\";\n\nconst views = { JetView };\nviews[\"cards\"] = m0;\nviews[\"editor\"] = m1;\nviews[\"folders\"] = m2;\nviews[\"list\"] = m3;\nviews[\"menus/addnewmenu\"] = m4;\nviews[\"menus/contextmenu\"] = m5;\nviews[\"menus/menubody\"] = m6;\nviews[\"mobile/previewpopup\"] = m7;\nviews[\"mobile/sidetree\"] = m8;\nviews[\"panel-double\"] = m9;\nviews[\"panel-search\"] = m10;\nviews[\"panel\"] = m11;\nviews[\"preview\"] = m12;\nviews[\"preview/info\"] = m13;\nviews[\"preview/media\"] = m14;\nviews[\"preview/template\"] = m15;\nviews[\"progress\"] = m16;\nviews[\"sections/dataview\"] = m17;\nviews[\"top\"] = m18;\nviews[\"topbar\"] = m19;\n\nexport default views;\n","export default class Backend {\n\tconstructor(app, url) {\n\t\tthis.app = app;\n\t\tthis._url = url;\n\t\tthis._features = { preview: {}, meta: {} };\n\t}\n\n\turl(path) {\n\t\treturn this._url + path;\n\t}\n\n\tsearch(id, search) {\n\t\tid = id || \"/\";\n\t\treturn this._files(this.url(\"files\"), { id, search });\n\t}\n\n\tfiles(id) {\n\t\tid = id || \"/\";\n\t\treturn this._files(this.url(\"files\"), { id });\n\t}\n\n\t_files(url, params) {\n\t\tconst data = webix.ajax(url, params).then(res => res.json());\n\t\treturn this.getInfo().then(() => data);\n\t}\n\n\tfolders(id) {\n\t\tid = id || \"/\";\n\t\tconst data = webix.ajax(this.url(\"folders\"), { id });\n\t\treturn data.then(a => a.json());\n\t}\n\n\ticon(obj, size) {\n\t\tconst skin = webix.skin.$name;\n\t\treturn this.url(\n\t\t\t`icons/${skin}/${size || \"small\"}/${obj.type}/${obj.$ext}.svg`\n\t\t);\n\t}\n\n\tupload() {\n\t\treturn this.url(\"upload\");\n\t}\n\n\treadText(id) {\n\t\treturn webix.ajax(this.url(\"text\"), { id }).then(data => data.text());\n\t}\n\n\twriteText(id, content) {\n\t\treturn webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"text\"), {\n\t\t\t\tid,\n\t\t\t\tcontent,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\tdirectLink(id, download) {\n\t\treturn this.url(\n\t\t\t`direct?id=${encodeURIComponent(id)}${download ? \"&download=true\" : \"\"}`\n\t\t);\n\t}\n\n\tpreviewURL(obj, width, height) {\n\t\tif (!this._features.preview[obj.type]) return this.icon(obj, \"big\");\n\n\t\treturn this.url(\n\t\t\t`preview?width=${width}&height=${height}&id=${encodeURIComponent(obj.id)}`\n\t\t);\n\t}\n\n\tremove(id) {\n\t\treturn webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"delete\"), {\n\t\t\t\tid,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\tmakedir(id, name) {\n\t\treturn webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"makedir\"), {\n\t\t\t\tid,\n\t\t\t\tname,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\tmakefile(id, name) {\n\t\treturn webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"makefile\"), {\n\t\t\t\tid,\n\t\t\t\tname,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\tcopy(id, to) {\n\t\treturn webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"copy\"), {\n\t\t\t\tid,\n\t\t\t\tto,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\tmove(id, to) {\n\t\treturn webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"move\"), {\n\t\t\t\tid,\n\t\t\t\tto,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\trename(id, name) {\n\t\treturn webix\n\t\t\t.ajax()\n\t\t\t.post(this.url(\"rename\"), {\n\t\t\t\tid,\n\t\t\t\tname,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\tgetRootName() {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn _(\"My Files\");\n\t}\n\n\tgetMeta(obj) {\n\t\tif (!this._features.meta[obj.type]) return false;\n\n\t\treturn webix\n\t\t\t.ajax(this.url(\"meta\"), {\n\t\t\t\tid: obj.id,\n\t\t\t})\n\t\t\t.then(r => r.json());\n\t}\n\n\tgetInfo(force) {\n\t\t// cache global info\n\t\tif (this._info && !force) return this._info;\n\n\t\treturn (this._info = webix.ajax(this.url(\"info\")).then(resp => {\n\t\t\tresp = resp.json();\n\t\t\tthis._features = resp.features;\n\t\t\treturn resp;\n\t\t}));\n\t}\n}\n","export default class Cache {\n\tconstructor(limit) {\n\t\tthis._store = new Map();\n\t\tthis._limit = limit;\n\t\tthis._i = 1;\n\t}\n\teach(code) {\n\t\tthis._store.forEach(a => code(a.obj));\n\t}\n\tset(key, obj) {\n\t\tif (this._store.size >= this._limit) this.prune();\n\n\t\tthis._store.set(key, {\n\t\t\tobj,\n\t\t\tkey,\n\t\t\tt: this._i++,\n\t\t});\n\t}\n\tget(key) {\n\t\tconst rec = this._store.get(key);\n\t\tif (!rec) return null;\n\n\t\trec.t = this._i++;\n\t\treturn rec.obj;\n\t}\n\tprune() {\n\t\tlet temp = [];\n\t\tthis._store.forEach(a => temp.push(a));\n\t\ttemp = temp.sort((a, b) => (a.t > b.t ? -1 : 1));\n\t\tfor (var i = Math.floor(this._limit / 2); i < temp.length; i++) {\n\t\t\tthis._store.delete(temp[i].key);\n\t\t}\n\t}\n\tdelete(key) {\n\t\tif (this._store.has(key)) this._store.delete(key);\n\t}\n\tclear() {\n\t\tthis._store.clear();\n\t}\n}\n","import Cache from \"./Cache\";\nimport { ext } from \"helpers/common\";\n\nexport default class LocalData {\n\tconstructor(app, size) {\n\t\tthis.app = app;\n\t\tthis.fscache = new Cache(size);\n\t\tthis.hierarchy = new webix.TreeCollection();\n\t\tthis.folders_ready = null;\n\t}\n\n\tdefaultDir(id) {\n\t\tconst dir = [];\n\t\tif (id !== \"/\")\n\t\t\tdir.push({\n\t\t\t\ttype: \"folder\",\n\t\t\t\tvalue: \"..\",\n\t\t\t\t$row: (obj, common) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tcommon.backIcon() +\n\t\t\t\t\t\t`<span class='webix_fmanager_back'>${common.backLabel()}</span>`\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t});\n\t\treturn dir;\n\t}\n\n\tfiles(path, sync) {\n\t\tlet fs = this.fscache.get(path);\n\t\tif (sync) return fs;\n\t\tif (fs) return Promise.resolve(fs);\n\n\t\tfs = new webix.DataCollection({\n\t\t\tscheme: {\n\t\t\t\t$change: this.prepareData,\n\t\t\t\t$serialize: this.serializeData,\n\t\t\t},\n\t\t});\n\t\tthis.fscache.set(path, fs);\n\t\treturn this.reload(fs, path);\n\t}\n\n\tserializeData(a) {\n\t\tif (a.value == \"..\") return false;\n\t\telse {\n\t\t\tconst o = {};\n\t\t\tfor (let f in a) {\n\t\t\t\tif (f.indexOf(\"$\") !== 0) o[f] = a[f];\n\t\t\t}\n\t\t\treturn o;\n\t\t}\n\t}\n\n\tprepareData(a) {\n\t\tif (typeof a.date === \"number\") a.date = new Date(a.date * 1000);\n\n\t\tif (a.type === \"folder\") a.$css = a.type;\n\t\telse a.$ext = ext(a.value);\n\t}\n\n\treload(fs, path) {\n\t\treturn this.app\n\t\t\t.getService(\"backend\")\n\t\t\t.files(path)\n\t\t\t.then(data => {\n\t\t\t\tfs.clearAll();\n\t\t\t\tfs.parse(this.defaultDir(path).concat(data));\n\t\t\t\treturn fs;\n\t\t\t});\n\t}\n\n\trefresh(path) {\n\t\tconst fs = this.fscache.get(path);\n\t\tif (fs) return this.reload(fs, path);\n\t}\n\n\t/**\n\t * Adds a file or a directory to FM (add, copy and move operations)\n\t * @param {string} id - the target directory\n\t * @param {Object} item - the data object of the item\n\t * @param {Boolean} dir - if true, the moved/copied folder will be checked for inner directories, and if any they will be added to the tree of folders\n\t */\n\taddFile(id, item, dir) {\n\t\tvar fs = this.fscache.get(id);\n\n\t\tif (fs) {\n\t\t\tif (!fs.exists(item.id)) {\n\t\t\t\tfs.add(item, this.getFsPosition(fs, item));\n\t\t\t}\n\t\t}\n\n\t\tif (item.type === \"folder\") {\n\t\t\tif (id === \"/\") id = \"../files\";\n\t\t\tthis.hierarchy.add(item, null, id);\n\n\t\t\tif (dir)\n\t\t\t\tthis.app\n\t\t\t\t\t.getService(\"backend\")\n\t\t\t\t\t.folders(item.id)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tdata =>\n\t\t\t\t\t\t\tdata.length && this.hierarchy.parse({ parent: item.id, data })\n\t\t\t\t\t);\n\t\t}\n\t}\n\n\tgetFsPosition(fs, item) {\n\t\tif (item.type !== \"folder\") return -1;\n\n\t\tconst d = fs.data;\n\t\treturn d.order.findIndex(a => d.getItem(a).type !== \"folder\");\n\t}\n\n\tdeleteFile(item) {\n\t\tconst { fscache, hierarchy } = this;\n\n\t\tfscache.each(fs => {\n\t\t\tif (fs && fs.exists(item)) fs.remove(item);\n\t\t});\n\n\t\tfscache.delete(item);\n\n\t\tif (hierarchy.exists(item)) hierarchy.remove(item);\n\t}\n\n\tupdateFile(oldId, data, newId) {\n\t\tconst hierarchy = this.hierarchy;\n\n\t\tthis.fscache.each(fs => {\n\t\t\tif (fs && fs.exists(oldId)) {\n\t\t\t\tfs.updateItem(oldId, data);\n\t\t\t\tif (newId && oldId != newId) fs.data.changeId(oldId, newId);\n\t\t\t}\n\t\t});\n\n\t\tif (hierarchy.exists(oldId)) {\n\t\t\thierarchy.updateItem(oldId, data);\n\t\t\tif (newId && oldId != newId) {\n\t\t\t\thierarchy.data.changeId(oldId, newId);\n\t\t\t}\n\t\t}\n\t}\n\n\tdefaultTree() {\n\t\treturn [{ value: \"My Files\", id: \"../files\", open: true }];\n\t}\n\n\tfolders(force) {\n\t\tconst hierarchy = this.hierarchy;\n\n\t\tif (force || !this.folders_ready) {\n\t\t\tthis.folders_ready = this.app\n\t\t\t\t.getService(\"backend\")\n\t\t\t\t.folders()\n\t\t\t\t.then(data => {\n\t\t\t\t\thierarchy.clearAll();\n\t\t\t\t\thierarchy.parse(this.defaultTree());\n\t\t\t\t\thierarchy.parse({ parent: \"../files\", data });\n\n\t\t\t\t\treturn hierarchy;\n\t\t\t\t});\n\t\t}\n\n\t\treturn this.folders_ready;\n\t}\n}\n","export default class UploadHandler {\n\tconstructor(app, state) {\n\t\tthis.initUploader(app);\n\t\tthis.initEvents(app, state);\n\t}\n\n\tinitEvents(app, state) {\n\t\tapp.attachEvent(\"app:action\", (name, info) => {\n\t\t\tif (name == \"upload\" || name == \"uploaddir\") {\n\t\t\t\tif (!info) info = state.path || \"/\";\n\t\t\t\tthis.openDialog(name, info);\n\t\t\t}\n\t\t});\n\t}\n\n\tinitUploader(app) {\n\t\tthis.uploader = this.createUploader(app);\n\t\tthis.dirUploader = this.createUploader(app, true);\n\t}\n\n\tcreateUploader(app, directory) {\n\t\tconst uploader = webix.ui({\n\t\t\tview: \"uploader\",\n\t\t\tdirectory,\n\t\t\tapiOnly: true,\n\t\t\tupload: app.getService(\"backend\").upload(),\n\t\t\ton: {\n\t\t\t\tonAfterFileAdd: function(item) {\n\t\t\t\t\titem.urlData = this.config.tempUrlData;\n\t\t\t\t},\n\t\t\t\tonUploadComplete: function() {\n\t\t\t\t\tapp.getService(\"progress\").end();\n\t\t\t\t\tapp.callEvent(\"reload:fs:stats\", []);\n\n\t\t\t\t\tif (directory) {\n\t\t\t\t\t\tconst path = this.config.tempUrlData.id;\n\t\t\t\t\t\tconst local = app.getService(\"local\");\n\t\t\t\t\t\tlocal.refresh(path);\n\t\t\t\t\t\tlocal.folders(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tif (!directory)\n\t\t\tuploader.attachEvent(\"onFileUpload\", (file, res) => {\n\t\t\t\tapp.getService(\"local\").addFile(file.urlData.id, res);\n\t\t\t});\n\n\t\tuploader.$updateProgress = (_, percent) => {\n\t\t\tconst progress = percent / 100;\n\t\t\tif (progress) app.getService(\"progress\").start(progress);\n\t\t};\n\n\t\treturn uploader;\n\t}\n\n\topenDialog(type, id) {\n\t\tconst uploader = type == \"upload\" ? this.uploader : this.dirUploader;\n\t\tuploader.config.tempUrlData = { id };\n\t\tuploader.fileDialog();\n\t}\n\n\t// required for DND of files and folders\n\tgetUploader() {\n\t\treturn this.dirUploader;\n\t}\n}\n","export default class Progress {\n\tconstructor() {\n\t\tthis.view = null;\n\t\tthis.popup = null;\n\t}\n\n\thandle(view, popup) {\n\t\tthis.view = view;\n\t\twebix.extend(view, webix.ProgressBar);\n\n\t\tthis.popup = popup;\n\t}\n\n\tstart(size) {\n\t\tconst view = this.view;\n\t\tif (!view || view.$destructed) return;\n\n\t\tview.showProgress({\n\t\t\ttype: \"top\",\n\t\t\tdelay: 3000,\n\t\t\thide: true,\n\t\t\tposition: size\n\t\t});\n\t}\n\n\tend() {\n\t\tconst view = this.view;\n\t\tif (!view || view.$destructed) return;\n\n\t\tview.hideProgress();\n\t}\n\n\tfiles(head, files, code) {\n\t\tif (!files.length) return;\n\t\tif (files.length == 1) {\n\t\t\tthis.start();\n\t\t\treturn code(files[0], 0).finally(() => this.end());\n\t\t}\n\n\t\tif (this.popup)\n\t\t\treturn this.popup({\n\t\t\t\tconfig: { head, files, code },\n\t\t\t}).then(popup => popup.WaitClose);\n\t}\n}\n","import { prompt } from \"../helpers/prompt\";\nimport { fileNameSelectMask, safeName } from \"../helpers/common\";\n\nexport default class Operations {\n\t/**\n\t * @constructor\n\t * @param {Object} app - the Jet app\n\t * @param {Object} state - the reactive state\n\t */\n\tconstructor(app, state) {\n\t\tthis.app = app;\n\t\tthis.state = state;\n\n\t\tthis.initEvents();\n\t}\n\n\t/**\n\t * Returns the Backend service\n\t * @returns {Object}\n\t */\n\tbackend() {\n\t\treturn this.app.getService(\"backend\");\n\t}\n\n\t/**\n\t * Returns the Local service\n\t * @returns {Object}\n\t */\n\tlocal() {\n\t\treturn this.app.getService(\"local\");\n\t}\n\n\t/**\n\t * Adds event handlers to app actions\n\t */\n\tinitEvents() {\n\t\tthis.app.attachEvent(\"app:action\", (name, info) => {\n\t\t\tswitch (name) {\n\t\t\t\tcase \"open\":\n\t\t\t\t\tthis.open(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"download\":\n\t\t\t\t\tthis.download(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"edit\":\n\t\t\t\t\tthis.edit(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete\":\n\t\t\t\t\tthis.remove(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"makefile\":\n\t\t\t\t\tthis.makeFile(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"makedir\":\n\t\t\t\t\tthis.makeFolder(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"rename\":\n\t\t\t\t\tthis.rename(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"copy\":\n\t\t\t\tcase \"cut\":\n\t\t\t\t\tthis.addToClipboard(name);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"paste\":\n\t\t\t\t\tthis.paste(info);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"locate\":\n\t\t\t\t\tthis.goUp(info);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Saves new content to a text file\n\t * @param {string} id - the ID of a text file\n\t * @param {string} content - the new content of the file\n\t * @returns {Promise} that resolves with a file data object\n\t */\n\twrite(id, content) {\n\t\treturn this.backend()\n\t\t\t.writeText(id, content)\n\t\t\t.then(data =>\n\t\t\t\tthis.local().updateFile(id, { size: data.size, date: data.date })\n\t\t\t);\n\t}\n\n\t/**\n\t * Opens a text file and reads its contents\n\t * @param {string} id - the ID of a text file\n\t * @returns {Promise} that resolves with the contents of a text file (string)\n\t */\n\tread(id) {\n\t\treturn this.backend().readText(id);\n\t}\n\n\t/**\n\t * Creates a new file in the currently opened directory or in the root\n\t * @param {string} name - the name of the new file\n\t */\n\tmakeFile(name) {\n\t\tconst id = this.state.path || \"/\";\n\t\tthis.backend()\n\t\t\t.makefile(id, name)\n\t\t\t.then(res => {\n\t\t\t\tif (!res.invalid) this.local().addFile(id, res);\n\t\t\t});\n\t}\n\n\t/**\n\t * Creates a new folder in the currently opened directory or in the root\n\t * @param {string} name - the name of the folder\n\t */\n\tmakeFolder(name) {\n\t\tconst id = this.state.path || \"/\";\n\t\tthis.backend()\n\t\t\t.makedir(id, name)\n\t\t\t.then(res => {\n\t\t\t\tif (!res.invalid) this.local().addFile(id, res);\n\t\t\t});\n\t}\n\n\t/**\n\t * Opens the files in a text editor (files of type:\"code\")\n\t * @param {Array} files - an array of file data objects\n\t */\n\tedit(files) {\n\t\tconst state = this.state;\n\t\tif (!files) files = state.selectedItem;\n\t\tfiles = files.filter(file => file.type === \"code\");\n\t\tif (files.length) {\n\t\t\tthis.app.show(\"/editor\", {\n\t\t\t\tparams: {\n\t\t\t\t\tfiles,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Opens files in new browser tabs\n\t * @param {Array} files - an array of file data objects\n\t */\n\topen(files) {\n\t\tif (!files) files = this.state.selectedItem;\n\t\tfor (let i = 0; i < files.length; ++i) {\n\t\t\tif (files[i].type != \"folder\") {\n\t\t\t\twindow.open(this.backend().directLink(files[i].id), \"_blank\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Downloads a file\n\t * @param {Array} files - an array with a file data object\n\t */\n\tdownload(files) {\n\t\tif (!files) files = this.state.selectedItem;\n\t\twindow.open(this.backend().directLink(files[0].id, true), \"_self\");\n\t}\n\n\t/**\n\t * Removes files and files forever\n\t * @param {Array} files - an array of folder/file data objects\n\t * @returns {Promise} - empty promise\n\t */\n\tremove(sfiles) {\n\t\tconst state = this.state;\n\n\t\tconst files = this.extractIds(sfiles || state.selectedItem);\n\t\tif (!files.length) return webix.promise.reject();\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn webix\n\t\t\t.confirm({\n\t\t\t\ttitle: _(\"Delete files\"),\n\t\t\t\ttext: this.removeConfirmMessage(sfiles || state.selectedItem),\n\t\t\t\tcontainer: this.app.getRoot().$view,\n\t\t\t\tcss: \"webix_fmanager_confirm\",\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\treturn this.app\n\t\t\t\t\t.getService(\"progress\")\n\t\t\t\t\t.files(_(\"Deleting...\"), files, f => {\n\t\t\t\t\t\treturn this.backend()\n\t\t\t\t\t\t\t.remove(f)\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\tif (!res.invalid) {\n\t\t\t\t\t\t\t\t\tthis.local().deleteFile(f);\n\t\t\t\t\t\t\t\t\tif (state.path === f) {\n\t\t\t\t\t\t\t\t\t\tstate.path = \"/\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// reset inactive path in 'double'\n\t\t\t\t\t\t\t\t\tthis.app.callEvent(\"pathChanged\", [f, \"/\"]);\n\t\t\t\t\t\t\t\t\tthis.app.callEvent(\"reload:fs:stats\", []);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\t// relaunch search\n\t\t\t\tif (state.search) {\n\t\t\t\t\tstate.search = state.search + \" \";\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Returns a message for a confirmation dialogue for file/folder removal\n\t * @param {Array} files - an array of file/folder data objects\n\t * @returns {string}\n\t */\n\tremoveConfirmMessage(files) {\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tlet message = `<div class=\"question\">${_(\n\t\t\t\"Are you sure you want to delete\"\n\t\t)} ${files.length > 1 ? _(\"these items:\") : _(\"this item:\")}</div>`;\n\n\t\tlet i = 0;\n\t\tconst icon = \"&#9679;&nbsp;\";\n\t\tfor (const limit = files.length < 6 ? files.length : 5; i < limit; ++i) {\n\t\t\tmessage += `<div class=\"item\">${icon}${files[i].value}</div>`;\n\t\t}\n\t\tif (i < files.length) {\n\t\t\tmessage += `<div>${icon}${_(\"and\")} ${files.length - i} ${_(\n\t\t\t\t\"more file(s)\"\n\t\t\t)}</div>`;\n\t\t}\n\n\t\treturn message;\n\t}\n\n\t/**\n\t * Renames a file/folder\n\t * @param {Array} f - an array with a file/folder data object\n\t */\n\trename(f) {\n\t\tconst state = this.state;\n\t\tconst file = f ? f[0] : state.selectedItem[0];\n\t\tif (!file) return;\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\tconst oldId = file.id;\n\n\t\tprompt(\n\t\t\t{\n\t\t\t\ttext: _(\"Enter a new name\"),\n\t\t\t\tbutton: _(\"Rename\"),\n\t\t\t\tvalue: file.value,\n\t\t\t\tselectMask: file.type !== \"folder\" ? fileNameSelectMask : null,\n\t\t\t},\n\t\t\tthis.app\n\t\t).then(name => {\n\t\t\tname = safeName(name);\n\t\t\tif (name && name !== file.value)\n\t\t\t\tthis.backend()\n\t\t\t\t\t.rename(oldId, name)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.local().updateFile(\n\t\t\t\t\t\t\toldId,\n\t\t\t\t\t\t\t{ value: res.id.split(\"/\").pop() },\n\t\t\t\t\t\t\tres.id\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (file.type === \"folder\")\n\t\t\t\t\t\t\tthis.reloadBranch(res.id).then(() => {\n\t\t\t\t\t\t\t\t// reset active path in 'list'/'cards' if folder was renamed\n\t\t\t\t\t\t\t\tif (state.path === oldId) {\n\t\t\t\t\t\t\t\t\tstate.path = res.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// reset inactive path in 'double'\n\t\t\t\t\t\t\t\tthis.app.callEvent(\"pathChanged\", [oldId, res.id]);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// relaunch search\n\t\t\t\t\t\tif (state.search) {\n\t\t\t\t\t\t\tstate.search = state.search + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Reloads the contents of a directory\n\t * @param {string} id - the ID of a directory\n\t * @returns {Promise}\n\t */\n\treloadBranch(id) {\n\t\tconst hierarchy = this.local().hierarchy;\n\t\treturn this.app\n\t\t\t.getService(\"backend\")\n\t\t\t.folders(id)\n\t\t\t.then(data => {\n\t\t\t\tconst toRemove = [];\n\t\t\t\thierarchy.data.eachChild(id, obj => toRemove.push(obj.id));\n\t\t\t\thierarchy.parse({ parent: id, data });\n\t\t\t\thierarchy.remove(toRemove);\n\t\t\t});\n\t}\n\n\t/**\n\t * Copies files and folders to a target directory\n\t * @param {Array} files - an array of item IDs\n\t * @param {string} targetFolder - the ID of the target directory\n\t * @returns {Promise} - empty promise\n\t */\n\tcopy(files, targetFolder) {\n\t\tif (!files.length) return webix.promise.reject();\n\t\tconst local = this.local();\n\t\tconst _ = this.app.getService(\"locale\")._;\n\n\t\treturn this.app.getService(\"progress\").files(_(\"Copying...\"), files, f => {\n\t\t\treturn this.backend()\n\t\t\t\t.copy(f, targetFolder)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (!res.invalid) {\n\t\t\t\t\t\tlocal.addFile(targetFolder, res, true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Moves files and folders to a target directory\n\t * @param {Array} files - an array of item IDs\n\t * @param {string} targetFolder - the ID of the target directory\n\t * @returns {Promise} - empty promise\n\t */\n\tmove(files, targetFolder) {\n\t\tif (!files.length || !targetFolder) return webix.promise.reject();\n\t\tconst local = this.local();\n\n\t\t// prevent move to the existing location\n\t\tconst tfs = local.files(targetFolder, true);\n\t\tif (tfs) files = files.filter(a => !tfs.exists(a));\n\t\t// prevent moving folder into itself\n\t\tfiles = files.filter(a => a != targetFolder);\n\t\tif (!files.length) return webix.promise.reject();\n\n\t\tconst _ = this.app.getService(\"locale\")._;\n\t\treturn this.app.getService(\"progress\").files(_(\"Moving...\"), files, f => {\n\t\t\treturn this.backend()\n\t\t\t\t.move(f, targetFolder)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (!res.invalid) {\n\t\t\t\t\t\tlocal.deleteFile(f);\n\t\t\t\t\t\tlocal.addFile(targetFolder, res, true);\n\n\t\t\t\t\t\tif (this.state.path === f) {\n\t\t\t\t\t\t\tthis.state.path = res.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// reset inactive path in 'double'\n\t\t\t\t\t\tthis.app.callEvent(\"pathChanged\", [f, res.id]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Returns file/folder IDs\n\t * @param {Array} files - an array of file/folder data objects\n\t * @returns {Array} - an array of IDs\n\t */\n\textractIds(files) {\n\t\tif (!files.length || typeof files[0] == \"string\") return files;\n\n\t\tconst ids = [];\n\t\tfor (let i = 0; i < files.length; ++i) {\n\t\t\t// for actions from context menu, filter out \"back to parent\"\n\t\t\tif (files[i].value !== \"..\") ids.push(files[i].id);\n\t\t}\n\t\treturn ids;\n\t}\n\t/**\n\t * Adds selected files and folders to the clipboard\n\t * @param {string} mode - \"cut\" or \"copy\"\n\t */\n\taddToClipboard(mode) {\n\t\tconst files = this.state.selectedItem;\n\t\tif (files.length)\n\t\t\tthis.state.clipboard = {\n\t\t\t\tfiles,\n\t\t\t\tmode: mode,\n\t\t\t};\n\t}\n\n\t/**\n\t * Clears the clipboard\n\t */\n\tclearClipboard() {\n\t\tthis.state.clipboard = null;\n\t}\n\n\t/**\n\t * Moves or copies files and folders from clipboard to the currently opened directory\n\t * or currently selected folder if pasting command originated from context menu called on a folder\n\t * @param {Array<Object>} files - (optional) the array of currently selected files\n\t */\n\tpaste(files) {\n\t\tconst state = this.state;\n\n\t\tif (!state.clipboard) return;\n\n\t\tlet target = state.path;\n\t\tif (files && files[0].type == \"folder\") target = files[0].id;\n\n\t\tif (state.clipboard.mode === \"copy\") {\n\t\t\tthis.copy(this.extractIds(state.clipboard.files), target);\n\t\t} else if (state.clipboard.mode === \"cut\") {\n\t\t\tthis.move(this.extractIds(state.clipboard.files), target);\n\t\t}\n\t\tthis.clearClipboard();\n\t}\n\n\t/**\n\t * Opens the directory that contains the selected item (used in search output view)\n\t * @param {*} files\n\t */\n\tgoUp(files) {\n\t\tconst state = this.state;\n\t\tif (state.search) {\n\t\t\tconst file = files ? files[0] : state.selectedItem[0];\n\t\t\tif (!file) return;\n\t\t\tconst up = file.id.split(\"/\");\n\n\t\t\tconst path = \"/\" + up.slice(1, up.length - 1).join(\"/\");\n\t\t\tstate.$batch({\n\t\t\t\tsearch: \"\",\n\t\t\t\tsearchStats: null,\n\t\t\t\tpath: path,\n\t\t\t});\n\t\t}\n\t}\n}\n","import { JetApp, plugins, EmptyRouter } from \"webix-jet\";\nimport { createState, link } from \"jet-restate\";\nimport { initJetWin } from \"@xbs/jet-helpers\";\n\nimport views from \"./export_views\";\nimport en from \"locales/en\";\n\nimport Backend from \"./models/Backend\";\nimport LocalData from \"./models/LocalData\";\nimport Upload from \"./models/Upload\";\nimport Progress from \"./models/Progress\";\nimport Operations from \"./models/Operations\";\n\nexport class App extends JetApp {\n\tconstructor(config) {\n\t\tconst state = createState({\n\t\t\tmode: config.mode || \"grid\",\n\t\t\tselectedItem: [],\n\t\t\tsearch: \"\",\n\t\t\tsearchStats: null,\n\t\t\tpath: config.path || \"/\",\n\t\t\tsource: config.source || \"files\",\n\t\t\tclipboard: null,\n\t\t\tpreview: false,\n\t\t});\n\n\t\tconst defaults = {\n\t\t\trouter: EmptyRouter,\n\t\t\tversion: VERSION,\n\t\t\tdebug: DEBUG,\n\t\t\tstart: \"/top\",\n\t\t\tparams: { state, forceCompact: config.compact },\n\t\t\teditor: true,\n\t\t\tplayer: true,\n\t\t\tcompactWidth: 640,\n\t\t};\n\n\t\tsuper({ ...defaults, ...config });\n\n\t\tthis.setService(\n\t\t\t\"backend\",\n\t\t\tnew (this.dynamic(Backend))(this, this.config.url)\n\t\t);\n\t\tthis.setService(\"local\", new (this.dynamic(LocalData))(this, 10));\n\t\tthis.setService(\"progress\", new (this.dynamic(Progress))(this));\n\t\tthis.setService(\"upload\", new (this.dynamic(Upload))(this, state));\n\t\tthis.setService(\"operations\", new (this.dynamic(Operations))(this, state));\n\t\tinitJetWin(this);\n\n\t\tthis.use(\n\t\t\tplugins.Locale,\n\t\t\tthis.config.locale || {\n\t\t\t\tlang: \"en\",\n\t\t\t\twebix: {\n\t\t\t\t\ten: \"en-US\",\n\t\t\t\t\tzh: \"zh-CN\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\n\tdynamic(obj) {\n\t\treturn this.config.override ? this.config.override.get(obj) || obj : obj;\n\t}\n\n\trequire(type, name) {\n\t\tif (type === \"jet-views\") return views[name];\n\t\telse if (type === \"jet-locales\") return locales[name];\n\n\t\treturn null;\n\t}\n\n\t// for external users\n\tgetState() {\n\t\treturn this.config.params.state;\n\t}\n}\n\nwebix.protoUI(\n\t{\n\t\tname: \"filemanager\",\n\t\tapp: App,\n\t\tgetState() {\n\t\t\treturn this.$app.getState();\n\t\t},\n\t\tgetService(name) {\n\t\t\treturn this.$app.getService(name);\n\t\t},\n\t\t$init() {\n\t\t\tthis.$view.className += \" webix_files\";\n\n\t\t\tconst state = this.$app.getState();\n\t\t\tfor (let key in state) {\n\t\t\t\tlink(state, this.config, key);\n\t\t\t}\n\t\t},\n\t},\n\twebix.ui.jetapp\n);\n\n// re-export for customization\nconst services = { Backend, LocalData, Upload, Progress, Operations };\nconst locales = { en };\nexport { views, locales, services };\n","export default {\n\tSave: \"Save\",\n\t\"Save all\": \"Save all\",\n\tRename: \"Rename\",\n\tOpen: \"Open\",\n\tEdit: \"Edit\",\n\tDelete: \"Delete\",\n\tFolder: \"Folder\",\n\t\"Add New\": \"Add New\",\n\t\"My Files\": \"My Files\",\n\tSize: \"Size\",\n\tDate: \"Date\",\n\t\"back to parent folder\": \"back to parent folder\",\n\tDownload: \"Download\",\n\tType: \"Type\",\n\tInformation: \"Information\",\n\tFiles: \"Files\",\n\tTable: \"Table\",\n\tCards: \"Cards\",\n\tTotal: \"Total\",\n\t\"Are you sure ?\": \"Are you sure ?\",\n\tDetails: \"Details\",\n\t\"Enter a new name\": \"Enter a new name\",\n\tAdd: \"Add\",\n\t\"Select something\": \"Select something\",\n\t\"Download file\": \"Download file\",\n\tPreview: \"Preview\",\n\tRefresh: \"Refresh\",\n\t\"Are you sure you want to exit without saving?\":\n\t\t\"Are you sure you want to exit without saving?\",\n\t\"Save before closing?\": \"Save before closing?\",\n\tCopy: \"Copy\",\n\tCut: \"Cut\",\n\tPaste: \"Paste\",\n\t\"Deleting...\": \"Deleting...\",\n\t\"Copying...\": \"Copying...\",\n\t\"Moving...\": \"Moving...\",\n\tFolders: \"Folders\",\n\t\"Search results\": \"Search results\",\n\t\"Search results in\": \"Search results in\",\n\t\"Search files and folders\": \"Search files and folders\",\n\t\"Add new file\": \"Add new file\",\n\t\"Add new folder\": \"Add new folder\",\n\t\"Upload file\": \"Upload file\",\n\t\"Upload folder\": \"Upload folder\",\n\tfolder: \"folder\",\n\tfile: \"file\",\n\tarchive: \"archive\",\n\taudio: \"audio\",\n\timage: \"image\",\n\tvideo: \"video\",\n\tcode: \"code\",\n\tdocument: \"document\",\n\tof: \"of\",\n\tused: \"used\",\n\t\"Open item location\": \"Open item location\",\n\t\"Are you sure you want to delete\": \"Are you sure you want to delete\",\n\t\"these items:\": \"these items:\",\n\t\"this item:\": \"this item:\",\n\t\"Delete files\": \"Delete files\",\n\tand: \"and\",\n\t\"more file(s)\": \"more file(s)\",\n\t\"Close the editor\": \"Close the editor\",\n\t\"Close this file\": \"Close this file\",\n};\n"],"names":["webix","config","this","webixJet","_events","_subs","_data","params","extend","JetBase","_root","_detachEvents","_destroySubs","_container","app","_parent","id","value","url","_segment","update","show","parent","view","getParentView","getParam","suburl","toString","root_1","getRoot","queryView","obj","localId","$scope","name","code","attachEvent","push","key","kid","contains","sub","getSubViewInfo","subview","popup","events","i","length","detachEvent","subView","destructor","current","default","branch","child","_getDefaultSub","_routed_view","parse","substr","parts","split","chunks","test","result","pos","indexOf","params_1","_i","dchunk","decodeURIComponent","page","isNew","url2str","stack","stack_1","chunk","obj2str","join","str","encodeURIComponent","route","index","_next","path","Route","slice","setParams","old","kids","reset","concat","_join","Promise","res","rej","redirect","confirm","resolve","callEvent","NavigationBlocked","catch","err","then","_this","n","_super","_children","__extends","JetView","ui","container","jetview","createView","render","setParam","parent_1","target","_renderFrameLock","_show","segment","_init_url_data","_urlChange","linkRouter","getRouter","set","silent","_$view","_$","_$url","message","destroy","_destroyKids","plugin","getUrl","tagName","refresh","_render","root","document","body","toNode","cfg","_render_final","response","slot","$$","reject","copyConfig","oldui","parent_2","asWin","setPosition","isVisible","_init","_initUrl","ready","e","_initError","init","waits","frame","wait","all","urlChange","lock","_renderFrame","next","_createSubView","shift","_override","error","createFromURL","uis","_ui","JetViewRaw","cb","SubRouter","a","append","_once","window","version","start","_services","EventSystem","JetAppBase","_subSegment","handler","getSubView","prototype","$subview","addSubView","isArray","Array","method","point","DataCollection","RegExp","Map","Date","copy","$router","srcElement","getAttribute","trigger_1","_forView","trigger","cancelBubble","preventDefault","route_1","parentNode","clickHandler","views","_loadError","Error","hidden","replace","require","module","__esModule","loadView","over","override","dv","get","router","rest","apply","data","bind","er","debug","console","text","innerHTML","type","expire","event","_first_start","top","base","setTimeout","animation","node_1","html","addCss","removeCss","now","urlString","template","uid","_detectPrefix","onpopstate","HashRouter","routes","compare","history","pushState","prefix","sufix","_getRaw","routerPrefix","location","href","isPatched","patch","w","win","promise","freeze","some","$freeze","resize","baseAdd","baselayout","addView","baseRemove","removeView","jview_1","subs_1","arguments","subs","layout","protoUI","$init","$app","$ready","proxy","JetApp","UrlRouter","pathname","search","_$config","EmptyRouter","has","store","Object","hasOwnProperty","call","forEach","context","warn","x","String","russianPluralGroups","end","pluralTypes","arabic","lastTwo","bosnian_serbian","chinese","croatian","french","german","russian","lithuanian","czech","polish","icelandic","slovenian","pluralTypeToLanguages","pluralTypeName","locale","ret","langToPluralType","langs","lang","en","escape","token","dollarRegex","defaultTokenRegex","transformPhrase","phrase","substitutions","tokenRegex","TypeError","interpolationRegex","options","smart_count","texts","count","pluralTypeIndex","expression","argument","Polyglot","opts","phrases","currentLocale","allowMissing","onMissingKey","suffix","RangeError","constructTokenRegex","interpolation","newLocale","morePhrases","prefixedKey","unset","clear","newPhrases","t","_","webixPolyglot","plugins","_view","storage","setLangData","pconfig","polyglot","poly","service","put","locName","i18n","setLocale","setLang","getLang","setService","link","source","defineProperty","createState","handlers","out","observe","mask","undefined","queue","waitInQueue","notify","meta","list","keys","key2","nested","reactive","enumerable","configurable","values_1","val","valueOf","once","setSize","appView","appWidth","$width","appHeight","$height","_fillApp","define","width","height","left","setHandlers","$destructed","$view","enable","resizeEv","UIManager","addHotKey","_a","removeHotKey","folderIcon","menuIcon","compact","tree","MenuBodyView","getService","state","icon","FILE","hotkey","$template","COMPACT","SEARCH","VIEW","RIGHT","ITEMS","editor","splice","css","autoheight","on","onMenuItemClick","preview","Files","files","file","many","vtypes","viewable","$ext","getState","empty","filter","o","_config","ContextMenuView","dynamic","onBeforeShow","_Locate","FilterOptions","hide","master","locate","attachTo","trg","offsetX","y","offsetHeight","offsetY","DataViewBase","State","Local","_Track","WTable","ShiftFocus","newIDs","getSelectedId","map","getItem","selectedItem","$noSelect","$changes","v","$batch","searchStats","folders","hierarchy","GetPrevLocation","LoadData","m","SelectActive","AddHotkeys","Menu","AttachTo","header","item","isSelected","select","sel","s","Hide","isActive","items","ShowSubFolder","operation","oldPath","exists","getParentId","date","targetItem","table","getFirstId","delay","setFocus","clearAll","prepareData","GetSearchStats","RenderData","move","GetTargetFolder","ctx","find","f","parentInd","firstDragged","Icon","multiple","ctrlKey","env","isMac","operations","oper","this_1","preventEvent","selectAll","unselectAll","CardsView","smallSkin","skin","$name","drag","multiselect","CardTemplate","padding","onItemDblClick","Activate","GetSelection","onEnter","onBeforeDrag","DragMarker","onBeforeDrop","MoveFiles","onClick","webix_fmanager_menu_icon","Show","webix_dataview","EmptyClick","onContext","sync","panel","SearchTemplate","picSize","$active","listItemHeight","origin_1","previewURL","rex","fileNameSelectMask","input","extIndex","lastIndexOf","setSelectionRange","iterateAsync","arr","cancel","formatTemplate","size","toFixed","getLastSelected","safeName","trim","capitalize","charAt","toUpperCase","defaults","mode","lineNumbers","matchBrackets","theme","_textarea","firstChild","_waitEditor","defer","_render_cm_editor","complex_types","php","htmlembedded","addon","htmlmixed","dockerfile","cdn","sources","extras","_render_when_ready","log","_editor","CodeMirror","fromTextArea","setValue","_focus_await","focus","_set_inner_size","_updateScrollSize","scrollTo","box","getWrapperElement","style","scroll","getScrollerElement","$setSize","preserveUndoHistory","clearHistory","getValue","getEditor","waitEditor","undo","redo","undoLength","historySize","typeHash","go","javascript","markdown","python","sql","yaml","shell","EditorView","tabbar","borderless","tabMinWidth","moreTemplate","tooltip","onChange","OpenDoc","onBeforeTabClick","TabAction","tabbarPopup","toolbar","right","bottom","toolbarHeight","cols","mobile","GetMobileControls","GetCloseAll","rows","label","click","Save","ConfirmAll","ProgressBar","showProgress","GetFileLabel","_oldValue","_changed","_buffers","editorObj","read","AddDoc","AddTab","finally","hideProgress","HandleChanges","SaveAll","TextChanged","GetActiveFile","Doc","GetFileType","short","ClipName","tabContent","getTextSize","addOption","swapDoc","CheckChanges","Back","classes","className","actionIcon","CloseTab","ConfirmOne","WriteFileContent","ChangeTextState","content","write","isEqual","ChangeButtonState","ChangeTabsState","button","tab","getOption","ChangeTabState","tabs","removeOption","prompt","updateConfig","head","elements","getTopParentView","close","margin","maxWidth","validate","form","getBody","newname","getValues","onShow","getInputNode","selectMask","AddNewMenuView","StartAction","FoldersView","inputWidth","align","common","folder","$level","onBeforeContextMenu","Tree","Math","floor","used","total","timelineColor","h","Subscribe","GetFsStats","ContextMenu","GetRootId","TreeState","open","showItem","collection","setState","force","getInfo","setValues","stats","GridView","grid","resizeColumn","headerOnly","sort","backIcon","backLabel","data->onStoreLoad","markSorting","webix_ss_center_scroll","webix_column","columns","NameTemplate","fillspace","format","isNaN","longDateFormatStr","unselect","by","b","localeCompare","ignorePunctuation","numeric","PreviewPopupView","fullscreen","SideTreeView","animate","Parent","FoldersTree","updatePos","getBoundingClientRect","DoublePanelView","GetSource","_TrackChanges","trackActive","opath","npath","PanelSearchView","getRootName","PanelView","paddingX","RenderPath","webix_fmanager_path_chunk","ChangePath","ProcessPath","uapi","getUploader","addDropZone","tempUrlData","dirs","p","rootName_1","htmlPath_1","chunkInd","newPath","InfoPreview","dateTimeFormat","dateToStr","mainInfo","k","extraInfo","tags","keyCol","valueCol","counter","cells","Tabview","ShowInfo","getTabbar","infoId","counterId","SetInfo","SwitchTabs","extraInfo_1","getMeta","SetExtraInfo","_isEmpty","hideOption","showOption","PreviewView","FileInfo","minHeight","lastSelected","downloadIcon","previewUrl","player","info","overflow","_waitView","getPlayer","_player","Plyr","_initPlyr","setAttribute","media","_normalizeRatio","querySelector","source_setter","getPlyr","_gcdRatio","abs","clientWidth","clientHeight","div","ratio","MediaPreview","controls","node","ShowPreview","directLink","SetMedia","art","src","ext","TemplatePreview","setHTML","ProgressView","Config","done","disable","WaitClose","Counter","Close","Step","position","min","TopBarView","paddingY","autowidth","placeholder","_n","_o","optionWidth","conf","modes","TopView","sizeTrigger","_compactValue","_compactHandler","_app","_forceCompact","forceCompact","_compactWidth","compactWidth","_checkTrigger","fCompact","isUndefined","Compact","batch","minWidth","panels","unshift","TopBar","SetCompactMode","SideTree","PreviewPopup","ToggleFolders","ShowMode","ShowSearch","TogglePreview","handle","ShowProgress","showBatch","PrevMode","side","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","_url","_features","Backend","_files","ajax","json","post","r","download","to","_info","resp","features","limit","_store","_limit","Cache","prune","rec","temp","delete","fscache","TreeCollection","folders_ready","LocalData","dir","$row","fs","scheme","$change","$serialize","serializeData","reload","$css","defaultDir","add","getFsPosition","d","order","findIndex","each","remove","oldId","newId","updateItem","changeId","defaultTree","initUploader","initEvents","UploadHandler","openDialog","uploader","createUploader","dirUploader","directory","apiOnly","upload","onAfterFileAdd","urlData","onUploadComplete","local","addFile","$updateProgress","percent","progress","fileDialog","Progress","Operations","edit","makeFile","makeFolder","rename","addToClipboard","paste","goUp","backend","writeText","updateFile","readText","makefile","invalid","makedir","sfiles","extractIds","title","removeConfirmMessage","deleteFile","pop","reloadBranch","toRemove","eachChild","targetFolder","tfs","ids","clipboard","clearClipboard","up","appId","Upload","appNode","addStyle","firstShow","defaultHandler","use","zh","App","locales","jetapp","services","Save all","Rename","Open","Edit","Delete","Folder","Add New","My Files","Size","back to parent folder","Download","Type","Information","Table","Cards","Total","Are you sure ?","Details","Enter a new name","Add","Select something","Download file","Preview","Refresh","Are you sure you want to exit without saving?","Save before closing?","Copy","Cut","Paste","Deleting...","Copying...","Moving...","Folders","Search results","Search results in","Search files and folders","Add new file","Add new folder","Upload file","Upload folder","archive","audio","image","video","of","Open item location","Are you sure you want to delete","these items:","this item:","Delete files","and","more file(s)","Close the editor","Close this file"],"mappings":"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"}